var sD=Object.defineProperty,aD=Object.defineProperties;var cD=Object.getOwnPropertyDescriptors;var Hm=Object.getOwnPropertySymbols,lD=Object.getPrototypeOf,uD=Object.prototype.hasOwnProperty,dD=Object.prototype.propertyIsEnumerable,hD=Reflect.get;var Wm=(t,e,n)=>e in t?sD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D=(t,e)=>{for(var n in e||={})uD.call(e,n)&&Wm(t,n,e[n]);if(Hm)for(var n of Hm(e))dD.call(e,n)&&Wm(t,n,e[n]);return t},ie=(t,e)=>aD(t,cD(e));var Ir=(t,e,n)=>hD(lD(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var Fu=null;var ku=1,Lu=Symbol("SIGNAL");function se(t){let e=Fu;return Fu=t,e}function zm(){return Fu}var Vu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fD(t){if(!(Hu(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ku)){if(!t.producerMustRecompute(t)&&!ju(t)){t.dirty=!1,t.lastCleanEpoch=ku;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ku}}function Uu(t){return t&&(t.nextProducerIndex=0),se(t)}function Gm(t,e){if(se(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Hu(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)$u(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ju(t){Wu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(fD(n),r!==n.version))return!0}return!1}function Bu(t){if(Wu(t),Hu(t))for(let e=0;e<t.producerNode.length;e++)$u(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function $u(t,e){if(pD(t),t.liveConsumerNode.length===1&&gD(t))for(let r=0;r<t.producerNode.length;r++)$u(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Wu(i),i.producerIndexOfThis[r]=e}}function Hu(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Wu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function pD(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function gD(t){return t.producerNode!==void 0}function mD(){throw new Error}var vD=mD;function qm(t){vD=t}function B(t){return typeof t=="function"}function Ei(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ta=Ei(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Dr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var be=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(B(r))try{r()}catch(o){e=o instanceof Ta?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Km(o)}catch(s){e=e??[],s instanceof Ta?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ta(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Km(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Dr(n,e)}remove(e){let{_finalizers:n}=this;n&&Dr(n,e),e instanceof t&&e._removeParent(this)}};be.EMPTY=(()=>{let t=new be;return t.closed=!0,t})();var zu=be.EMPTY;function Aa(t){return t instanceof be||t&&"closed"in t&&B(t.remove)&&B(t.add)&&B(t.unsubscribe)}function Km(t){B(t)?t():t.unsubscribe()}var Lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bi={setTimeout(t,e,...n){let{delegate:r}=bi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=bi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ma(t){bi.setTimeout(()=>{let{onUnhandledError:e}=Lt;if(e)e(t);else throw t})}function Wo(){}var Ym=Gu("C",void 0,void 0);function Qm(t){return Gu("E",void 0,t)}function Zm(t){return Gu("N",t,void 0)}function Gu(t,e,n){return{kind:t,value:e,error:n}}var Sr=null;function wi(t){if(Lt.useDeprecatedSynchronousErrorHandling){let e=!Sr;if(e&&(Sr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Sr;if(Sr=null,n)throw r}}else t()}function Jm(t){Lt.useDeprecatedSynchronousErrorHandling&&Sr&&(Sr.errorThrown=!0,Sr.error=t)}var Tr=class extends be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Aa(e)&&e.add(this)):this.destination=ED}static create(e,n,r){return new Vn(e,n,r)}next(e){this.isStopped?Ku(Zm(e),this):this._next(e)}error(e){this.isStopped?Ku(Qm(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ku(Ym,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},_D=Function.prototype.bind;function qu(t,e){return _D.call(t,e)}var Yu=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){xa(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){xa(r)}else xa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){xa(n)}}},Vn=class extends Tr{constructor(e,n,r){super();let i;if(B(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Lt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qu(e.next,o),error:e.error&&qu(e.error,o),complete:e.complete&&qu(e.complete,o)}):i=e}this.destination=new Yu(i)}};function xa(t){Lt.useDeprecatedSynchronousErrorHandling?Jm(t):Ma(t)}function yD(t){throw t}function Ku(t,e){let{onStoppedNotification:n}=Lt;n&&bi.setTimeout(()=>n(t,e))}var ED={closed:!0,next:Wo,error:yD,complete:Wo};var Ci=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ht(t){return t}function Qu(...t){return Zu(t)}function Zu(t){return t.length===0?ht:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var G=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=wD(n)?n:new Vn(n,r,i);return wi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Xm(r),new r((i,o)=>{let s=new Vn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ci](){return this}pipe(...n){return Zu(n)(this)}toPromise(n){return n=Xm(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Xm(t){var e;return(e=t??Lt.Promise)!==null&&e!==void 0?e:Promise}function bD(t){return t&&B(t.next)&&B(t.error)&&B(t.complete)}function wD(t){return t&&t instanceof Tr||bD(t)&&Aa(t)}function Ju(t){return B(t?.lift)}function X(t){return e=>{if(Ju(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new Xu(t,e,n,r,i)}var Xu=class extends Tr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ii(){return X((t,e)=>{let n=null;t._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Di=class extends G{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ju(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new be;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=be.EMPTY)}return e}refCount(){return Ii()(this)}};var ev=Ei(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class t extends G{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Na(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ev}next(n){wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?zu:(this.currentObservers=null,o.push(n),new be(()=>{this.currentObservers=null,Dr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new G;return n.source=this,n}}return t.create=(e,n)=>new Na(e,n),t})(),Na=class extends je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:zu}};var We=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ed={now(){return(ed.delegate||Date).now()},delegate:void 0};var Ra=class extends be{constructor(e,n){super()}schedule(e,n=0){return this}};var zo={setInterval(t,e,...n){let{delegate:r}=zo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=zo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Si=class extends Ra{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return zo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&zo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Dr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ti=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ti.now=ed.now;var Ai=class extends Ti{constructor(e,n=Ti.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var td=new Ai(Si);var Oa=class extends Si{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Pa=class extends Ai{};var nd=new Pa(Oa);var ft=new G(t=>t.complete());function tv(t){return t&&B(t.schedule)}function nv(t){return t[t.length-1]}function ka(t){return B(nv(t))?t.pop():void 0}function Un(t){return tv(nv(t))?t.pop():void 0}function rd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iv(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function rv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ar(t){return this instanceof Ar?(this.v=t,this):new Ar(t)}function ov(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(_){return Promise.resolve(_).then(m,d)}}function a(m,_){r[m]&&(i[m]=function(C){return new Promise(function(E,S){o.push([m,C,E,S])>1||c(m,C)})},_&&(i[m]=_(i[m])))}function c(m,_){try{l(r[m](_))}catch(C){p(o[0][3],C)}}function l(m){m.value instanceof Ar?Promise.resolve(m.value.v).then(u,d):p(o[0][2],m)}function u(m){c("next",m)}function d(m){c("throw",m)}function p(m,_){m(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function sv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rv=="function"?rv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Fa=t=>t&&typeof t.length=="number"&&typeof t!="function";function La(t){return B(t?.then)}function Va(t){return B(t[Ci])}function Ua(t){return Symbol.asyncIterator&&B(t?.[Symbol.asyncIterator])}function ja(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function CD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ba=CD();function $a(t){return B(t?.[Ba])}function Ha(t){return ov(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ar(n.read());if(i)return yield Ar(void 0);yield yield Ar(r)}}finally{n.releaseLock()}})}function Wa(t){return B(t?.getReader)}function Te(t){if(t instanceof G)return t;if(t!=null){if(Va(t))return ID(t);if(Fa(t))return DD(t);if(La(t))return SD(t);if(Ua(t))return av(t);if($a(t))return TD(t);if(Wa(t))return AD(t)}throw ja(t)}function ID(t){return new G(e=>{let n=t[Ci]();if(B(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function DD(t){return new G(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function SD(t){return new G(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ma)})}function TD(t){return new G(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function av(t){return new G(e=>{MD(t,e).catch(n=>e.error(n))})}function AD(t){return av(Ha(t))}function MD(t,e){var n,r,i,o;return iv(this,void 0,void 0,function*(){try{for(n=sv(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function st(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function jn(t,e=0){return X((n,r)=>{n.subscribe(Y(r,i=>st(r,t,()=>r.next(i),e),()=>st(r,t,()=>r.complete(),e),i=>st(r,t,()=>r.error(i),e)))})}function Bn(t,e=0){return X((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function cv(t,e){return Te(t).pipe(Bn(e),jn(e))}function lv(t,e){return Te(t).pipe(Bn(e),jn(e))}function uv(t,e){return new G(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function dv(t,e){return new G(n=>{let r;return st(n,e,()=>{r=t[Ba](),st(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>B(r?.return)&&r.return()})}function za(t,e){if(!t)throw new Error("Iterable cannot be null");return new G(n=>{st(n,e,()=>{let r=t[Symbol.asyncIterator]();st(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function hv(t,e){return za(Ha(t),e)}function fv(t,e){if(t!=null){if(Va(t))return cv(t,e);if(Fa(t))return uv(t,e);if(La(t))return lv(t,e);if(Ua(t))return za(t,e);if($a(t))return dv(t,e);if(Wa(t))return hv(t,e)}throw ja(t)}function ye(t,e){return e?fv(t,e):Te(t)}function V(...t){let e=Un(t);return ye(t,e)}function Mi(t,e){let n=B(t)?t:()=>t,r=i=>i.error(n());return new G(e?i=>e.schedule(r,0,i):r)}function id(t){return!!t&&(t instanceof G||B(t.lift)&&B(t.subscribe))}var Vt=Ei(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new Vn({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new Vt)}});t.subscribe(o)})}function F(t,e){return X((n,r)=>{let i=0;n.subscribe(Y(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:xD}=Array;function ND(t,e){return xD(e)?t(...e):t(e)}function Ga(t){return F(e=>ND(t,e))}var{isArray:RD}=Array,{getPrototypeOf:OD,prototype:PD,keys:kD}=Object;function qa(t){if(t.length===1){let e=t[0];if(RD(e))return{args:e,keys:null};if(FD(e)){let n=kD(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function FD(t){return t&&typeof t=="object"&&OD(t)===PD}function Ka(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ya(...t){let e=Un(t),n=ka(t),{args:r,keys:i}=qa(t);if(r.length===0)return ye([],e);let o=new G(LD(r,e,i?s=>Ka(i,s):ht));return n?o.pipe(Ga(n)):o}function LD(t,e,n=ht){return r=>{pv(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)pv(e,()=>{let l=ye(t[c],e),u=!1;l.subscribe(Y(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function pv(t,e,n){t?st(n,t,e):e()}function gv(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,p=()=>{d&&!c.length&&!l&&e.complete()},m=C=>l<r?_(C):c.push(C),_=C=>{o&&e.next(C),l++;let E=!1;Te(n(C,u++)).subscribe(Y(e,S=>{i?.(S),o?m(S):e.next(S)},()=>{E=!0},void 0,()=>{if(E)try{for(l--;c.length&&l<r;){let S=c.shift();s?st(e,s,()=>_(S)):_(S)}p()}catch(S){e.error(S)}}))};return t.subscribe(Y(e,m,()=>{d=!0,p()})),()=>{a?.()}}function ke(t,e,n=1/0){return B(e)?ke((r,i)=>F((o,s)=>e(r,o,i,s))(Te(t(r,i))),n):(typeof e=="number"&&(n=e),X((r,i)=>gv(r,i,t,n)))}function od(t=1/0){return ke(ht,t)}function mv(){return od(1)}function xi(...t){return mv()(ye(t,Un(t)))}function Qa(t){return new G(e=>{Te(t()).subscribe(e)})}function sd(...t){let e=ka(t),{args:n,keys:r}=qa(t),i=new G(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Te(n[u]).subscribe(Y(o,p=>{d||(d=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Ka(r,a):a),o.complete())}))}});return e?i.pipe(Ga(e)):i}function pt(t,e){return X((n,r)=>{let i=0;n.subscribe(Y(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Yt(t){return X((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Y(n,void 0,void 0,s=>{o=Te(t(s,Yt(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function vv(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(Y(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function $n(t,e){return B(e)?ke(t,e,1):ke(t,1)}function Hn(t){return X((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function _n(t){return t<=0?()=>ft:X((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ad(t){return F(()=>t)}function Za(t=VD){return X((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function VD(){return new Vt}function Mr(t){return X((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Qt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):ht,_n(1),n?Hn(e):Za(()=>new Vt))}function Ni(t){return t<=0?()=>ft:X((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function cd(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):ht,Ni(1),n?Hn(e):Za(()=>new Vt))}function ld(t,e){return X(vv(t,e,arguments.length>=2,!0))}function ud(...t){let e=Un(t);return X((n,r)=>{(e?xi(t,n,e):xi(t,n)).subscribe(r)})}function tt(t,e){return X((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Y(r,c=>{i?.unsubscribe();let l=0,u=o++;Te(t(c,u)).subscribe(i=Y(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function dd(t){return X((e,n)=>{Te(t).subscribe(Y(n,()=>n.complete(),Wo)),!n.closed&&e.subscribe(n)})}function Ae(t,e,n){let r=B(t)||e||n?{next:t,error:e,complete:n}:t;return r?X((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Y(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ht}var i_="https://g.co/ng/security#xss",N=class extends Error{constructor(e,n){super(Mc(e,n)),this.code=e}};function Mc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function rs(t){return{toString:t}.toString()}var Ja="__parameters__";function UD(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function o_(t,e,n){return rs(()=>{let r=UD(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Ja)?c[Ja]:Object.defineProperty(c,Ja,{value:[]})[Ja];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var qo=globalThis;function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function jD(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function rt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(rt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function _v(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var BD=fe({__forward_ref__:fe});function Qn(t){return t.__forward_ref__=Qn,t.toString=function(){return rt(this())},t}function nt(t){return s_(t)?t():t}function s_(t){return typeof t=="function"&&t.hasOwnProperty(BD)&&t.__forward_ref__===Qn}function T(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Zn(t){return{providers:t.providers||[],imports:t.imports||[]}}function xc(t){return yv(t,c_)||yv(t,l_)}function a_(t){return xc(t)!==null}function yv(t,e){return t.hasOwnProperty(e)?t[e]:null}function $D(t){let e=t&&(t[c_]||t[l_]);return e||null}function Ev(t){return t&&(t.hasOwnProperty(bv)||t.hasOwnProperty(HD))?t[bv]:null}var c_=fe({\u0275prov:fe}),bv=fe({\u0275inj:fe}),l_=fe({ngInjectableDef:fe}),HD=fe({ngInjectorDef:fe}),A=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=T({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function u_(t){return t&&!!t.\u0275providers}var WD=fe({\u0275cmp:fe}),zD=fe({\u0275dir:fe}),GD=fe({\u0275pipe:fe}),qD=fe({\u0275mod:fe}),ac=fe({\u0275fac:fe}),Go=fe({__NG_ELEMENT_ID__:fe}),wv=fe({__NG_ENV_ID__:fe});function Li(t){return typeof t=="string"?t:t==null?"":String(t)}function KD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Li(t)}function YD(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new N(-200,t)}function hh(t,e){throw new N(-201,!1)}var H=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(H||{}),Sd;function d_(){return Sd}function wt(t){let e=Sd;return Sd=t,e}function h_(t,e,n){let r=xc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&H.Optional)return null;if(e!==void 0)return e;hh(t,"Injector")}var QD={},Ko=QD,Td="__NG_DI_FLAG__",cc="ngTempTokenPath",ZD="ngTokenPath",JD=/\n/gm,XD="\u0275",Cv="__source",ki;function eS(){return ki}function Wn(t){let e=ki;return ki=t,e}function tS(t,e=H.Default){if(ki===void 0)throw new N(-203,!1);return ki===null?h_(t,void 0,e):ki.get(t,e&H.Optional?null:void 0,e)}function x(t,e=H.Default){return(d_()||tS)(nt(t),e)}function w(t,e=H.Default){return x(t,Nc(e))}function Nc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ad(t){let e=[];for(let n=0;n<t.length;n++){let r=nt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new N(900,!1);let i,o=H.Default;for(let s=0;s<r.length;s++){let a=r[s],c=nS(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(x(i,o))}else e.push(x(r))}return e}function f_(t,e){return t[Td]=e,t.prototype[Td]=e,t}function nS(t){return t[Td]}function rS(t,e,n,r){let i=t[cc];throw e[Cv]&&i.unshift(e[Cv]),t.message=iS(`
`+t.message,i,n,r),t[ZD]=i,t[cc]=null,t}function iS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==XD?t.slice(2):t;let i=rt(e);if(Array.isArray(e))i=e.map(rt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):rt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(JD,`
  `)}`}var Ne=f_(o_("Optional"),8);var p_=f_(o_("SkipSelf"),4);function Vi(t,e){let n=t.hasOwnProperty(ac);return n?t[ac]:null}function fh(t,e){t.forEach(n=>Array.isArray(n)?fh(n,e):e(n))}function g_(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function lc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function oS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function sS(t,e,n){let r=is(t,e);return r>=0?t[r|1]=n:(r=~r,oS(t,r,e,n)),r}function hd(t,e){let n=is(t,e);if(n>=0)return t[n|1]}function is(t,e){return aS(t,e,1)}function aS(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ui={},Ct=[],ji=new A(""),m_=new A("",-1),v_=new A(""),uc=class{get(e,n=Ko){if(n===Ko){let r=new Error(`NullInjectorError: No provider for ${rt(e)}!`);throw r.name="NullInjectorError",r}return n}},__=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(__||{}),Xt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xt||{}),Bi=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Bi||{});function cS(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Md(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];lS(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function y_(t){return t===3||t===4||t===6}function lS(t){return t.charCodeAt(0)===64}function Yo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Iv(t,n,i,null,e[++r]):Iv(t,n,i,null,null))}}return t}function Iv(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var E_="ng-template";function uS(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&cS(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ph(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function ph(t){return t.type===4&&t.value!==E_}function dS(t,e,n){let r=t.type===4&&!n?E_:t.value;return e===r}function hS(t,e,n){let r=4,i=t.attrs,o=i!==null?gS(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ut(r)&&!Ut(c))return!1;if(s&&Ut(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!dS(t,c,n)||c===""&&e.length===1){if(Ut(r))return!1;s=!0}}else if(r&8){if(i===null||!uS(t,i,c,n)){if(Ut(r))return!1;s=!0}}else{let l=e[++a],u=fS(c,i,ph(t),n);if(u===-1){if(Ut(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Ut(r))return!1;s=!0}}}}return Ut(r)||s}function Ut(t){return(t&1)===0}function fS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mS(e,t)}function pS(t,e,n=!1){for(let r=0;r<e.length;r++)if(hS(t,e[r],n))return!0;return!1}function gS(t){for(let e=0;e<t.length;e++){let n=t[e];if(y_(n))return e}return t.length}function mS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Dv(t,e){return t?":not("+e.trim()+")":e}function vS(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ut(s)&&(e+=Dv(o,i),i=""),r=s,o=o||!Ut(r);n++}return i!==""&&(e+=Dv(o,i)),e}function _S(t){return t.map(vS).join(",")}function yS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Ut(i))break;i=o}r++}return{attrs:e,classes:n}}function z(t){return rs(()=>{let e=D_(t),n=ie(D({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===__.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xt.Emulated,styles:t.styles||Ct,_:null,schemas:t.schemas||null,tView:null,id:""});S_(n);let r=t.dependencies;return n.directiveDefs=Tv(r,!1),n.pipeDefs=Tv(r,!0),n.id=wS(n),n})}function ES(t){return Rr(t)||b_(t)}function bS(t){return t!==null}function Jn(t){return rs(()=>({type:t.type,bootstrap:t.bootstrap||Ct,declarations:t.declarations||Ct,imports:t.imports||Ct,exports:t.exports||Ct,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Sv(t,e){if(t==null)return Ui;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Bi.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Bi.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Fe(t){return rs(()=>{let e=D_(t);return S_(e),e})}function Rr(t){return t[WD]||null}function b_(t){return t[zD]||null}function w_(t){return t[GD]||null}function C_(t){let e=Rr(t)||b_(t)||w_(t);return e!==null?e.standalone:!1}function I_(t,e){let n=t[qD]||null;if(!n&&e===!0)throw new Error(`Type ${rt(t)} does not have '\u0275mod' property.`);return n}function D_(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ui,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ct,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Sv(t.inputs,e),outputs:Sv(t.outputs),debugInfo:null}}function S_(t){t.features?.forEach(e=>e(t))}function Tv(t,e){if(!t)return null;let n=e?w_:ES;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(bS)}function wS(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ct(t){return{\u0275providers:t}}function CS(...t){return{\u0275providers:T_(!0,t),\u0275fromNgModule:!0}}function T_(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return fh(e,s=>{let a=s;xd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&A_(i,o),n}function A_(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];gh(i,o=>{e(o,r)})}}function xd(t,e,n,r){if(t=nt(t),!t)return!1;let i=null,o=Ev(t),s=!o&&Rr(t);if(!o&&!s){let c=t.ngModule;if(o=Ev(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)xd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{fh(o.imports,u=>{xd(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&A_(l,e)}if(!a){let l=Vi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ct},i),e({provide:v_,useValue:i,multi:!0},i),e({provide:ji,useValue:()=>x(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;gh(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function gh(t,e){for(let n of t)u_(n)&&(n=n.\u0275providers),Array.isArray(n)?gh(n,e):e(n)}var IS=fe({provide:String,useValue:fe});function M_(t){return t!==null&&typeof t=="object"&&IS in t}function DS(t){return!!(t&&t.useExisting)}function SS(t){return!!(t&&t.useFactory)}function $i(t){return typeof t=="function"}function TS(t){return!!t.useClass}var Rc=new A(""),nc={},AS={},fd;function mh(){return fd===void 0&&(fd=new uc),fd}var at=class{},Qo=class extends at{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rd(e,s=>this.processProvider(s)),this.records.set(m_,Ri(void 0,this)),i.has("environment")&&this.records.set(at,Ri(void 0,this));let o=this.records.get(Rc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(v_,Ct,H.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Wn(this),r=wt(void 0),i;try{return e()}finally{Wn(n),wt(r)}}get(e,n=Ko,r=H.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(wv))return e[wv](this);r=Nc(r);let i,o=Wn(this),s=wt(void 0);try{if(!(r&H.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=OS(e)&&xc(e);l&&this.injectableDefInScope(l)?c=Ri(Nd(e),nc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&H.Self?mh():this.parent;return n=r&H.Optional&&n===Ko?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[cc]=a[cc]||[]).unshift(rt(e)),o)throw a;return rS(a,e,"R3InjectorError",this.source)}else throw a}finally{wt(s),Wn(o)}}resolveInjectorInitializers(){let e=se(null),n=Wn(this),r=wt(void 0),i;try{let o=this.get(ji,Ct,H.Self);for(let s of o)s()}finally{Wn(n),wt(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(rt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new N(205,!1)}processProvider(e){e=nt(e);let n=$i(e)?e:nt(e&&e.provide),r=xS(e);if(!$i(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ri(void 0,nc,!0),i.factory=()=>Ad(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=se(null);try{return n.value===nc&&(n.value=AS,n.value=n.factory()),typeof n.value=="object"&&n.value&&RS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=nt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Nd(t){let e=xc(t),n=e!==null?e.factory:Vi(t);if(n!==null)return n;if(t instanceof A)throw new N(204,!1);if(t instanceof Function)return MS(t);throw new N(204,!1)}function MS(t){if(t.length>0)throw new N(204,!1);let n=$D(t);return n!==null?()=>n.factory(t):()=>new t}function xS(t){if(M_(t))return Ri(void 0,t.useValue);{let e=x_(t);return Ri(e,nc)}}function x_(t,e,n){let r;if($i(t)){let i=nt(t);return Vi(i)||Nd(i)}else if(M_(t))r=()=>nt(t.useValue);else if(SS(t))r=()=>t.useFactory(...Ad(t.deps||[]));else if(DS(t))r=()=>x(nt(t.useExisting));else{let i=nt(t&&(t.useClass||t.provide));if(NS(t))r=()=>new i(...Ad(t.deps));else return Vi(i)||Nd(i)}return r}function Ri(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function NS(t){return!!t.deps}function RS(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function OS(t){return typeof t=="function"||typeof t=="object"&&t instanceof A}function Rd(t,e){for(let n of t)Array.isArray(n)?Rd(n,e):n&&u_(n)?Rd(n.\u0275providers,e):e(n)}function $t(t,e){t instanceof Qo&&t.assertNotDestroyed();let n,r=Wn(t),i=wt(void 0);try{return e()}finally{Wn(r),wt(i)}}function PS(){return d_()!==void 0||eS()!=null}function kS(t){return typeof t=="function"}var wn=0,Q=1,U=2,it=3,jt=4,Ht=5,dc=6,hc=7,Bt=8,Hi=9,en=10,xe=11,Zo=12,Av=13,Qi=14,tn=15,Wi=16,Oi=17,zi=18,Oc=19,N_=20,zn=21,pd=22,It=23,qn=25,R_=1;var Or=7,fc=8,pc=9,Dt=10,gc=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(gc||{});function Gn(t){return Array.isArray(t)&&typeof t[R_]=="object"}function Cn(t){return Array.isArray(t)&&t[R_]===!0}function O_(t){return(t.flags&4)!==0}function Pc(t){return t.componentOffset>-1}function vh(t){return(t.flags&1)===1}function Kn(t){return!!t.template}function Od(t){return(t[U]&512)!==0}var Pd=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function P_(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Xn(){return k_}function k_(t){return t.type.prototype.ngOnChanges&&(t.setInput=LS),FS}Xn.ngInherit=!0;function FS(){let t=L_(this),e=t?.current;if(e){let n=t.previous;if(n===Ui)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function LS(t,e,n,r,i){let o=this.declaredInputs[r],s=L_(t)||VS(t,{previous:Ui,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Pd(l&&l.currentValue,n,c===Ui),P_(t,e,i,n)}var F_="__ngSimpleChanges__";function L_(t){return t[F_]||null}function VS(t,e){return t[F_]=e}var Mv=null;var Zt=function(t,e,n){Mv?.(t,e,n)},US="svg",jS="math";function nn(t){for(;Array.isArray(t);)t=t[wn];return t}function V_(t,e){return nn(e[t])}function St(t,e){return nn(e[t.index])}function U_(t,e){return t.data[e]}function er(t,e){let n=e[t];return Gn(n)?n:n[wn]}function _h(t){return(t[U]&128)===128}function BS(t){return Cn(t[it])}function mc(t,e){return e==null?null:t[e]}function j_(t){t[Oi]=0}function B_(t){t[U]&1024||(t[U]|=1024,_h(t)&&kc(t))}function $S(t,e){for(;t>0;)e=e[Qi],t--;return e}function Jo(t){return!!(t[U]&9216||t[It]?.dirty)}function kd(t){t[en].changeDetectionScheduler?.notify(7),t[U]&64&&(t[U]|=1024),Jo(t)&&kc(t)}function kc(t){t[en].changeDetectionScheduler?.notify(0);let e=Pr(t);for(;e!==null&&!(e[U]&8192||(e[U]|=8192,!_h(e)));)e=Pr(e)}function $_(t,e){if((t[U]&256)===256)throw new N(911,!1);t[zn]===null&&(t[zn]=[]),t[zn].push(e)}function HS(t,e){if(t[zn]===null)return;let n=t[zn].indexOf(e);n!==-1&&t[zn].splice(n,1)}function Pr(t){let e=t[it];return Cn(e)?e[it]:e}var W={lFrame:J_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var H_=!1;function WS(){return W.lFrame.elementDepthCount}function zS(){W.lFrame.elementDepthCount++}function GS(){W.lFrame.elementDepthCount--}function W_(){return W.bindingsEnabled}function qS(){return W.skipHydrationRootTNode!==null}function KS(t){return W.skipHydrationRootTNode===t}function YS(){W.skipHydrationRootTNode=null}function le(){return W.lFrame.lView}function lt(){return W.lFrame.tView}function Ce(t){return W.lFrame.contextLView=t,t[Bt]}function Ie(t){return W.lFrame.contextLView=null,t}function ot(){let t=z_();for(;t!==null&&t.type===64;)t=t.parent;return t}function z_(){return W.lFrame.currentTNode}function QS(){let t=W.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function os(t,e){let n=W.lFrame;n.currentTNode=t,n.isParent=e}function G_(){return W.lFrame.isParent}function ZS(){W.lFrame.isParent=!1}function q_(){return H_}function xv(t){H_=t}function JS(){let t=W.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function XS(){return W.lFrame.bindingIndex}function eT(t){return W.lFrame.bindingIndex=t}function Fc(){return W.lFrame.bindingIndex++}function K_(t){let e=W.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function tT(){return W.lFrame.inI18n}function nT(t,e){let n=W.lFrame;n.bindingIndex=n.bindingRootIndex=t,Fd(e)}function rT(){return W.lFrame.currentDirectiveIndex}function Fd(t){W.lFrame.currentDirectiveIndex=t}function iT(t){let e=W.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Y_(t){W.lFrame.currentQueryIndex=t}function oT(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function Q_(t,e,n){if(n&H.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&H.Host);)if(i=oT(o),i===null||(o=o[Qi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=W.lFrame=Z_();return r.currentTNode=e,r.lView=t,!0}function yh(t){let e=Z_(),n=t[Q];W.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Z_(){let t=W.lFrame,e=t===null?null:t.child;return e===null?J_(t):e}function J_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function X_(){let t=W.lFrame;return W.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ey=X_;function Eh(){let t=X_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function sT(t){return(W.lFrame.contextLView=$S(t,W.lFrame.contextLView))[Bt]}function Br(){return W.lFrame.selectedIndex}function kr(t){W.lFrame.selectedIndex=t}function Lc(){let t=W.lFrame;return U_(t.tView,t.selectedIndex)}function aT(){return W.lFrame.currentNamespace}var ty=!0;function bh(){return ty}function wh(t){ty=t}function cT(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=k_(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Ch(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function rc(t,e,n){ny(t,e,3,n)}function ic(t,e,n,r){(t[U]&3)===n&&ny(t,e,n,r)}function gd(t,e){let n=t[U];(n&3)===e&&(n&=16383,n+=1,t[U]=n)}function ny(t,e,n,r){let i=r!==void 0?t[Oi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Oi]+=65536),(a<o||o==-1)&&(lT(t,n,e,c),t[Oi]=(t[Oi]&4294901760)+c+2),c++}function Nv(t,e){Zt(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),Zt(5,t,e)}}function lT(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[U]>>14<t[Oi]>>16&&(t[U]&3)===e&&(t[U]+=16384,Nv(a,o)):Nv(a,o)}var Fi=-1,Fr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function uT(t){return t instanceof Fr}function dT(t){return(t.flags&8)!==0}function hT(t){return(t.flags&16)!==0}var md={},Ld=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Nc(r);let i=this.injector.get(e,md,r);return i!==md||n===md?i:this.parentInjector.get(e,n,r)}};function ry(t){return t!==Fi}function vc(t){return t&32767}function fT(t){return t>>16}function _c(t,e){let n=fT(t),r=e;for(;n>0;)r=r[Qi],n--;return r}var Vd=!0;function Rv(t){let e=Vd;return Vd=t,e}var pT=256,iy=pT-1,oy=5,gT=0,Jt={};function mT(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Go)&&(r=n[Go]),r==null&&(r=n[Go]=gT++);let i=r&iy,o=1<<i;e.data[t+(i>>oy)]|=o}function yc(t,e){let n=sy(t,e);if(n!==-1)return n;let r=e[Q];r.firstCreatePass&&(t.injectorIndex=e.length,vd(r.data,t),vd(e,null),vd(r.blueprint,null));let i=Ih(t,e),o=t.injectorIndex;if(ry(i)){let s=vc(i),a=_c(i,e),c=a[Q].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function vd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sy(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ih(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=dy(i),r===null)return Fi;if(n++,i=i[Qi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Fi}function Ud(t,e,n){mT(t,e,n)}function vT(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(y_(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function ay(t,e,n){if(n&H.Optional||t!==void 0)return t;hh(e,"NodeInjector")}function cy(t,e,n,r){if(n&H.Optional&&r===void 0&&(r=null),!(n&(H.Self|H.Host))){let i=t[Hi],o=wt(void 0);try{return i?i.get(e,r,n&H.Optional):h_(e,r,n&H.Optional)}finally{wt(o)}}return ay(r,e,n)}function ly(t,e,n,r=H.Default,i){if(t!==null){if(e[U]&2048&&!(r&H.Self)){let s=wT(t,e,n,r,Jt);if(s!==Jt)return s}let o=uy(t,e,n,r,Jt);if(o!==Jt)return o}return cy(e,n,r,i)}function uy(t,e,n,r,i){let o=ET(n);if(typeof o=="function"){if(!Q_(e,t,r))return r&H.Host?ay(i,n,r):cy(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&H.Optional))hh(n);else return s}finally{ey()}}else if(typeof o=="number"){let s=null,a=sy(t,e),c=Fi,l=r&H.Host?e[tn][Ht]:null;for((a===-1||r&H.SkipSelf)&&(c=a===-1?Ih(t,e):e[a+8],c===Fi||!Pv(r,!1)?a=-1:(s=e[Q],a=vc(c),e=_c(c,e)));a!==-1;){let u=e[Q];if(Ov(o,a,u.data)){let d=_T(a,e,n,s,r,l);if(d!==Jt)return d}c=e[a+8],c!==Fi&&Pv(r,e[Q].data[a+8]===l)&&Ov(o,a,e)?(s=u,a=vc(c),e=_c(c,e)):a=-1}}return i}function _T(t,e,n,r,i,o){let s=e[Q],a=s.data[t+8],c=r==null?Pc(a)&&Vd:r!=s&&(a.type&3)!==0,l=i&H.Host&&o===a,u=yT(a,s,n,c,l);return u!==null?Gi(e,s,u,a):Jt}function yT(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,p=i?a+u:l;for(let m=d;m<p;m++){let _=s[m];if(m<c&&n===_||m>=c&&_.type===n)return m}if(i){let m=s[c];if(m&&Kn(m)&&m.type===n)return c}return null}function Gi(t,e,n,r){let i=t[n],o=e.data;if(uT(i)){let s=i;s.resolving&&YD(KD(o[n]));let a=Rv(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?wt(s.injectImpl):null,u=Q_(t,r,H.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&cT(n,o[n],e)}finally{l!==null&&wt(l),Rv(a),s.resolving=!1,ey()}}return i}function ET(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Go)?t[Go]:void 0;return typeof e=="number"?e>=0?e&iy:bT:e}function Ov(t,e,n){let r=1<<t;return!!(n[e+(t>>oy)]&r)}function Pv(t,e){return!(t&H.Self)&&!(t&H.Host&&e)}var Nr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ly(this._tNode,this._lView,e,Nc(r),n)}};function bT(){return new Nr(ot(),le())}function Zi(t){return rs(()=>{let e=t.prototype.constructor,n=e[ac]||jd(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ac]||jd(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function jd(t){return s_(t)?()=>{let e=jd(nt(t));return e&&e()}:Vi(t)}function wT(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[U]&2048&&!(s[U]&512);){let a=uy(o,s,n,r|H.Self,Jt);if(a!==Jt)return a;let c=o.parent;if(!c){let l=s[N_];if(l){let u=l.get(n,Jt,r);if(u!==Jt)return u}c=dy(s),s=s[Qi]}o=c}return i}function dy(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}function Dh(t){return vT(ot(),t)}function kv(t,e=null,n=null,r){let i=hy(t,e,n,r);return i.resolveInjectorInitializers(),i}function hy(t,e=null,n=null,r,i=new Set){let o=[n||Ct,CS(t)];return r=r||(typeof t=="object"?void 0:rt(t)),new Qo(o,e||mh(),r||null,i)}var xr=class xr{static create(e,n){if(Array.isArray(e))return kv({name:""},n,e,"");{let r=e.name??"";return kv({name:r},e.parent,e.providers,r)}}};xr.THROW_IF_NOT_FOUND=Ko,xr.NULL=new uc,xr.\u0275prov=T({token:xr,providedIn:"any",factory:()=>x(m_)}),xr.__NG_ELEMENT_ID__=-1;var ze=xr;var CT=new A("");CT.__NG_ELEMENT_ID__=t=>{let e=ot();if(e===null)throw new N(204,!1);if(e.type&2)return e.value;if(t&H.Optional)return null;throw new N(204,!1)};var IT="ngOriginalError";function _d(t){return t[IT]}var yn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&_d(e);for(;n&&_d(n);)n=_d(n);return n||null}},fy=new A("",{providedIn:"root",factory:()=>w(yn).handleError.bind(void 0)}),py=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=DT,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Bd=class extends py{constructor(e){super(),this._lView=e}onDestroy(e){return $_(this._lView,e),()=>HS(this._lView,e)}};function DT(){return new Bd(le())}function ST(){return Vc(ot(),le())}function Vc(t,e){return new rn(St(t,e))}var rn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=ST;let t=e;return t})();var tr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new We(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=T({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var $d=class extends je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,PS()&&(this.destroyRef=w(py,{optional:!0})??void 0,this.pendingTasks=w(tr,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof be&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Me=$d;function gy(t){return(t.flags&128)===128}var my=new Map,TT=0;function AT(){return TT++}function MT(t){my.set(t[Oc],t)}function xT(t){my.delete(t[Oc])}var Fv="__ngContext__";function Lr(t,e){Gn(e)?(t[Fv]=e[Oc],MT(e)):t[Fv]=e}function vy(t){return yy(t[Zo])}function _y(t){return yy(t[jt])}function yy(t){for(;t!==null&&!Cn(t);)t=t[jt];return t}var Hd;function Ey(t){Hd=t}function NT(){if(Hd!==void 0)return Hd;if(typeof document<"u")return document;throw new N(210,!1)}var Sh=new A("",{providedIn:"root",factory:()=>RT}),RT="ng",Th=new A(""),Tt=new A("",{providedIn:"platform",factory:()=>"unknown"});var Ah=new A("",{providedIn:"root",factory:()=>NT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var OT="h",PT="b";var kT=()=>null;function Mh(t,e,n=!1){return kT(t,e,n)}var by=!1,FT=new A("",{providedIn:"root",factory:()=>by});var Xa;function LT(){if(Xa===void 0&&(Xa=null,qo.trustedTypes))try{Xa=qo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Xa}function Lv(t){return LT()?.createScriptURL(t)||t}var Ec=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${i_})`}};function ss(t){return t instanceof Ec?t.changingThisBreaksApplicationSecurity:t}function xh(t,e){let n=VT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${i_})`)}return n===e}function VT(t){return t instanceof Ec&&t.getTypeName()||null}var UT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wy(t){return t=String(t),t.match(UT)?t:"unsafe:"+t}var Uc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Uc||{});function At(t){let e=Iy();return e?e.sanitize(Uc.URL,t)||"":xh(t,"URL")?ss(t):wy(Li(t))}function jT(t){let e=Iy();if(e)return Lv(e.sanitize(Uc.RESOURCE_URL,t)||"");if(xh(t,"ResourceURL"))return Lv(ss(t));throw new N(904,!1)}function BT(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?jT:At}function Cy(t,e,n){return BT(e,n)(t)}function Iy(){let t=le();return t&&t[en].sanitizer}function Dy(t){return t.ownerDocument.defaultView}function Sy(t){return t instanceof Function?t():t}var En=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(En||{}),$T;function Nh(t,e){return $T(t,e)}function Pi(t,e,n,r,i){if(r!=null){let o,s=!1;Cn(r)?o=r:Gn(r)&&(s=!0,r=r[wn]);let a=nn(r);t===0&&n!==null?i==null?Ny(e,n,a):bc(e,n,a,i||null,!0):t===1&&n!==null?bc(e,n,a,i||null,!0):t===2?iA(e,a,s):t===3&&e.destroyNode(a),o!=null&&sA(e,t,o,n,i)}}function HT(t,e){return t.createText(e)}function WT(t,e,n){t.setValue(e,n)}function Ty(t,e,n){return t.createElement(e,n)}function zT(t,e){Ay(t,e),e[wn]=null,e[Ht]=null}function GT(t,e,n,r,i,o){r[wn]=i,r[Ht]=e,jc(t,r,n,1,i,o)}function Ay(t,e){e[en].changeDetectionScheduler?.notify(8),jc(t,e,e[xe],2,null,null)}function qT(t){let e=t[Zo];if(!e)return yd(t[Q],t);for(;e;){let n=null;if(Gn(e))n=e[Zo];else{let r=e[Dt];r&&(n=r)}if(!n){for(;e&&!e[jt]&&e!==t;)Gn(e)&&yd(e[Q],e),e=e[it];e===null&&(e=t),Gn(e)&&yd(e[Q],e),n=e&&e[jt]}e=n}}function KT(t,e,n,r){let i=Dt+r,o=n.length;r>0&&(n[i-1][jt]=e),r<o-Dt?(e[jt]=n[i],g_(n,Dt+r,e)):(n.push(e),e[jt]=null),e[it]=n;let s=e[Wi];s!==null&&n!==s&&My(s,e);let a=e[zi];a!==null&&a.insertView(t),kd(e),e[U]|=128}function My(t,e){let n=t[pc],r=e[it];if(Gn(r))t[U]|=gc.HasTransplantedViews;else{let i=r[it][tn];e[tn]!==i&&(t[U]|=gc.HasTransplantedViews)}n===null?t[pc]=[e]:n.push(e)}function Rh(t,e){let n=t[pc],r=n.indexOf(e);n.splice(r,1)}function Wd(t,e){if(t.length<=Dt)return;let n=Dt+e,r=t[n];if(r){let i=r[Wi];i!==null&&i!==t&&Rh(i,r),e>0&&(t[n-1][jt]=r[jt]);let o=lc(t,Dt+e);zT(r[Q],r);let s=o[zi];s!==null&&s.detachView(o[Q]),r[it]=null,r[jt]=null,r[U]&=-129}return r}function xy(t,e){if(!(e[U]&256)){let n=e[xe];n.destroyNode&&jc(t,e,n,3,null,null),qT(e)}}function yd(t,e){if(e[U]&256)return;let n=se(null);try{e[U]&=-129,e[U]|=256,e[It]&&Bu(e[It]),QT(t,e),YT(t,e),e[Q].type===1&&e[xe].destroy();let r=e[Wi];if(r!==null&&Cn(e[it])){r!==e[it]&&Rh(r,e);let i=e[zi];i!==null&&i.detachView(t)}xT(e)}finally{se(n)}}function YT(t,e){let n=t.cleanup,r=e[hc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[hc]=null);let i=e[zn];if(i!==null){e[zn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function QT(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Fr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Zt(4,a,c);try{c.call(a)}finally{Zt(5,a,c)}}else{Zt(4,i,o);try{o.call(i)}finally{Zt(5,i,o)}}}}}function ZT(t,e,n){return JT(t,e.parent,n)}function JT(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[wn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Xt.None||o===Xt.Emulated)return null}return St(r,n)}}function bc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Ny(t,e,n){t.appendChild(e,n)}function Vv(t,e,n,r,i){r!==null?bc(t,e,n,r,i):Ny(t,e,n)}function XT(t,e,n,r){t.removeChild(e,n,r)}function Oh(t,e){return t.parentNode(e)}function eA(t,e){return t.nextSibling(e)}function tA(t,e,n){return rA(t,e,n)}function nA(t,e,n){return t.type&40?St(t,n):null}var rA=nA,Uv;function Ph(t,e,n,r){let i=ZT(t,r,e),o=e[xe],s=r.parent||e[Ht],a=tA(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Vv(o,i,n[c],a,!1);else Vv(o,i,n,a,!1);Uv!==void 0&&Uv(o,r,e,n,i)}function oc(t,e){if(e!==null){let n=e.type;if(n&3)return St(e,t);if(n&4)return zd(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return oc(t,r);{let i=t[e.index];return Cn(i)?zd(-1,i):nn(i)}}else{if(n&32)return Nh(e,t)()||nn(t[e.index]);{let r=Ry(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Pr(t[tn]);return oc(i,r)}else return oc(t,e.next)}}}return null}function Ry(t,e){if(e!==null){let r=t[tn][Ht],i=e.projection;return r.projection[i]}return null}function zd(t,e){let n=Dt+t+1;if(n<e.length){let r=e[n],i=r[Q].firstChild;if(i!==null)return oc(r,i)}return e[Or]}function iA(t,e,n){let r=Oh(t,e);r&&XT(t,r,e,n)}function kh(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Lr(nn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)kh(t,e,n.child,r,i,o,!1),Pi(e,t,i,a,o);else if(c&32){let l=Nh(n,r),u;for(;u=l();)Pi(e,t,i,u,o);Pi(e,t,i,a,o)}else c&16?oA(t,e,r,n,i,o):Pi(e,t,i,a,o);n=s?n.projectionNext:n.next}}function jc(t,e,n,r,i,o){kh(n,r,t.firstChild,e,i,o,!1)}function oA(t,e,n,r,i,o){let s=n[tn],c=s[Ht].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Pi(e,t,i,u,o)}else{let l=c,u=s[it];gy(r)&&(l.flags|=128),kh(t,e,l,u,i,o,!0)}}function sA(t,e,n,r,i){let o=n[Or],s=nn(n);o!==s&&Pi(e,t,r,o,i);for(let a=Dt;a<n.length;a++){let c=n[a];jc(c[Q],c,t,e,r,o)}}function aA(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:En.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=En.Important),t.setStyle(n,r,i,o))}}function cA(t,e,n){t.setAttribute(e,"style",n)}function Oy(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Py(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Md(t,e,r),i!==null&&Oy(t,e,i),o!==null&&cA(t,e,o)}var on={};function y(t=1){ky(lt(),le(),Br()+t,!1)}function ky(t,e,n,r){if(!r)if((e[U]&3)===3){let o=t.preOrderCheckHooks;o!==null&&rc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&ic(e,o,0,n)}kr(n)}function b(t,e=H.Default){let n=le();if(n===null)return x(t,e);let r=ot();return ly(r,n,nt(t),e)}function Fy(t,e,n,r,i,o){let s=se(null);try{let a=null;i&Bi.SignalBased&&(a=e[r][Lu]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Bi.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):P_(e,a,r,o)}finally{se(s)}}function lA(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)kr(~i);else{let o=i,s=n[++r],a=n[++r];nT(s,o);let c=e[o];a(2,c)}}}finally{kr(-1)}}function Bc(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[wn]=i,d[U]=r|4|128|8|64,(l!==null||t&&t[U]&2048)&&(d[U]|=2048),j_(d),d[it]=d[Qi]=t,d[Bt]=n,d[en]=s||t&&t[en],d[xe]=a||t&&t[xe],d[Hi]=c||t&&t[Hi]||null,d[Ht]=o,d[Oc]=AT(),d[dc]=u,d[N_]=l,d[tn]=e.type==2?t[tn]:d,d}function $c(t,e,n,r,i){let o=t.data[e];if(o===null)o=uA(t,e,n,r,i),tT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=QS();o.injectorIndex=s===null?-1:s.injectorIndex}return os(o,!0),o}function uA(t,e,n,r,i){let o=z_(),s=G_(),a=s?o:o&&o.parent,c=t.data[e]=gA(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Ly(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vy(t,e,n,r,i){let o=Br(),s=r&2;try{kr(-1),s&&e.length>qn&&ky(t,e,qn,!1),Zt(s?2:0,i),n(r,i)}finally{kr(o),Zt(s?3:1,i)}}function Uy(t,e,n){if(O_(e)){let r=se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{se(r)}}}function jy(t,e,n){W_()&&(bA(t,e,n,St(n,e)),(n.flags&64)===64&&zy(t,e,n))}function By(t,e,n=St){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function $y(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Fh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Fh(t,e,n,r,i,o,s,a,c,l,u){let d=qn+r,p=d+i,m=dA(d,p),_=typeof l=="function"?l():l;return m[Q]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:u}}function dA(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:on);return n}function hA(t,e,n,r){let o=r.get(FT,by)||n===Xt.ShadowDom,s=t.selectRootElement(e,o);return fA(s),s}function fA(t){pA(t)}var pA=()=>null;function gA(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return qS()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function jv(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Bi.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?Bv(r,n,l,a,c):Bv(r,n,l,a)}return r}function Bv(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function mA(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],p=n?n.get(d):null,m=p?p.inputs:null,_=p?p.outputs:null;c=jv(0,d.inputs,u,c,m),l=jv(1,d.outputs,u,l,_);let C=c!==null&&s!==null&&!ph(e)?RA(c,u,s):null;a.push(C)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function vA(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Lh(t,e,n,r,i,o,s,a){let c=St(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Vh(t,n,u,r,i),Pc(e)&&_A(n,e.index)):e.type&3?(r=vA(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function _A(t,e){let n=er(e,t);n[U]&16||(n[U]|=64)}function Hy(t,e,n,r){if(W_()){let i=r===null?null:{"":-1},o=CA(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Wy(t,e,n,s,i,a),i&&IA(n,r,i)}n.mergedAttrs=Yo(n.mergedAttrs,n.attrs)}function Wy(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Ud(yc(n,e),t,r[l].type);SA(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Ly(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Yo(n.mergedAttrs,u.hostAttrs),TA(t,n,e,c,u),DA(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}mA(t,n,o)}function yA(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;EA(s)!=a&&s.push(a),s.push(n,r,o)}}function EA(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function bA(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Pc(n)&&AA(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||yc(n,e),Lr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Gi(e,t,a,n);if(Lr(l,e),s!==null&&NA(e,a-i,l,c,n,s),Kn(c)){let u=er(n.index,e);u[Bt]=Gi(e,t,a,n)}}}function zy(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=rT();try{kr(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Fd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&wA(c,l)}}finally{kr(-1),Fd(s)}}function wA(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function CA(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(pS(e,s.selectors,!1))if(r||(r=[]),Kn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Gd(t,e,c)}else r.unshift(s),Gd(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Gd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function IA(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new N(-301,!1);r.push(e[i],o)}}}function DA(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Kn(e)&&(n[""]=t)}}function SA(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function TA(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Vi(i.type,!0)),s=new Fr(o,Kn(i),b);t.blueprint[r]=s,n[r]=s,yA(t,e,r,Ly(t,n,i.hostVars,on),i)}function AA(t,e,n){let r=St(e,t),i=$y(n),o=t[en].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Hc(t,Bc(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function MA(t,e,n,r,i,o){let s=St(t,e);xA(e[xe],s,o,t.value,n,r,i)}function xA(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Li(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function NA(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Fy(r,n,c,l,u,d)}}function RA(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Gy(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function qy(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Y_(o),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function Hc(t,e){return t[Zo]?t[Av][jt]=e:t[Zo]=e,t[Av]=e,e}function qd(t,e,n){Y_(0);let r=se(null);try{e(t,n)}finally{se(r)}}function OA(t){return t[hc]??=[]}function PA(t){return t.cleanup??=[]}function Ky(t,e){let n=t[Hi],r=n?n.get(yn,null):null;r&&r.handleError(e)}function Vh(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];Fy(u,l,r,a,c,i)}}function Yy(t,e,n){let r=V_(e,t);WT(t[xe],r,n)}function kA(t,e){let n=er(e,t),r=n[Q];FA(r,n);let i=n[wn];i!==null&&n[dc]===null&&(n[dc]=Mh(i,n[Hi])),Uh(r,n,n[Bt])}function FA(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Uh(t,e,n){yh(e);try{let r=t.viewQuery;r!==null&&qd(1,r,n);let i=t.template;i!==null&&Vy(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[zi]?.finishViewCreation(t),t.staticContentQueries&&qy(t,e),t.staticViewQueries&&qd(2,t.viewQuery,n);let o=t.components;o!==null&&LA(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[U]&=-5,Eh()}}function LA(t,e){for(let n=0;n<e.length;n++)kA(t,e[n])}function VA(t,e,n,r){let i=se(null);try{let o=e.tView,a=t[U]&4096?4096:16,c=Bc(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Wi]=l;let u=t[zi];return u!==null&&(c[zi]=u.createEmbeddedView(o)),Uh(o,c,n),c}finally{se(i)}}function $v(t,e){return!e||e.firstChild===null||gy(t)}function UA(t,e,n,r=!0){let i=e[Q];if(KT(i,e,t,n),r){let s=zd(n,t),a=e[xe],c=Oh(a,t[Or]);c!==null&&GT(i,t[Ht],a,e,c,s)}let o=e[dc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function wc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(nn(o)),Cn(o)&&jA(o,r);let s=n.type;if(s&8)wc(t,e,n.child,r);else if(s&32){let a=Nh(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Ry(e,n);if(Array.isArray(a))r.push(...a);else{let c=Pr(e[tn]);wc(c[Q],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function jA(t,e){for(let n=Dt;n<t.length;n++){let r=t[n],i=r[Q].firstChild;i!==null&&wc(r[Q],r,i,e)}t[Or]!==t[wn]&&e.push(t[Or])}var Qy=[];function BA(t){return t[It]??$A(t)}function $A(t){let e=Qy.pop()??Object.create(WA);return e.lView=t,e}function HA(t){t.lView[It]!==t&&(t.lView=null,Qy.push(t))}var WA=ie(D({},Vu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{kc(t.lView)},consumerOnSignalRead(){this.lView[It]=this}});function zA(t){let e=t[It]??Object.create(GA);return e.lView=t,e}var GA=ie(D({},Vu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Pr(t.lView);for(;e&&!Zy(e[Q]);)e=Pr(e);e&&B_(e)},consumerOnSignalRead(){this.lView[It]=this}});function Zy(t){return t.type!==2}var qA=100;function Jy(t,e=!0,n=0){let r=t[en],i=r.rendererFactory,o=!1;o||i.begin?.();try{KA(t,n)}catch(s){throw e&&Ky(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function KA(t,e){let n=q_();try{xv(!0),Kd(t,e);let r=0;for(;Jo(t);){if(r===qA)throw new N(103,!1);r++,Kd(t,1)}}finally{xv(n)}}function YA(t,e,n,r){let i=e[U];if((i&256)===256)return;let o=!1,s=!1;!o&&e[en].inlineEffectRunner?.flush(),yh(e);let a=!0,c=null,l=null;o||(Zy(t)?(l=BA(e),c=Uu(l)):zm()===null?(a=!1,l=zA(e),c=Uu(l)):e[It]&&(Bu(e[It]),e[It]=null));try{j_(e),eT(t.bindingStartIndex),n!==null&&Vy(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let m=t.preOrderCheckHooks;m!==null&&rc(e,m,null)}else{let m=t.preOrderHooks;m!==null&&ic(e,m,0,null),gd(e,0)}if(s||QA(e),Xy(e,0),t.contentQueries!==null&&qy(t,e),!o)if(u){let m=t.contentCheckHooks;m!==null&&rc(e,m)}else{let m=t.contentHooks;m!==null&&ic(e,m,1),gd(e,1)}lA(t,e);let d=t.components;d!==null&&t0(e,d,0);let p=t.viewQuery;if(p!==null&&qd(2,p,r),!o)if(u){let m=t.viewCheckHooks;m!==null&&rc(e,m)}else{let m=t.viewHooks;m!==null&&ic(e,m,2),gd(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[pd]){for(let m of e[pd])m();e[pd]=null}o||(e[U]&=-73)}catch(u){throw o||kc(e),u}finally{l!==null&&(Gm(l,c),a&&HA(l)),Eh()}}function Xy(t,e){for(let n=vy(t);n!==null;n=_y(n))for(let r=Dt;r<n.length;r++){let i=n[r];e0(i,e)}}function QA(t){for(let e=vy(t);e!==null;e=_y(e)){if(!(e[U]&gc.HasTransplantedViews))continue;let n=e[pc];for(let r=0;r<n.length;r++){let i=n[r];B_(i)}}}function ZA(t,e,n){let r=er(e,t);e0(r,n)}function e0(t,e){_h(t)&&Kd(t,e)}function Kd(t,e){let r=t[Q],i=t[U],o=t[It],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ju(o)),s||=!1,o&&(o.dirty=!1),t[U]&=-9217,s)YA(r,t,r.template,t[Bt]);else if(i&8192){Xy(t,1);let a=r.components;a!==null&&t0(t,a,1)}}function t0(t,e,n){for(let r=0;r<e.length;r++)ZA(t,e[r],n)}function jh(t,e){let n=q_()?64:1088;for(t[en].changeDetectionScheduler?.notify(e);t;){t[U]|=n;let r=Pr(t);if(Od(t)&&!r)return t;t=r}return null}var Vr=class{get rootNodes(){let e=this._lView,n=e[Q];return wc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bt]}set context(e){this._lView[Bt]=e}get destroyed(){return(this._lView[U]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(Cn(e)){let n=e[fc],r=n?n.indexOf(this):-1;r>-1&&(Wd(e,r),lc(n,r))}this._attachedToViewContainer=!1}xy(this._lView[Q],this._lView)}onDestroy(e){$_(this._lView,e)}markForCheck(){jh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[U]&=-129}reattach(){kd(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,Jy(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Od(this._lView),n=this._lView[Wi];n!==null&&!e&&Rh(n,this._lView),Ay(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=e;let n=Od(this._lView),r=this._lView[Wi];r!==null&&!n&&My(r,this._lView),kd(this._lView)}},Wc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eM;let t=e;return t})(),JA=Wc,XA=class extends JA{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=VA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Vr(i)}};function eM(){return tM(ot(),le())}function tM(t,e){return t.type&4?new XA(e,t,Vc(t,e)):null}var Hz=new RegExp(`^(\\d+)*(${PT}|${OT})*(.*)`);var nM=()=>null;function Hv(t,e){return nM(t,e)}var Xo=class{},Bh=new A("",{providedIn:"root",factory:()=>!1});var n0=new A(""),Yd=class{},Cc=class{};function rM(t){let e=Error(`No component factory found for ${rt(t)}.`);return e[iM]=t,e}var iM="ngComponent";var Qd=class{resolveComponentFactory(e){throw rM(e)}},Yh=class Yh{};Yh.NULL=new Qd;var qi=Yh,Ki=class{},In=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>oM();let t=e;return t})();function oM(){let t=le(),e=ot(),n=er(e.index,t);return(Gn(n)?n:t)[xe]}var sM=(()=>{let e=class e{};e.\u0275prov=T({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var Wv=new Set;function zc(t){Wv.has(t)||(Wv.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function r0(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof qo.requestAnimationFrame=="function"&&qo.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function zv(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function Gv(...t){}var oe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Me(!1),this.onMicrotaskEmpty=new Me(!1),this.onStable=new Me(!1),this.onError=new Me(!1),typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,lM(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new N(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,aM,Gv,Gv);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},aM={};function $h(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cM(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{r0(()=>{t.callbackScheduled=!1,Zd(t),t.isCheckStableRunning=!0,$h(t),t.isCheckStableRunning=!1})}),Zd(t))}function lM(t){let e=()=>{cM(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(uM(a))return n.invokeTask(i,o,s,a);try{return qv(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Kv(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return qv(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!dM(a)&&e(),Kv(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Zd(t),$h(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Zd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Kv(t){t._nesting--,$h(t)}var Jd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Me,this.onMicrotaskEmpty=new Me,this.onStable=new Me,this.onError=new Me}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function uM(t){return i0(t,"__ignore_ng_zone__")}function dM(t){return i0(t,"__scheduler_tick__")}function i0(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var o0=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=T({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Xd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=_v(i,a);else if(o==2){let c=a,l=e[++s];r=_v(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ic=class extends qi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Rr(e);return new es(n,this.ngModule)}};function Yv(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function hM(t){let e=t.toLowerCase();return e==="svg"?US:e==="math"?jS:null}var es=class extends Cc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Yv(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Yv(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=_S(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=se(null);try{i=i||this.ngModule;let s=i instanceof at?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ld(e,s):e,c=a.get(Ki,null);if(c===null)throw new N(407,!1);let l=a.get(sM,null),u=a.get(o0,null),d=a.get(Xo,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},m=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",C=r?hA(m,r,this.componentDef.encapsulation,a):Ty(m,_,hM(_)),E=512;this.componentDef.signals?E|=4096:this.componentDef.onPush||(E|=16);let S=null;C!==null&&(S=Mh(C,a,!0));let K=Fh(0,null,null,1,0,null,null,null,null,null,null),L=Bc(null,K,null,E,null,null,p,m,a,null,S);yh(L);let P,Se;try{let he=this.componentDef,He,bt=null;he.findHostDirectiveDefs?(He=[],bt=new Map,he.findHostDirectiveDefs(he,He,bt),He.push(he)):He=[he];let Ho=fM(L,C),Pu=pM(Ho,C,he,He,L,p,m);Se=U_(K,qn),C&&vM(m,he,C,r),n!==void 0&&_M(Se,this.ngContentSelectors,n),P=mM(Pu,he,He,bt,L,[yM]),Uh(K,L,null)}finally{Eh()}return new eh(this.componentType,P,Vc(Se,L),L,Se)}finally{se(o)}}},eh=class extends Yd{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Vr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Vh(o[Q],o,i,e,n),this.previousInputValues.set(e,n);let s=er(this._tNode.index,o);jh(s,1)}}get injector(){return new Nr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function fM(t,e){let n=t[Q],r=qn;return t[r]=e,$c(n,r,2,"#host",null)}function pM(t,e,n,r,i,o,s){let a=i[Q];gM(r,t,e,s);let c=null;e!==null&&(c=Mh(e,i[Hi]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Bc(i,$y(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&Gd(a,t,r.length-1),Hc(i,d),i[t.index]=d}function gM(t,e,n,r){for(let i of t)e.mergedAttrs=Yo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Xd(e,e.mergedAttrs,!0),n!==null&&Py(r,n,e))}function mM(t,e,n,r,i,o){let s=ot(),a=i[Q],c=St(s,i);Wy(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,p=Gi(i,a,d,s);Lr(p,i)}zy(a,i,s),c&&Lr(c,i);let l=Gi(i,a,s.directiveStart+s.componentOffset,s);if(t[Bt]=i[Bt]=l,o!==null)for(let u of o)u(l,e);return Uy(a,s,i),l}function vM(t,e,n,r){if(r)Md(t,n,["ng-version","18.0.6"]);else{let{attrs:i,classes:o}=yS(e.selectors[0]);i&&Md(t,n,i),o&&o.length>0&&Oy(t,n,o.join(" "))}}function _M(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function yM(){let t=ot();Ch(le()[Q],t)}var Ji=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=EM;let t=e;return t})();function EM(){let t=ot();return wM(t,le())}var bM=Ji,s0=class extends bM{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vc(this._hostTNode,this._hostLView)}get injector(){return new Nr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ih(this._hostTNode,this._hostLView);if(ry(e)){let n=_c(e,this._hostLView),r=vc(e),i=n[Q].data[r+8];return new Nr(i,n)}else return new Nr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Qv(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Dt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Hv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,$v(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!kS(e),a;if(s)a=n;else{let _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}let c=s?e:new es(Rr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let C=(s?l:this.parentInjector).get(at,null);C&&(o=C)}let u=Rr(c.componentType??{}),d=Hv(this._lContainer,u?.id??null),p=d?.firstChild??null,m=c.create(l,i,p,o);return this.insertImpl(m.hostView,a,$v(this._hostTNode,d)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(BS(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[it],l=new s0(c,c[Ht],c[it]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return UA(s,i,o,r),e.attachToViewContainerRef(),g_(Ed(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Qv(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Wd(this._lContainer,n);r&&(lc(Ed(this._lContainer),n),xy(r[Q],r))}detach(e){let n=this._adjustIndex(e,-1),r=Wd(this._lContainer,n);return r&&lc(Ed(this._lContainer),n)!=null?new Vr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Qv(t){return t[fc]}function Ed(t){return t[fc]||(t[fc]=[])}function wM(t,e){let n,r=e[t.index];return Cn(r)?n=r:(n=Gy(r,e,null,t),e[t.index]=n,Hc(e,n)),IM(n,e,t,r),new s0(n,t,e)}function CM(t,e){let n=t[xe],r=n.createComment(""),i=St(e,t),o=Oh(n,i);return bc(n,o,r,eA(n,i),!1),r}var IM=TM,DM=()=>!1;function SM(t,e,n){return DM(t,e,n)}function TM(t,e,n,r){if(t[Or])return;let i;n.type&8?i=nn(r):i=CM(e,n),t[Or]=i}function AM(t){return typeof t=="function"&&t[Lu]!==void 0}function a0(t){return AM(t)&&typeof t.set=="function"}function MM(t){return Object.getPrototypeOf(t.prototype).constructor}function sn(t){let e=MM(t.type),n=!0,r=[t];for(;e;){let i;if(Kn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new N(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=ec(t.inputs),s.inputTransforms=ec(t.inputTransforms),s.declaredInputs=ec(t.declaredInputs),s.outputs=ec(t.outputs);let a=i.hostBindings;a&&PM(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&RM(t,c),l&&OM(t,l),xM(t,i),jD(t.outputs,i.outputs),Kn(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===sn&&(n=!1)}}e=Object.getPrototypeOf(e)}NM(r)}function xM(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function NM(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yo(i.hostAttrs,n=Yo(n,i.hostAttrs))}}function ec(t){return t===Ui?{}:t===Ct?[]:t}function RM(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function OM(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function PM(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Hh(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Yn=class{},ts=class{};var th=class extends Yn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ic(this);let i=I_(e);this._bootstrapComponents=Sy(i.bootstrap),this._r3Injector=hy(e,n,[{provide:Yn,useValue:this},{provide:qi,useValue:this.componentFactoryResolver},...r],rt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},nh=class extends ts{constructor(e){super(),this.moduleType=e}create(e){return new th(this.moduleType,e,[])}};var Dc=class extends Yn{constructor(e){super(),this.componentFactoryResolver=new Ic(this),this.instance=null;let n=new Qo([...e.providers,{provide:Yn,useValue:this},{provide:qi,useValue:this.componentFactoryResolver}],e.parent||mh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wh(t,e,n=null){return new Dc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function c0(t){return FM(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function kM(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function FM(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function LM(t,e,n){return t[e]=n}function VM(t,e){return t[e]}function Ur(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function UM(t,e,n,r){let i=Ur(t,e,n);return Ur(t,e+1,r)||i}function jM(t){return(t.flags&32)===32}function BM(t,e,n,r,i,o,s,a,c){let l=e.consts,u=$c(e,t,4,s||null,a||null);Hy(e,n,u,mc(l,c)),Ch(e,u);let d=u.tView=Fh(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function $M(t,e,n,r,i,o,s,a,c,l){let u=n+qn,d=e.firstCreatePass?BM(u,e,t,r,i,o,s,a,c):e.data[u];os(d,!1);let p=HM(e,t,d,n);bh()&&Ph(e,t,p,d),Lr(p,t);let m=Gy(p,t,p,d);return t[u]=m,Hc(t,m),SM(m,d,t),vh(d)&&jy(e,t,d),c!=null&&By(t,d,l),d}function q(t,e,n,r,i,o,s,a){let c=le(),l=lt(),u=mc(l.consts,o);return $M(c,l,t,e,n,r,i,u,s,a),q}var HM=WM;function WM(t,e,n,r){return wh(!0),e[xe].createComment("")}function as(t,e,n,r){let i=le(),o=Fc();if(Ur(i,o,e)){let s=lt(),a=Lc();MA(a,i,t,e,n,r)}return as}function l0(t,e,n,r){return Ur(t,Fc(),n)?e+Li(n)+r:on}function zM(t,e,n,r,i,o){let s=XS(),a=UM(t,s,n,i);return K_(2),a?e+Li(n)+r+Li(i)+o:on}function tc(t,e){return t<<17|e<<2}function jr(t){return t>>17&32767}function GM(t){return(t&2)==2}function qM(t,e){return t&131071|e<<17}function rh(t){return t|2}function Yi(t){return(t&131068)>>2}function bd(t,e){return t&-131069|e<<2}function KM(t){return(t&1)===1}function ih(t){return t|1}function YM(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=jr(s),c=Yi(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||is(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let p=jr(t[a+1]);t[r+1]=tc(p,a),p!==0&&(t[p+1]=bd(t[p+1],r)),t[a+1]=qM(t[a+1],r)}else t[r+1]=tc(a,0),a!==0&&(t[a+1]=bd(t[a+1],r)),a=r;else t[r+1]=tc(c,0),a===0?a=r:t[c+1]=bd(t[c+1],r),c=r;l&&(t[r+1]=rh(t[r+1])),Zv(t,u,r,!0),Zv(t,u,r,!1),QM(e,u,t,r,o),s=tc(a,c),o?e.classBindings=s:e.styleBindings=s}function QM(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&is(o,e)>=0&&(n[r+1]=ih(n[r+1]))}function Zv(t,e,n,r){let i=t[n+1],o=e===null,s=r?jr(i):Yi(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];ZM(c,e)&&(a=!0,t[s+1]=r?ih(l):rh(l)),s=r?jr(l):Yi(l)}a&&(t[n+1]=r?rh(i):ih(i))}function ZM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?is(t,e)>=0:!1}function M(t,e,n){let r=le(),i=Fc();if(Ur(r,i,e)){let o=lt(),s=Lc();Lh(o,s,r,t,e,r[xe],n,!1)}return M}function Jv(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Vh(t,n,o[s],s,r)}function $r(t,e,n){return u0(t,e,n,!1),$r}function nr(t,e){return u0(t,e,null,!0),nr}function u0(t,e,n,r){let i=le(),o=lt(),s=K_(2);if(o.firstUpdatePass&&XM(o,t,s,r),e!==on&&Ur(i,s,e)){let a=o.data[Br()];ix(o,a,i,i[xe],t,i[s+1]=ox(e,n),r,s)}}function JM(t,e){return e>=t.expandoStartIndex}function XM(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Br()],s=JM(t,n);sx(o,r)&&e===null&&!s&&(e=!1),e=ex(i,o,e,r),YM(i,o,e,n,s,r)}}function ex(t,e,n,r){let i=iT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=wd(null,t,e,n,r),n=ns(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=wd(i,t,e,n,r),o===null){let c=tx(t,e,r);c!==void 0&&Array.isArray(c)&&(c=wd(null,t,e,c[1],r),c=ns(c,e.attrs,r),nx(t,e,r,c))}else o=rx(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function tx(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Yi(r)!==0)return t[jr(r)]}function nx(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[jr(i)]=r}function rx(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ns(r,s,n)}return ns(r,e.attrs,n)}function wd(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ns(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ns(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),sS(t,s,n?!0:e[++o]))}return t===void 0?null:t}function ix(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=KM(l)?Xv(c,e,n,i,Yi(l),s):void 0;if(!Sc(u)){Sc(o)||GM(l)&&(o=Xv(c,null,n,i,a,s));let d=V_(Br(),n);aA(r,s,d,i,o)}}function Xv(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,p=n[i+1];p===on&&(p=d?Ct:void 0);let m=d?hd(p,r):u===r?p:void 0;if(l&&!Sc(m)&&(m=hd(c,r)),Sc(m)&&(a=m,s))return a;let _=t[i+1];i=s?jr(_):Yi(_)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=hd(c,r))}return a}function Sc(t){return t!==void 0}function ox(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=rt(ss(t)))),t}function sx(t,e){return(t.flags&(e?8:16))!==0}function ax(t,e,n,r,i,o){let s=e.consts,a=mc(s,i),c=$c(e,t,2,r,a);return Hy(e,n,c,mc(s,o)),c.attrs!==null&&Xd(c,c.attrs,!1),c.mergedAttrs!==null&&Xd(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function h(t,e,n,r){let i=le(),o=lt(),s=qn+t,a=i[xe],c=o.firstCreatePass?ax(s,o,i,e,n,r):o.data[s],l=cx(o,i,c,a,e,t);i[s]=l;let u=vh(c);return os(c,!0),Py(a,l,c),!jM(c)&&bh()&&Ph(o,i,l,c),WS()===0&&Lr(l,i),zS(),u&&(jy(o,i,c),Uy(o,c,i)),r!==null&&By(i,c),h}function f(){let t=ot();G_()?ZS():(t=t.parent,os(t,!1));let e=t;KS(e)&&YS(),GS();let n=lt();return n.firstCreatePass&&(Ch(n,t),O_(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&dT(e)&&Jv(n,e,le(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&hT(e)&&Jv(n,e,le(),e.stylesWithoutHost,!1),f}function R(t,e,n,r){return h(t,e,n,r),f(),R}var cx=(t,e,n,r,i,o)=>(wh(!0),Ty(r,i,aT()));function Le(){return le()}var Tc="en-US";var lx=Tc;function ux(t){typeof t=="string"&&(lx=t.toLowerCase().replace(/_/g,"-"))}var dx=(t,e,n)=>{};function O(t,e,n,r){let i=le(),o=lt(),s=ot();return d0(o,i,i[xe],s,t,e,r),O}function hx(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[hc],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function d0(t,e,n,r,i,o,s){let a=vh(r),l=t.firstCreatePass&&PA(t),u=e[Bt],d=OA(e),p=!0;if(r.type&3||s){let C=St(r,e),E=s?s(C):C,S=d.length,K=s?P=>s(nn(P[r.index])):r.index,L=null;if(!s&&a&&(L=hx(t,e,i,r.index)),L!==null){let P=L.__ngLastListenerFn__||L;P.__ngNextListenerFn__=o,L.__ngLastListenerFn__=o,p=!1}else{o=t_(r,e,u,o),dx(C,i,o);let P=n.listen(E,i,o);d.push(o,P),l&&l.push(i,K,S,S+1)}}else o=t_(r,e,u,o);let m=r.outputs,_;if(p&&m!==null&&(_=m[i])){let C=_.length;if(C)for(let E=0;E<C;E+=2){let S=_[E],K=_[E+1],Se=e[S][K].subscribe(o),he=d.length;d.push(o,Se),l&&l.push(i,r.index,he,-(he+1))}}}function e_(t,e,n,r){let i=se(null);try{return Zt(6,e,n),n(r)!==!1}catch(o){return Ky(t,o),!1}finally{Zt(7,e,n),se(i)}}function t_(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?er(t.index,e):e;jh(s,5);let a=e_(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=e_(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function k(t=1){return sT(t)}function zh(t,e,n){return h0(t,"",e,"",n),zh}function h0(t,e,n,r,i){let o=le(),s=l0(o,e,n,r);if(s!==on){let a=lt(),c=Lc();Lh(a,c,o,t,s,o[xe],i,!1)}return h0}function g(t,e=""){let n=le(),r=lt(),i=t+qn,o=r.firstCreatePass?$c(r,i,1,e,null):r.data[i],s=fx(r,n,o,e,t);n[i]=s,bh()&&Ph(r,n,s,o),os(o,!1)}var fx=(t,e,n,r,i)=>(wh(!0),HT(e[xe],r));function Dn(t){return Z("",t,""),Dn}function Z(t,e,n){let r=le(),i=l0(r,t,e,n);return i!==on&&Yy(r,Br(),i),Z}function rr(t,e,n,r,i){let o=le(),s=zM(o,t,e,n,r,i);return s!==on&&Yy(o,Br(),s),rr}function Re(t,e,n){a0(e)&&(e=e());let r=le(),i=Fc();if(Ur(r,i,e)){let o=lt(),s=Lc();Lh(o,s,r,t,e,r[xe],n,!1)}return Re}function Ve(t,e){let n=a0(t);return n&&t.set(e),n}function Oe(t,e){let n=le(),r=lt(),i=ot();return d0(r,n,n[xe],i,t,e),Oe}function px(t,e,n){let r=lt();if(r.firstCreatePass){let i=Kn(t);oh(n,r.data,r.blueprint,i,!0),oh(e,r.data,r.blueprint,i,!1)}}function oh(t,e,n,r,i){if(t=nt(t),Array.isArray(t))for(let o=0;o<t.length;o++)oh(t[o],e,n,r,i);else{let o=lt(),s=le(),a=ot(),c=$i(t)?t:nt(t.provide),l=x_(t),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if($i(t)||!t.multi){let m=new Fr(l,i,b),_=Id(c,e,i?u:u+p,d);_===-1?(Ud(yc(a,s),o,c),Cd(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[_]=m,s[_]=m)}else{let m=Id(c,e,u+p,d),_=Id(c,e,u,u+p),C=m>=0&&n[m],E=_>=0&&n[_];if(i&&!E||!i&&!C){Ud(yc(a,s),o,c);let S=vx(i?mx:gx,n.length,i,r,l);!i&&E&&(n[_].providerFactory=S),Cd(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(S),s.push(S)}else{let S=f0(n[i?_:m],l,!i&&r);Cd(o,t,m>-1?m:_,S)}!i&&r&&E&&n[_].componentProviders++}}}function Cd(t,e,n,r){let i=$i(e),o=TS(e);if(i||o){let c=(o?nt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function f0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Id(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function gx(t,e,n,r){return sh(this.multi,[])}function mx(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Gi(n,n[Q],this.providerFactory.index,r);o=a.slice(0,s),sh(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],sh(i,o);return o}function sh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function vx(t,e,n,r,i){let o=new Fr(t,n,b);return o.multi=[],o.index=e,o.componentProviders=0,f0(o,i,r&&!n),o}function Xi(t,e=[]){return n=>{n.providersResolver=(r,i)=>px(r,i?i(t):t,e)}}var _x=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=T_(!1,r.type),o=i.length>0?Wh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=T({token:e,providedIn:"environment",factory:()=>new e(x(at))});let t=e;return t})();function te(t){zc("NgStandalone"),t.getStandaloneInjector=e=>e.get(_x).getOrCreateStandaloneInjector(t)}function eo(t,e,n){let r=JS()+t,i=le();return i[r]===on?LM(i,r,n?e.call(n):e()):VM(i,r)}var bn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},p0=new bn("18.0.6");var Gc=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var g0=new A("");function Hr(t){return!!t&&typeof t.then=="function"}function m0(t){return!!t&&typeof t.subscribe=="function"}var v0=new A(""),_0=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=w(v0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Hr(s))r.push(s);else if(m0(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qc=new A("");function yx(){qm(()=>{throw new N(600,!1)})}function Ex(t){return t.isBoundToModule}var bx=10;function wx(t,e,n){try{let r=n();return Hr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Wr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=w(fy),this.afterRenderEffectManager=w(o0),this.zonelessEnabled=w(Bh),this.externalTestViews=new Set,this.beforeRender=new je,this.afterTick=new je,this.componentTypes=[],this.components=[],this.isStable=w(tr).hasPendingTasks.pipe(F(r=>!r)),this._injector=w(at)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Cc;if(!this._injector.get(_0).done){let m=!o&&C_(r),_=!1;throw new N(405,_)}let a;o?a=r:a=this._injector.get(qi).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Ex(a)?void 0:this._injector.get(Yn),l=i||a.selector,u=a.create(ze.NULL,[],l,c),d=u.location.nativeElement,p=u.injector.get(g0,null);return p?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Dd(this.components,u),p?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new N(101,!1);let i=se(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,se(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Ki,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<bx;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)Cx(c,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Jo(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>Jo(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Dd(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(qc,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Dd(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new N(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Dd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Cx(t,e,n,r){if(!n&&!Jo(t))return;Jy(t,e,n&&!r?0:1)}var ah=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Gh=(()=>{let e=class e{compileModuleSync(r){return new nh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=I_(r),s=Sy(o.declarations).reduce((a,c)=>{let l=Rr(c);return l&&a.push(new es(l)),a},[]);return new ah(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ix=(()=>{let e=class e{constructor(){this.zone=w(oe),this.changeDetectionScheduler=w(Xo),this.applicationRef=w(Wr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Dx=new A("",{factory:()=>!1});function y0({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new oe(b0()),[{provide:oe,useFactory:t},{provide:ji,multi:!0,useFactory:()=>{let n=w(Ix,{optional:!0});return()=>n.initialize()}},{provide:ji,multi:!0,useFactory:()=>{let n=w(Tx);return()=>{n.initialize()}}},{provide:fy,useFactory:Sx},e===!0?{provide:n0,useValue:!0}:[]]}function Sx(){let t=w(oe),e=w(yn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function E0(t){let e=t?.ignoreChangesOutsideZone,n=y0({ngZoneFactory:()=>{let r=b0(t);return r.shouldCoalesceEventChangeDetection&&zc("NgZone_CoalesceEvent"),new oe(r)},ignoreChangesOutsideZone:e});return ct([{provide:Dx,useValue:!0},{provide:Bh,useValue:!1},n])}function b0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Tx=(()=>{let e=class e{constructor(){this.subscription=new be,this.initialized=!1,this.zone=w(oe),this.pendingTasks=w(tr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{oe.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{oe.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ax=(()=>{let e=class e{constructor(){this.appRef=w(Wr),this.taskService=w(tr),this.ngZone=w(oe),this.zonelessEnabled=w(Bh),this.disableScheduling=w(n0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new be,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jd||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?zv:r0;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&oe.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Mx(){return typeof $localize<"u"&&$localize.locale||Tc}var qh=new A("",{providedIn:"root",factory:()=>w(qh,H.Optional|H.SkipSelf)||Mx()});var w0=new A("");var sc=null;function xx(t=[],e){return ze.create({name:e,providers:[{provide:Rc,useValue:"platform"},{provide:w0,useValue:new Set([()=>sc=null])},...t]})}function Nx(t=[]){if(sc)return sc;let e=xx(t);return sc=e,yx(),Rx(e),e}function Rx(t){t.get(Th,null)?.forEach(n=>n())}var zr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Ox;let t=e;return t})();function Ox(t){return Px(ot(),le(),(t&16)===16)}function Px(t,e,n){if(Pc(t)&&!n){let r=er(t.index,e);return new Vr(r,r)}else if(t.type&175){let r=e[tn];return new Vr(r,e)}return null}var ch=class{constructor(){}supports(e){return c0(e)}create(e){return new lh(e)}},kx=(t,e)=>e,lh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||kx}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<n_(r,i,o)?n:r,a=n_(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let p=0;p<l;p++){let m=p<o.length?o[p]:o[p]=0,_=m+p;u<=_&&_<l&&(o[p]=m+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!c0(e))throw new N(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,kM(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new uh(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ac),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ac),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},uh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},dh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ac=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new dh,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function n_(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function r_(){return new Kh([new ch])}var Kh=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||r_()),deps:[[e,new p_,new Ne]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new N(901,!1)}};e.\u0275prov=T({token:e,providedIn:"root",factory:r_});let t=e;return t})();function C0(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Nx(r),o=[y0({}),{provide:Xo,useExisting:Ax},...n||[]],a=new Dc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(oe);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(yn,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:m=>{l.handleError(m)}})});let d=()=>a.destroy(),p=i.get(w0);return p.add(d),a.onDestroy(()=>{u.unsubscribe(),p.delete(d)}),wx(l,c,()=>{let m=a.get(_0);return m.runInitializers(),m.donePromise.then(()=>{let _=a.get(qh,Tc);ux(_||Tc);let C=a.get(Wr);return e!==void 0&&C.bootstrap(e),C})})})}catch(e){return Promise.reject(e)}}var I0=new A("");function ir(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var x0=null;function Sn(){return x0}function N0(t){x0??=t}var Kc=class{};var Ge=new A(""),R0=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>w(Fx),providedIn:"platform"});let t=e;return t})();var Fx=(()=>{let e=class e extends R0{constructor(){super(),this._doc=w(Ge),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sn().getBaseHref(this._doc)}onPopState(r){let i=Sn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Sn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function O0(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function D0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Gr(t){return t&&t[0]!=="?"?"?"+t:t}var no=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>w(P0),providedIn:"root"});let t=e;return t})(),Lx=new A(""),P0=(()=>{let e=class e extends no{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??w(Ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return O0(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Gr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Gr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Gr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(x(R0),x(Lx,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var cs=(()=>{let e=class e{constructor(r){this._subject=new Me,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=jx(D0(S0(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Gr(i))}normalize(r){return e.stripTrailingSlash(Ux(this._basePath,S0(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Gr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Gr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Gr,e.joinWithSlash=O0,e.stripTrailingSlash=D0,e.\u0275fac=function(i){return new(i||e)(x(no))},e.\u0275prov=T({token:e,factory:()=>Vx(),providedIn:"root"});let t=e;return t})();function Vx(){return new cs(x(no))}function Ux(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function S0(t){return t.replace(/\/index.html$/,"")}function jx(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Yc(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Qh=/\s+/,T0=[],k0=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=T0,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Qh):T0}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Qh):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Qh).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(b(rn),b(In))},e.\u0275dir=Fe({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Zh=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Mt=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Zh(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),A0(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);A0(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(b(Ji),b(Wc),b(Kh))},e.\u0275dir=Fe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function A0(t,e){t.context.$implicit=e.item}var Qe=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Jh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){M0("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){M0("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(b(Ji),b(Wc))},e.\u0275dir=Fe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Jh=class{constructor(){this.$implicit=null,this.ngIf=null}};function M0(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${rt(e)}'.`)}var me=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Jn({type:e}),e.\u0275inj=Zn({});let t=e;return t})(),Xh="browser",Bx="server";function F0(t){return t===Xh}function Qc(t){return t===Bx}var to=class{};var us=class{},Jc=class{},Tn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var tf=class{encodeKey(e){return L0(e)}encodeValue(e){return L0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function $x(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var Hx=/%(\d[a-f0-9])/gi,Wx={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function L0(t){return encodeURIComponent(t).replace(Hx,(e,n)=>Wx[n]??e)}function Zc(t){return`${t}`}var sr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=$x(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Zc):[Zc(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Zc(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Zc(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var nf=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function zx(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function V0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function U0(t){return typeof Blob<"u"&&t instanceof Blob}function j0(t){return typeof FormData<"u"&&t instanceof FormData}function Gx(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ls=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(zx(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Tn,this.context??=new nf,!this.params)this.params=new sr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||V0(this.body)||U0(this.body)||j0(this.body)||Gx(this.body)?this.body:this.body instanceof sr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||j0(this.body)?null:U0(this.body)?this.body.type||null:V0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof sr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,m)=>p.set(m,e.setHeaders[m]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((p,m)=>p.set(m,e.setParams[m]),u)),new t(n,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},ar=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(ar||{}),ds=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Tn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Xc=class t extends ds{constructor(e={}){super(e),this.type=ar.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},hs=class t extends ds{constructor(e={}){super(e),this.type=ar.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},or=class extends ds{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},W0=200,qx=204;function ef(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var pe=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof ls)s=r;else{let l;o.headers instanceof Tn?l=o.headers:l=new Tn(o.headers);let u;o.params&&(o.params instanceof sr?u=o.params:u=new sr({fromObject:o.params})),s=new ls(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=V(s).pipe($n(l=>this.handler.handle(l)));if(r instanceof ls||o.observe==="events")return a;let c=a.pipe(pt(l=>l instanceof hs));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(F(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(F(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(F(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(F(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new sr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,ef(o,i))}post(r,i,o={}){return this.request("POST",r,ef(o,i))}put(r,i,o={}){return this.request("PUT",r,ef(o,i))}};e.\u0275fac=function(i){return new(i||e)(x(us))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Kx=/^\)\]\}',?\n/,Yx="X-Request-URL";function B0(t){if(t.url)return t.url;let e=Yx.toLocaleLowerCase();return t.headers.get(e)}var Qx=(()=>{let e=class e{constructor(){this.fetchImpl=w(rf,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=w(oe)}handle(r){return new G(i=>{let o=new AbortController;return this.doRequest(r,o.signal,i).then(of,s=>i.error(new or({error:s}))),()=>o.abort()})}doRequest(r,i,o){return v(this,null,function*(){let s=this.createRequestInit(r),a;try{let _=this.fetchImpl(r.urlWithParams,D({signal:i},s));Zx(_),o.next({type:ar.Sent}),a=yield _}catch(_){o.error(new or({error:_,status:_.status??0,statusText:_.statusText,url:r.urlWithParams,headers:_.headers}));return}let c=new Tn(a.headers),l=a.statusText,u=B0(a)??r.urlWithParams,d=a.status,p=null;if(r.reportProgress&&o.next(new Xc({headers:c,status:d,statusText:l,url:u})),a.body){let _=a.headers.get("content-length"),C=[],E=a.body.getReader(),S=0,K,L,P=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){let{done:he,value:He}=yield E.read();if(he)break;if(C.push(He),S+=He.length,r.reportProgress){L=r.responseType==="text"?(L??"")+(K??=new TextDecoder).decode(He,{stream:!0}):void 0;let bt=()=>o.next({type:ar.DownloadProgress,total:_?+_:void 0,loaded:S,partialText:L});P?P.run(bt):bt()}}}));let Se=this.concatChunks(C,S);try{let he=a.headers.get("Content-Type")??"";p=this.parseBody(r,Se,he)}catch(he){o.error(new or({error:he,headers:new Tn(a.headers),status:a.status,statusText:a.statusText,url:B0(a)??r.urlWithParams}));return}}d===0&&(d=p?W0:0),d>=200&&d<300?(o.next(new hs({body:p,headers:c,status:d,statusText:l,url:u})),o.complete()):o.error(new or({error:p,headers:c,status:d,statusText:l,url:u}))})}parseBody(r,i,o){switch(r.responseType){case"json":let s=new TextDecoder().decode(i).replace(Kx,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:o});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},o=r.withCredentials?"include":void 0;if(r.headers.forEach((s,a)=>i[s]=a.join(",")),i.Accept??="application/json, text/plain, */*",!i["Content-Type"]){let s=r.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:o}}concatChunks(r,i){let o=new Uint8Array(i),s=0;for(let a of r)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),rf=class{};function of(){}function Zx(t){t.then(of,of)}function Jx(t,e){return e(t)}function Xx(t,e,n){return(r,i)=>$t(n,()=>e(r,o=>t(o,i)))}var z0=new A(""),eN=new A(""),tN=new A("",{providedIn:"root",factory:()=>!0});var $0=(()=>{let e=class e extends us{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=w(tr),this.contributeToStability=w(tN)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(z0),...this.injector.get(eN,[])]));this.chain=i.reduceRight((o,s)=>Xx(o,s,this.injector),Jx)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(Mr(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(x(Jc),x(at))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();var nN=/^\)\]\}',?\n/;function rN(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var H0=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new N(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ye(i.\u0275loadImpl()):V(null)).pipe(tt(()=>new G(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((E,S)=>a.setRequestHeader(E,S.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let E=r.detectContentTypeHeader();E!==null&&a.setRequestHeader("Content-Type",E)}if(r.responseType){let E=r.responseType.toLowerCase();a.responseType=E!=="json"?E:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let E=a.statusText||"OK",S=new Tn(a.getAllResponseHeaders()),K=rN(a)||r.url;return l=new Xc({headers:S,status:a.status,statusText:E,url:K}),l},d=()=>{let{headers:E,status:S,statusText:K,url:L}=u(),P=null;S!==qx&&(P=typeof a.response>"u"?a.responseText:a.response),S===0&&(S=P?W0:0);let Se=S>=200&&S<300;if(r.responseType==="json"&&typeof P=="string"){let he=P;P=P.replace(nN,"");try{P=P!==""?JSON.parse(P):null}catch(He){P=he,Se&&(Se=!1,P={error:He,text:P})}}Se?(s.next(new hs({body:P,headers:E,status:S,statusText:K,url:L||void 0})),s.complete()):s.error(new or({error:P,headers:E,status:S,statusText:K,url:L||void 0}))},p=E=>{let{url:S}=u(),K=new or({error:E,status:a.status||0,statusText:a.statusText||"Unknown Error",url:S||void 0});s.error(K)},m=!1,_=E=>{m||(s.next(u()),m=!0);let S={type:ar.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(S.total=E.total),r.responseType==="text"&&a.responseText&&(S.partialText=a.responseText),s.next(S)},C=E=>{let S={type:ar.UploadProgress,loaded:E.loaded};E.lengthComputable&&(S.total=E.total),s.next(S)};return a.addEventListener("load",d),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),r.reportProgress&&(a.addEventListener("progress",_),c!==null&&a.upload&&a.upload.addEventListener("progress",C)),a.send(c),s.next({type:ar.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",d),a.removeEventListener("timeout",p),r.reportProgress&&(a.removeEventListener("progress",_),c!==null&&a.upload&&a.upload.removeEventListener("progress",C)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(x(to))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),G0=new A(""),iN="XSRF-TOKEN",oN=new A("",{providedIn:"root",factory:()=>iN}),sN="X-XSRF-TOKEN",aN=new A("",{providedIn:"root",factory:()=>sN}),el=class{},cN=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yc(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(x(Ge),x(Tt),x(oN))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function lN(t,e){let n=t.url.toLowerCase();if(!w(G0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=w(el).getToken(),i=w(aN);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function q0(...t){let e=[pe,H0,$0,{provide:us,useExisting:$0},{provide:Jc,useFactory:()=>w(Qx,{optional:!0})??w(H0)},{provide:z0,useValue:lN,multi:!0},{provide:G0,useValue:!0},{provide:el,useClass:cN}];for(let n of t)e.push(...n.\u0275providers);return ct(e)}var cf=class extends Kc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lf=class t extends cf{static makeCurrent(){N0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=uN();return n==null?null:dN(n)}resetBaseElement(){fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yc(document.cookie,e)}},fs=null;function uN(){return fs=fs||document.querySelector("base"),fs?fs.getAttribute("href"):null}function dN(t){return new URL(t,document.baseURI).pathname}var hN=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),tl=new A(""),Z0=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new N(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(x(tl),x(oe))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),ps=class{constructor(e){this._doc=e}},sf="ng-app-id",J0=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Qc(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${sf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(sf),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(sf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(x(Ge),x(Sh),x(Ah,8),x(Tt))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),af={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},df=/%COMP%/g,X0="%COMP%",fN=`_nghost-${X0}`,pN=`_ngcontent-${X0}`,gN=!0,mN=new A("",{providedIn:"root",factory:()=>gN});function vN(t){return pN.replace(df,t)}function _N(t){return fN.replace(df,t)}function eE(t,e){return e.map(n=>n.replace(df,t))}var K0=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Qc(c),this.defaultRenderer=new gs(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Xt.ShadowDom&&(i=ie(D({},i),{encapsulation:Xt.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof nl?o.applyToHost(r):o instanceof ms&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Xt.Emulated:s=new nl(l,u,i,this.appId,d,a,c,p);break;case Xt.ShadowDom:return new uf(l,u,r,i,a,c,this.nonce,p);default:s=new ms(l,u,i,d,a,c,p);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(x(Z0),x(J0),x(Sh),x(mN),x(Ge),x(Tt),x(oe),x(Ah))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),gs=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(af[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Y0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Y0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new N(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=af[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=af[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(En.DashCase|En.Important)?e.style.setProperty(n,r,i&En.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&En.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Sn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Y0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var uf=class extends gs{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=eE(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ms=class extends gs{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?eE(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},nl=class extends ms{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=vN(l),this.hostAttr=_N(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},yN=(()=>{let e=class e extends ps{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(x(Ge))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),EN=(()=>{let e=class e extends ps{constructor(r){super(r),this.delegate=w(I0,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(x(Ge))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Q0=["alt","control","meta","shift"],bN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},CN=(()=>{let e=class e extends ps{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Q0.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=bN[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Q0.forEach(a=>{if(a!==o){let c=wN[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(x(Ge))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function tE(t,e){return C0(D({rootComponent:t},IN(e)))}function IN(t){return{appProviders:[...MN,...t?.providers??[]],platformProviders:AN}}function DN(){lf.makeCurrent()}function SN(){return new yn}function TN(){return Ey(document),document}var AN=[{provide:Tt,useValue:Xh},{provide:Th,useValue:DN,multi:!0},{provide:Ge,useFactory:TN,deps:[]}];var MN=[{provide:Rc,useValue:"root"},{provide:yn,useFactory:SN,deps:[]},{provide:tl,useClass:yN,multi:!0,deps:[Ge,oe,Tt]},{provide:tl,useClass:CN,multi:!0,deps:[Ge]},{provide:tl,useClass:EN,multi:!0},K0,J0,Z0,{provide:Ki,useExisting:K0},{provide:to,useClass:hN,deps:[]},[]];var nE=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(x(Ge))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $="primary",Os=Symbol("RouteTitle"),mf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function co(t){return new mf(t)}function NN(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function RN(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!an(t[n],e[n]))return!1;return!0}function an(t,e){let n=t?vf(t):void 0,r=e?vf(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!uE(t[i],e[i]))return!1;return!0}function vf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function uE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function dE(t){return t.length>0?t[t.length-1]:null}function lr(t){return id(t)?t:Hr(t)?ye(Promise.resolve(t)):V(t)}var ON={exact:fE,subset:pE},hE={exact:PN,subset:kN,ignored:()=>!0};function rE(t,e,n){return ON[n.paths](t.root,e.root,n.matrixParams)&&hE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function PN(t,e){return an(t,e)}function fE(t,e,n){if(!Kr(t.segments,e.segments)||!ol(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!fE(t.children[r],e.children[r],n))return!1;return!0}function kN(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>uE(t[n],e[n]))}function pE(t,e,n){return gE(t,e,e.segments,n)}function gE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Kr(i,n)||e.hasChildren()||!ol(i,n,r))}else if(t.segments.length===n.length){if(!Kr(t.segments,n)||!ol(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!pE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Kr(t.segments,i)||!ol(t.segments,i,r)||!t.children[$]?!1:gE(t.children[$],e,o,r)}}function ol(t,e,n){return e.every((r,i)=>hE[n](t[i].parameters,r.parameters))}var cr=class{constructor(e=new ae([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=co(this.queryParams),this._queryParamMap}toString(){return VN.serialize(this)}},ae=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sl(this)}},qr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=co(this.parameters),this._parameterMap}toString(){return vE(this)}};function FN(t,e){return Kr(t,e)&&t.every((n,r)=>an(n.parameters,e[r].parameters))}function Kr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function LN(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===$&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==$&&(n=n.concat(e(i,r)))}),n}var Hf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>new Cs,providedIn:"root"});let t=e;return t})(),Cs=class{parse(e){let n=new yf(e);return new cr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${vs(e.root,!0)}`,r=BN(e.queryParams),i=typeof e.fragment=="string"?`#${UN(e.fragment)}`:"";return`${n}${r}${i}`}},VN=new Cs;function sl(t){return t.segments.map(e=>vE(e)).join("/")}function vs(t,e){if(!t.hasChildren())return sl(t);if(e){let n=t.children[$]?vs(t.children[$],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==$&&r.push(`${i}:${vs(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=LN(t,(r,i)=>i===$?[vs(t.children[$],!1)]:[`${i}:${vs(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[$]!=null?`${sl(t)}/${n[0]}`:`${sl(t)}/(${n.join("//")})`}}function mE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rl(t){return mE(t).replace(/%3B/gi,";")}function UN(t){return encodeURI(t)}function _f(t){return mE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function al(t){return decodeURIComponent(t)}function iE(t){return al(t.replace(/\+/g,"%20"))}function vE(t){return`${_f(t.path)}${jN(t.parameters)}`}function jN(t){return Object.entries(t).map(([e,n])=>`;${_f(e)}=${_f(n)}`).join("")}function BN(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${rl(n)}=${rl(i)}`).join("&"):`${rl(n)}=${rl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var $N=/^[^\/()?;#]+/;function hf(t){let e=t.match($N);return e?e[0]:""}var HN=/^[^\/()?;=#]+/;function WN(t){let e=t.match(HN);return e?e[0]:""}var zN=/^[^=?&#]+/;function GN(t){let e=t.match(zN);return e?e[0]:""}var qN=/^[^&#]+/;function KN(t){let e=t.match(qN);return e?e[0]:""}var yf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ae([],{}):new ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[$]=new ae(e,n)),r}parseSegment(){let e=hf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new N(4009,!1);return this.capture(e),new qr(al(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=WN(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=hf(this.remaining);i&&(r=i,this.capture(r))}e[al(n)]=al(r)}parseQueryParam(e){let n=GN(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=KN(this.remaining);s&&(r=s,this.capture(r))}let i=iE(n),o=iE(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new N(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=$);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[$]:new ae([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new N(4011,!1)}};function _E(t){return t.segments.length>0?new ae([],{[$]:t}):t}function yE(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=yE(i);if(r===$&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ae(t.segments,e);return YN(n)}function YN(t){if(t.numberOfChildren===1&&t.children[$]){let e=t.children[$];return new ae(t.segments.concat(e.segments),e.children)}return t}function Is(t){return t instanceof cr}function QN(t,e,n=null,r=null){let i=EE(t);return bE(i,e,n,r)}function EE(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new ae(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=_E(r);return e??i}function bE(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ff(i,i,i,n,r);let o=ZN(e);if(o.toRoot())return ff(i,i,new ae([],{}),n,r);let s=JN(o,i,t),a=s.processChildren?Es(s.segmentGroup,s.index,o.commands):CE(s.segmentGroup,s.index,o.commands);return ff(i,s.segmentGroup,a,n,r)}function cl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ds(t){return typeof t=="object"&&t!=null&&t.outlets}function ff(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=wE(t,e,n);let a=_E(yE(s));return new cr(a,o,i)}function wE(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=wE(o,e,n)}),new ae(t.segments,r)}var ll=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&cl(r[0]))throw new N(4003,!1);let i=r.find(Ds);if(i&&i!==dE(r))throw new N(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ZN(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ll(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ll(n,e,r)}var oo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function JN(t,e,n){if(t.isAbsolute)return new oo(e,!0,0);if(!n)return new oo(e,!1,NaN);if(n.parent===null)return new oo(n,!0,0);let r=cl(t.commands[0])?0:1,i=n.segments.length-1+r;return XN(n,i,t.numberOfDoubleDots)}function XN(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new N(4005,!1);i=r.segments.length}return new oo(r,!1,i-o)}function eR(t){return Ds(t[0])?t[0].outlets:{[$]:t}}function CE(t,e,n){if(t??=new ae([],{}),t.segments.length===0&&t.hasChildren())return Es(t,e,n);let r=tR(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ae(t.segments.slice(0,r.pathIndex),{});return o.children[$]=new ae(t.segments.slice(r.pathIndex),t.children),Es(o,0,i)}else return r.match&&i.length===0?new ae(t.segments,{}):r.match&&!t.hasChildren()?Ef(t,e,n):r.match?Es(t,0,i):Ef(t,e,n)}function Es(t,e,n){if(n.length===0)return new ae(t.segments,{});{let r=eR(n),i={};if(Object.keys(r).some(o=>o!==$)&&t.children[$]&&t.numberOfChildren===1&&t.children[$].segments.length===0){let o=Es(t.children[$],e,n);return new ae(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=CE(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ae(t.segments,i)}}function tR(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ds(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!sE(c,l,s))return o;r+=2}else{if(!sE(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ef(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ds(o)){let c=nR(o.outlets);return new ae(r,c)}if(i===0&&cl(n[0])){let c=t.segments[e];r.push(new qr(c.path,oE(n[0]))),i++;continue}let s=Ds(o)?o.outlets[$]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&cl(a)?(r.push(new qr(s,oE(a))),i+=2):(r.push(new qr(s,{})),i++)}return new ae(r,{})}function nR(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ef(new ae([],{}),0,r))}),e}function oE(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function sE(t,e,n){return t==n.path&&an(e,n.parameters)}var bs="imperative",qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qe||{}),Nt=class{constructor(e,n){this.id=e,this.url=n}},Ss=class extends Nt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cn=class extends Nt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(vt||{}),bf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(bf||{}),An=class extends Nt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yr=class extends Nt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},Ts=class extends Nt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ul=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wf=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cf=class extends Nt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},If=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Df=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sf=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Tf=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Af=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mf=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xf=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nf=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var As=class{},lo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function rR(t,e){return t.providers&&!t._injector&&(t._injector=Wh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Wt(t){return t.outlet||$}function iR(t,e){let n=t.filter(r=>Wt(r)===e);return n.push(...t.filter(r=>Wt(r)!==e)),n}function Ps(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Rf=class{get injector(){return Ps(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new vl(this.rootInjector),this.attachRef=null}},vl=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Rf(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(x(at))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Of(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Of(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Pf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Pf(e,this._root).map(n=>n.value)}};function Of(t,e){if(t===e.value)return e;for(let n of e.children){let r=Of(t,n);if(r)return r}return null}function Pf(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Pf(t,n);if(r.length)return r.unshift(e),r}return[]}var mt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function io(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var hl=class extends dl{constructor(e,n){super(e),this.snapshot=n,Wf(this,e)}toString(){return this.snapshot.toString()}};function IE(t){let e=oR(t),n=new We([new qr("",{})]),r=new We({}),i=new We({}),o=new We({}),s=new We(""),a=new Qr(n,r,o,s,i,$,t,e.root);return a.snapshot=e.root,new hl(new mt(a,[]),e)}function oR(t){let e={},n={},r={},i="",o=new so([],e,r,i,n,$,t,null,{});return new pl("",new mt(o,[]))}var Qr=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(F(l=>l[Os]))??V(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(F(e=>co(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(F(e=>co(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:D(D({},e.params),t.params),data:D(D({},e.data),t.data),resolve:D(D(D(D({},t.data),e.data),i?.data),t._resolvedData)}:r={params:D({},t.params),data:D({},t.data),resolve:D(D({},t.data),t._resolvedData??{})},i&&SE(i)&&(r.resolve[Os]=i.title),r}var so=class{get title(){return this.data?.[Os]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=co(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=co(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},pl=class extends dl{constructor(e,n){super(n),this.url=e,Wf(this,n)}toString(){return DE(this._root)}};function Wf(t,e){e.value._routerState=t,e.children.forEach(n=>Wf(t,n))}function DE(t){let e=t.children.length>0?` { ${t.children.map(DE).join(", ")} } `:"";return`${t.value}${e}`}function pf(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,an(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),an(e.params,n.params)||t.paramsSubject.next(n.params),RN(e.url,n.url)||t.urlSubject.next(n.url),an(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function kf(t,e){let n=an(t.params,e.params)&&FN(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||kf(t.parent,e.parent))}function SE(t){return typeof t.title=="string"||t.title===null}var zf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=$,this.activateEvents=new Me,this.deactivateEvents=new Me,this.attachEvents=new Me,this.detachEvents=new Me,this.parentContexts=w(vl),this.location=w(Ji),this.changeDetector=w(zr),this.inputBinder=w(Gf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new N(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new N(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new N(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new N(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Ff(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Fe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xn]});let t=e;return t})(),Ff=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Qr?this.route:e===vl?this.childContexts:this.parent.get(e,n)}},Gf=new A("");function sR(t,e,n){let r=Ms(t,e._root,n?n._root:void 0);return new hl(r,e)}function Ms(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=aR(t,e,n);return new mt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ms(t,a)),s}}let r=cR(e.value),i=e.children.map(o=>Ms(t,o));return new mt(r,i)}}function aR(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ms(t,r,i);return Ms(t,r)})}function cR(t){return new Qr(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var xs=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},TE="ngNavigationCancelingError";function gl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Is(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=AE(!1,vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function AE(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[TE]=!0,n.cancellationCode=e,n}function lR(t){return ME(t)&&Is(t.url)}function ME(t){return!!t&&t[TE]}var uR=(t,e,n,r)=>F(i=>(new Lf(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Lf=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),pf(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=io(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=io(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=io(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=io(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Nf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(pf(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),pf(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ml=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ao=class{constructor(e,n){this.component=e,this.route=n}};function dR(t,e,n){let r=t._root,i=e?e._root:null;return _s(r,i,n,[r.value])}function hR(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ho(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!a_(t)?t:e.get(t):r}function _s(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=io(e);return t.children.forEach(s=>{fR(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ws(a,n.getContext(s),i)),i}function fR(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=pR(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ml(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_s(t,e,a?a.children:null,r,i):_s(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ao(a.outlet.component,s))}else s&&ws(e,a,i),i.canActivateChecks.push(new ml(r)),o.component?_s(t,null,a?a.children:null,r,i):_s(t,null,n,r,i);return i}function pR(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Kr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Kr(t.url,e.url)||!an(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kf(t,e)||!an(t.queryParams,e.queryParams);case"paramsChange":default:return!kf(t,e)}}function ws(t,e,n){let r=io(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ws(s,e.children.getContext(o),n):ws(s,null,n):ws(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ao(e.outlet.component,i)):n.canDeactivateChecks.push(new ao(null,i)):n.canDeactivateChecks.push(new ao(null,i))}function ks(t){return typeof t=="function"}function gR(t){return typeof t=="boolean"}function mR(t){return t&&ks(t.canLoad)}function vR(t){return t&&ks(t.canActivate)}function _R(t){return t&&ks(t.canActivateChild)}function yR(t){return t&&ks(t.canDeactivate)}function ER(t){return t&&ks(t.canMatch)}function xE(t){return t instanceof Vt||t?.name==="EmptyError"}var il=Symbol("INITIAL_VALUE");function uo(){return tt(t=>Ya(t.map(e=>e.pipe(_n(1),ud(il)))).pipe(F(e=>{for(let n of e)if(n!==!0){if(n===il)return il;if(n===!1||bR(n))return n}return!0}),pt(e=>e!==il),_n(1)))}function bR(t){return Is(t)||t instanceof xs}function wR(t,e){return ke(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?V(ie(D({},n),{guardsResult:!0})):CR(s,r,i,t).pipe(ke(a=>a&&gR(a)?IR(r,o,t,e):V(a)),F(a=>ie(D({},n),{guardsResult:a})))})}function CR(t,e,n,r){return ye(t).pipe(ke(i=>MR(i.component,i.route,n,e,r)),Qt(i=>i!==!0,!0))}function IR(t,e,n,r){return ye(e).pipe($n(i=>xi(SR(i.route.parent,r),DR(i.route,r),AR(t,i.path,n),TR(t,i.route,n))),Qt(i=>i!==!0,!0))}function DR(t,e){return t!==null&&e&&e(new xf(t)),V(!0)}function SR(t,e){return t!==null&&e&&e(new Af(t)),V(!0)}function TR(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return V(!0);let i=r.map(o=>Qa(()=>{let s=Ps(e)??n,a=ho(o,s),c=vR(a)?a.canActivate(e,t):$t(s,()=>a(e,t));return lr(c).pipe(Qt())}));return V(i).pipe(uo())}function AR(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>hR(s)).filter(s=>s!==null).map(s=>Qa(()=>{let a=s.guards.map(c=>{let l=Ps(s.node)??n,u=ho(c,l),d=_R(u)?u.canActivateChild(r,t):$t(l,()=>u(r,t));return lr(d).pipe(Qt())});return V(a).pipe(uo())}));return V(o).pipe(uo())}function MR(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return V(!0);let s=o.map(a=>{let c=Ps(e)??i,l=ho(a,c),u=yR(l)?l.canDeactivate(t,e,n,r):$t(c,()=>l(t,e,n,r));return lr(u).pipe(Qt())});return V(s).pipe(uo())}function xR(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return V(!0);let o=i.map(s=>{let a=ho(s,t),c=mR(a)?a.canLoad(e,n):$t(t,()=>a(e,n));return lr(c)});return V(o).pipe(uo(),NE(r))}function NE(t){return Qu(Ae(e=>{if(typeof e!="boolean")throw gl(t,e)}),F(e=>e===!0))}function NR(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return V(!0);let o=i.map(s=>{let a=ho(s,t),c=ER(a)?a.canMatch(e,n):$t(t,()=>a(e,n));return lr(c)});return V(o).pipe(uo(),NE(r))}var Ns=class{constructor(e){this.segmentGroup=e||null}},Rs=class extends Error{constructor(e){super(),this.urlTree=e}};function ro(t){return Mi(new Ns(t))}function RR(t){return Mi(new N(4e3,!1))}function OR(t){return Mi(AE(!1,vt.GuardRejected))}var Vf=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return V(r);if(i.numberOfChildren>1||!i.children[$])return RR(`${e.redirectTo}`);i=i.children[$]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:p,params:m,data:_,title:C}=i,E=$t(o,()=>a({params:m,data:_,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:p,title:C}));if(E instanceof cr)throw new Rs(E);n=E}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Rs(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new cr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ae(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new N(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Uf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PR(t,e,n,r,i){let o=qf(t,e,n);return o.matched?(r=rR(e,r),NR(r,e,n,i).pipe(F(s=>s===!0?o:D({},Uf)))):V(o)}function qf(t,e,n){if(e.path==="**")return kR(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?D({},Uf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||NN)(n,t,e);if(!i)return D({},Uf);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?D(D({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function kR(t){return{matched:!0,parameters:t.length>0?dE(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function aE(t,e,n,r){return n.length>0&&VR(t,n,r)?{segmentGroup:new ae(e,LR(r,new ae(n,t.children))),slicedSegments:[]}:n.length===0&&UR(t,n,r)?{segmentGroup:new ae(t.segments,FR(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ae(t.segments,t.children),slicedSegments:n}}function FR(t,e,n,r){let i={};for(let o of n)if(_l(t,e,o)&&!r[Wt(o)]){let s=new ae([],{});i[Wt(o)]=s}return D(D({},r),i)}function LR(t,e){let n={};n[$]=e;for(let r of t)if(r.path===""&&Wt(r)!==$){let i=new ae([],{});n[Wt(r)]=i}return n}function VR(t,e,n){return n.some(r=>_l(t,e,r)&&Wt(r)!==$)}function UR(t,e,n){return n.some(r=>_l(t,e,r))}function _l(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function jR(t,e,n,r){return Wt(t)!==r&&(r===$||!_l(e,n,t))?!1:qf(e,t,n).matched}function BR(t,e,n){return e.length===0&&!t.children[n]}var jf=class{};function $R(t,e,n,r,i,o,s="emptyOnly"){return new Bf(t,e,n,r,i,s,o).recognize()}var HR=31,Bf=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Vf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new N(4002,`'${e.segmentGroup}'`)}recognize(){let e=aE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(F(({children:n,rootSnapshot:r})=>{let i=new mt(r,n),o=new pl("",i),s=QN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new so([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),$,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,$,n).pipe(F(r=>({children:r,rootSnapshot:n})),Yt(r=>{if(r instanceof Rs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ns?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(F(s=>s instanceof mt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ye(o).pipe($n(s=>{let a=r.children[s],c=iR(n,s);return this.processSegmentGroup(e,c,a,s,i)}),ld((s,a)=>(s.push(...a),s)),Hn(null),cd(),ke(s=>{if(s===null)return ro(r);let a=RE(s);return WR(a),V(a)}))}processSegment(e,n,r,i,o,s,a){return ye(n).pipe($n(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Yt(l=>{if(l instanceof Ns)return V(null);throw l}))),Qt(c=>!!c),Yt(c=>{if(xE(c))return BR(r,i,o)?V(new jf):ro(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return jR(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):ro(i):ro(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=qf(n,i,o);if(!c)return ro(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>HR&&(this.allowRedirects=!1));let m=new so(o,l,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,cE(i),Wt(i),i.component??i._loadedComponent??null,i,lE(i)),_=fl(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let C=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,m,e);return this.applyRedirects.lineralizeSegments(i,C).pipe(ke(E=>this.processSegment(e,r,n,E.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=PR(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(tt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(tt(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:p,remainingSegments:m}=c,_=new so(p,d,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,cE(r),Wt(r),r.component??r._loadedComponent??null,r,lE(r)),C=fl(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(C.params),_.data=Object.freeze(C.data);let{segmentGroup:E,slicedSegments:S}=aE(n,p,m,l);if(S.length===0&&E.hasChildren())return this.processChildren(u,l,E,_).pipe(F(L=>new mt(_,L)));if(l.length===0&&S.length===0)return V(new mt(_,[]));let K=Wt(r)===o;return this.processSegment(u,l,E,S,K?$:o,!0,_).pipe(F(L=>new mt(_,L instanceof mt?[L]:[])))}))):ro(n)))}getChildConfig(e,n,r){return n.children?V({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?V({routes:n._loadedRoutes,injector:n._loadedInjector}):xR(e,n,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,n).pipe(Ae(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):OR(n))):V({routes:[],injector:e})}};function WR(t){t.sort((e,n)=>e.value.outlet===$?-1:n.value.outlet===$?1:e.value.outlet.localeCompare(n.value.outlet))}function zR(t){let e=t.value.routeConfig;return e&&e.path===""}function RE(t){let e=[],n=new Set;for(let r of t){if(!zR(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=RE(r.children);e.push(new mt(r.value,i))}return e.filter(r=>!n.has(r))}function cE(t){return t.data||{}}function lE(t){return t.resolve||{}}function GR(t,e,n,r,i,o){return ke(s=>$R(t,e,n,r,s.extractedUrl,i,o).pipe(F(({state:a,tree:c})=>ie(D({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function qR(t,e){return ke(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return V(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of OE(c))s.add(l);let a=0;return ye(s).pipe($n(c=>o.has(c)?KR(c,r,t,e):(c.data=fl(c,c.parent,t).resolve,V(void 0))),Ae(()=>a++),Ni(1),ke(c=>a===s.size?V(n):ft))})}function OE(t){let e=t.children.map(n=>OE(n)).flat();return[t,...e]}function KR(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!SE(i)&&(o[Os]=i.title),YR(o,t,e,r).pipe(F(s=>(t._resolvedData=s,t.data=fl(t,t.parent,n).resolve,null)))}function YR(t,e,n,r){let i=vf(t);if(i.length===0)return V({});let o={};return ye(i).pipe(ke(s=>QR(t[s],e,n,r).pipe(Qt(),Ae(a=>{if(a instanceof xs)throw gl(new Cs,a);o[s]=a}))),Ni(1),ad(o),Yt(s=>xE(s)?ft:Mi(s)))}function QR(t,e,n,r){let i=Ps(e)??r,o=ho(t,i),s=o.resolve?o.resolve(e,n):$t(i,()=>o(e,n));return lr(s)}function gf(t){return tt(e=>{let n=t(e);return n?ye(n).pipe(F(()=>e)):V(e)})}var PE=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===$);return i}getResolvedTitleForRoute(r){return r.data[Os]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>w(ZR),providedIn:"root"});let t=e;return t})(),ZR=(()=>{let e=class e extends PE{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(x(nE))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kf=new A("",{providedIn:"root",factory:()=>({})}),JR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=z({type:e,selectors:[["ng-component"]],standalone:!0,features:[te],decls:1,vars:0,template:function(i,o){i&1&&R(0,"router-outlet")},dependencies:[zf],encapsulation:2});let t=e;return t})();function Yf(t){let e=t.children&&t.children.map(Yf),n=e?ie(D({},t),{children:e}):D({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==$&&(n.component=JR),n}var Qf=new A(""),XR=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=w(Gh)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return V(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=lr(r.loadComponent()).pipe(F(kE),Ae(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Mr(()=>{this.componentLoaders.delete(r)})),o=new Di(i,()=>new je).pipe(Ii());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return V({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=eO(i,this.compiler,r,this.onLoadEndListener).pipe(Mr(()=>{this.childrenLoaders.delete(i)})),a=new Di(s,()=>new je).pipe(Ii());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eO(t,e,n,r){return lr(t.loadChildren()).pipe(F(kE),ke(i=>i instanceof ts||Array.isArray(i)?V(i):ye(e.compileModuleAsync(i))),F(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Qf,[],{optional:!0,self:!0}).flat()),{routes:s.map(Yf),injector:o}}))}function tO(t){return t&&typeof t=="object"&&"default"in t}function kE(t){return tO(t)?t.default:t}var Zf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>w(nO),providedIn:"root"});let t=e;return t})(),nO=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rO=new A("");var iO=new A(""),oO=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new je,this.transitionAbortSubject=new je,this.configLoader=w(XR),this.environmentInjector=w(at),this.urlSerializer=w(Hf),this.rootContexts=w(vl),this.location=w(cs),this.inputBindingEnabled=w(Gf,{optional:!0})!==null,this.titleStrategy=w(PE),this.options=w(Kf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=w(Zf),this.createViewTransition=w(rO,{optional:!0}),this.navigationErrorHandler=w(iO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>V(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Sf(o)),i=o=>this.events.next(new Tf(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ie(D(D({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new We({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:bs,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(s=>s.id!==0),F(s=>ie(D({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),tt(s=>{let a=!1,c=!1;return V(s).pipe(tt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",vt.SupersededByNewNavigation),ft;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ie(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let p="";return this.events.next(new Yr(l.id,this.urlSerializer.serialize(l.rawUrl),p,bf.IgnoredSameUrlNavigation)),l.resolve(!1),ft}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return V(l).pipe(tt(p=>{let m=this.transitions?.getValue();return this.events.next(new Ss(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?ft:Promise.resolve(p)}),GR(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ae(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ie(D({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new ul(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:m,source:_,restoredState:C,extras:E}=l,S=new Ss(p,this.urlSerializer.serialize(m),_,C);this.events.next(S);let K=IE(this.rootComponentType).snapshot;return this.currentTransition=s=ie(D({},l),{targetSnapshot:K,urlAfterRedirects:m,extras:ie(D({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,V(s)}else{let p="";return this.events.next(new Yr(l.id,this.urlSerializer.serialize(l.extractedUrl),p,bf.IgnoredByUrlHandlingStrategy)),l.resolve(!1),ft}}),Ae(l=>{let u=new wf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),F(l=>(this.currentTransition=s=ie(D({},l),{guards:dR(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),wR(this.environmentInjector,l=>this.events.next(l)),Ae(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw gl(this.urlSerializer,l.guardsResult);let u=new Cf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),pt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",vt.GuardRejected),!1)),gf(l=>{if(l.guards.canActivateChecks.length)return V(l).pipe(Ae(u=>{let d=new If(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),tt(u=>{let d=!1;return V(u).pipe(qR(this.paramsInheritanceStrategy,this.environmentInjector),Ae({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",vt.NoDataFromResolver)}}))}),Ae(u=>{let d=new Df(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),gf(l=>{let u=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ae(m=>{d.component=m}),F(()=>{})));for(let m of d.children)p.push(...u(m));return p};return Ya(u(l.targetSnapshot.root)).pipe(Hn(null),_n(1))}),gf(()=>this.afterPreactivation()),tt(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?ye(d).pipe(F(()=>s)):V(s)}),F(l=>{let u=sR(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ie(D({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Ae(()=>{this.events.next(new As)}),uR(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),_n(1),Ae({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new cn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),dd(this.transitionAbortSubject.pipe(Ae(l=>{throw l}))),Mr(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",vt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Yt(l=>{if(c=!0,ME(l))this.events.next(new An(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),lR(l)?this.events.next(new lo(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Ts(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let d=$t(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof xs){let{message:p,cancellationCode:m}=gl(this.urlSerializer,d);this.events.next(new An(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new lo(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let p=r.errorHandler(l);s.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return ft}))}))}cancelNavigationTransition(r,i,o){let s=new An(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sO(t){return t!==bs}var aO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>w(cO),providedIn:"root"});let t=e;return t})(),$f=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},cO=(()=>{let e=class e extends $f{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Zi(e)))(o||e)}})(),e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),FE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>w(lO),providedIn:"root"});let t=e;return t})(),lO=(()=>{let e=class e extends FE{constructor(){super(...arguments),this.location=w(cs),this.urlSerializer=w(Hf),this.options=w(Kf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=w(Zf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new cr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=IE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ss)this.stateMemento=this.createStateMemento();else if(r instanceof Yr)this.rawUrlTree=i.initialUrl;else if(r instanceof ul){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof As?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof An&&(r.code===vt.GuardRejected||r.code===vt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ts?this.restoreHistory(i,!0):r instanceof cn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=D(D({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=D(D({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Zi(e)))(o||e)}})(),e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ys=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ys||{});function uO(t,e){t.events.pipe(pt(n=>n instanceof cn||n instanceof An||n instanceof Ts||n instanceof Yr),F(n=>n instanceof cn||n instanceof Yr?ys.COMPLETE:(n instanceof An?n.code===vt.Redirect||n.code===vt.SupersededByNewNavigation:!1)?ys.REDIRECTING:ys.FAILED),pt(n=>n!==ys.REDIRECTING),_n(1)).subscribe(()=>{e()})}function dO(t){throw t}var hO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ue=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=w(Gc),this.stateManager=w(FE),this.options=w(Kf,{optional:!0})||{},this.pendingTasks=w(tr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=w(oO),this.urlSerializer=w(Hf),this.location=w(cs),this.urlHandlingStrategy=w(Zf),this._events=new je,this.errorHandler=this.options.errorHandler||dO,this.navigated=!1,this.routeReuseStrategy=w(aO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=w(Qf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!w(Gf,{optional:!0}),this.eventsSubscription=new be,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof An&&i.code!==vt.Redirect&&i.code!==vt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof cn)this.navigated=!0;else if(i instanceof lo){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=D({info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||sO(o.source)},a);this.scheduleNavigation(c,bs,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}gO(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=D({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Yf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=D(D({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let m=o?o.snapshot:this.routerState.snapshot.root;p=EE(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),p=this.currentUrlTree.root}return bE(p,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Is(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,bs,null,i)}navigate(r,i={skipLocationChange:!1}){return pO(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=D({},hO):i===!1?o=D({},fO):o=i,Is(r))return rE(this.currentUrlTree,r,o);let s=this.parseUrl(r);return rE(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((p,m)=>{c=p,l=m});let d=this.pendingTasks.add();return uO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pO(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new N(4008,!1)}function gO(t){return!(t instanceof As)&&!(t instanceof lo)}var ur=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new je,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof cn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Cy(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(b(Ue),b(Qr),Dh("tabindex"),b(In),b(rn),b(no))},e.\u0275dir=Fe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&O("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&as("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ir],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ir],replaceUrl:[2,"replaceUrl","replaceUrl",ir],routerLink:"routerLink"},standalone:!0,features:[Hh,Xn]});let t=e;return t})();var mO=new A("");function LE(t,...e){return ct([{provide:Qf,multi:!0,useValue:t},[],{provide:Qr,useFactory:vO,deps:[Ue]},{provide:qc,multi:!0,useFactory:_O},e.map(n=>n.\u0275providers)])}function vO(t){return t.routerState.root}function _O(){let t=w(ze);return e=>{let n=t.get(Wr);if(e!==n.components[0])return;let r=t.get(Ue),i=t.get(yO);t.get(EO)===1&&r.initialNavigation(),t.get(bO,null,H.Optional)?.setUpPreloading(),t.get(mO,null,H.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var yO=new A("",{factory:()=>new je}),EO=new A("",{providedIn:"root",factory:()=>1});var bO=new A("");var GE=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(b(In),b(rn))},e.\u0275dir=Fe({type:e});let t=e;return t})(),qE=(()=>{let e=class e extends GE{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Zi(e)))(o||e)}})(),e.\u0275dir=Fe({type:e,features:[sn]});let t=e;return t})(),Xf=new A("");var wO={provide:Xf,useExisting:Qn(()=>ln),multi:!0};function CO(){let t=Sn()?Sn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var IO=new A(""),ln=(()=>{let e=class e extends GE{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!CO())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(b(In),b(rn),b(IO,8))},e.\u0275dir=Fe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&O("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Xi([wO]),sn]});let t=e;return t})();function DO(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var ep=new A(""),KE=new A("");function SO(t){return DO(t.value)?{required:!0}:null}function VE(t){return null}function YE(t){return t!=null}function QE(t){return Hr(t)?ye(t):t}function ZE(t){let e={};return t.forEach(n=>{e=n!=null?D(D({},e),n):e}),Object.keys(e).length===0?null:e}function JE(t,e){return e.map(n=>n(t))}function TO(t){return!t.validate}function XE(t){return t.map(e=>TO(e)?e:n=>e.validate(n))}function AO(t){if(!t)return null;let e=t.filter(YE);return e.length==0?null:function(n){return ZE(JE(n,e))}}function tp(t){return t!=null?AO(XE(t)):null}function MO(t){if(!t)return null;let e=t.filter(YE);return e.length==0?null:function(n){let r=JE(n,e).map(QE);return sd(r).pipe(F(ZE))}}function np(t){return t!=null?MO(XE(t)):null}function UE(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function xO(t){return t._rawValidators}function NO(t){return t._rawAsyncValidators}function Jf(t){return t?Array.isArray(t)?t:[t]:[]}function El(t,e){return Array.isArray(t)?t.includes(e):t===e}function jE(t,e){let n=Jf(e);return Jf(t).forEach(i=>{El(n,i)||n.push(i)}),n}function BE(t,e){return Jf(e).filter(n=>!El(t,n))}var bl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=np(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},go=class extends bl{get formDirective(){return null}get path(){return null}},mo=class extends bl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},wl=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},RO={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$4=ie(D({},RO),{"[class.ng-submitted]":"isSubmitted"}),hr=(()=>{let e=class e extends wl{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(b(mo,2))},e.\u0275dir=Fe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&nr("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[sn]});let t=e;return t})(),_o=(()=>{let e=class e extends wl{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(b(go,10))},e.\u0275dir=Fe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&nr("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[sn]});let t=e;return t})();var Fs="VALID",yl="INVALID",fo="PENDING",Ls="DISABLED",vo=class{},Cl=class extends vo{constructor(e,n){super(),this.value=e,this.source=n}},Us=class extends vo{constructor(e,n){super(),this.pristine=e,this.source=n}},js=class extends vo{constructor(e,n){super(),this.touched=e,this.source=n}},po=class extends vo{constructor(e,n){super(),this.status=e,this.source=n}};function eb(t){return(Sl(t)?t.validators:t)||null}function OO(t){return Array.isArray(t)?tp(t):t||null}function tb(t,e){return(Sl(e)?e.asyncValidators:t)||null}function PO(t){return Array.isArray(t)?np(t):t||null}function Sl(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function kO(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new N(1e3,"");if(!r[n])throw new N(1001,"")}function FO(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new N(1002,"")})}var Il=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new je,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fs}get invalid(){return this.status===yl}get pending(){return this.status==fo}get disabled(){return this.status===Ls}get enabled(){return this.status!==Ls}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(BE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(BE(e,this._rawAsyncValidators))}hasValidator(e){return El(this._rawValidators,e)}hasAsyncValidator(e){return El(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ie(D({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new js(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new js(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ie(D({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Us(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Us(!0,r))}markAsPending(e={}){this.status=fo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new po(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ie(D({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ls,this.errors=null,this._forEachChild(i=>{i.disable(ie(D({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cl(this.value,r)),this._events.next(new po(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(D({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Fs,this._forEachChild(r=>{r.enable(ie(D({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(D({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fs||this.status===fo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cl(this.value,n)),this._events.next(new po(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ie(D({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ls:Fs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=fo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=QE(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new po(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Me,this.statusChanges=new Me}_calculateStatus(){return this._allControlsDisabled()?Ls:this.errors?yl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fo)?fo:this._anyControlsHaveStatus(yl)?yl:Fs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Us(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new js(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=OO(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=PO(this._rawAsyncValidators)}},Dl=class extends Il{constructor(e,n,r){super(eb(n),tb(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){FO(this,!0,e),Object.keys(e).forEach(r=>{kO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Tl=new A("CallSetDisabledState",{providedIn:"root",factory:()=>Al}),Al="always";function LO(t,e){return[...e.path,t]}function nb(t,e,n=Al){rb(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),UO(t,e),BO(t,e),jO(t,e),VO(t,e)}function $E(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function VO(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function rb(t,e){let n=xO(t);e.validator!==null?t.setValidators(UE(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=NO(t);e.asyncValidator!==null?t.setAsyncValidators(UE(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();$E(e._rawValidators,i),$E(e._rawAsyncValidators,i)}function UO(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ib(t,e)})}function jO(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ib(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ib(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function BO(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function $O(t,e){t==null,rb(t,e)}function HO(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function WO(t){return Object.getPrototypeOf(t.constructor)===qE}function zO(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function GO(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===ln?n=o:WO(o)?r=o:i=o}),i||r||n||null}var qO={provide:go,useExisting:Qn(()=>Zr)},Vs=Promise.resolve(),Zr=(()=>{let e=class e extends go{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Me,this.form=new Dl({},tp(r),np(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Vs.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),nb(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Vs.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Vs.then(()=>{let i=this._findContainer(r.path),o=new Dl({});$O(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Vs.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Vs.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,zO(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(b(ep,10),b(KE,10),b(Tl,8))},e.\u0275dir=Fe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&O("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xi([qO]),sn]});let t=e;return t})();function HE(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function WE(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var KO=class extends Il{constructor(e=null,n,r){super(eb(n),tb(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(WE(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){HE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){HE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){WE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var YO={provide:mo,useExisting:Qn(()=>Mn)},zE=Promise.resolve(),Mn=(()=>{let e=class e extends mo{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new KO,this._registered=!1,this.name="",this.update=new Me,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=GO(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),HO(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){nb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){zE.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&ir(i);zE.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?LO(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(b(go,9),b(ep,10),b(KE,10),b(Xf,10),b(zr,8),b(Tl,8))},e.\u0275dir=Fe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xi([YO]),sn,Xn]});let t=e;return t})(),yo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Fe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var QO={provide:Xf,useExisting:Qn(()=>rp),multi:!0};var ZO=(()=>{let e=class e{constructor(){this._accessors=[]}add(r,i){this._accessors.push([r,i])}remove(r){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===r){this._accessors.splice(i,1);return}}select(r){this._accessors.forEach(i=>{this._isSameGroup(i,r)&&i[1]!==r&&i[1].fireUncheck(r.value)})}_isSameGroup(r,i){return r[0].control?r[0]._parent===i._control._parent&&r[1].name===i.name:!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rp=(()=>{let e=class e extends qE{constructor(r,i,o,s){super(r,i),this._registry=o,this._injector=s,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=w(Tl,{optional:!0})??Al}ngOnInit(){this._control=this._injector.get(mo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(r){this._state=r===this.value,this.setProperty("checked",this._state)}registerOnChange(r){this._fn=r,this.onChange=()=>{r(this.value),this._registry.select(this)}}setDisabledState(r){(this.setDisabledStateFired||r||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",r),this.setDisabledStateFired=!0}fireUncheck(r){this.writeValue(r)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(i){return new(i||e)(b(In),b(rn),b(ZO),b(ze))},e.\u0275dir=Fe({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,o){i&1&&O("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Xi([QO]),sn]});let t=e;return t})();var JO=(()=>{let e=class e{constructor(){this._validator=VE}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):VE,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Fe({type:e,features:[Xn]});let t=e;return t})();var XO={provide:ep,useExisting:Qn(()=>Bs),multi:!0};var Bs=(()=>{let e=class e extends JO{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ir,this.createValidator=r=>SO}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Zi(e)))(o||e)}})(),e.\u0275dir=Fe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&as("required",o._enabled?"":null)},inputs:{required:"required"},features:[Xi([XO]),sn]});let t=e;return t})();var eP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Jn({type:e}),e.\u0275inj=Zn({});let t=e;return t})();var Rt=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Tl,useValue:r.callSetDisabledState??Al}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Jn({type:e}),e.\u0275inj=Zn({imports:[eP]});let t=e;return t})();var ob=(()=>{let e=class e{constructor(r,i){this.document=r,this.platformId=i,this.documentIsAccessible=F0(this.platformId)}static getCookieRegExp(r){let i=r.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(r){try{return decodeURIComponent(r)}catch{return r}}check(r){return this.documentIsAccessible?(r=encodeURIComponent(r),e.getCookieRegExp(r).test(this.document.cookie)):!1}get(r){if(this.documentIsAccessible&&this.check(r)){r=encodeURIComponent(r);let o=e.getCookieRegExp(r).exec(this.document.cookie);return o[1]?e.safeDecodeURIComponent(o[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let r={},i=this.document;return i.cookie&&i.cookie!==""&&i.cookie.split(";").forEach(o=>{let[s,a]=o.split("=");r[e.safeDecodeURIComponent(s.replace(/^ /,""))]=e.safeDecodeURIComponent(a)}),r}set(r,i,o,s,a,c,l,u){if(!this.documentIsAccessible)return;if(typeof o=="number"||o instanceof Date||s||a||c||l){let m={expires:o,path:s,domain:a,secure:c,sameSite:l||"Lax",partitioned:u};this.set(r,i,m);return}let d=encodeURIComponent(r)+"="+encodeURIComponent(i)+";",p=o||{};if(p.expires)if(typeof p.expires=="number"){let m=new Date(new Date().getTime()+p.expires*1e3*60*60*24);d+="expires="+m.toUTCString()+";"}else d+="expires="+p.expires.toUTCString()+";";p.path&&(d+="path="+p.path+";"),p.domain&&(d+="domain="+p.domain+";"),p.secure===!1&&p.sameSite==="None"&&(p.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${r} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),p.secure&&(d+="secure;"),p.sameSite||(p.sameSite="Lax"),d+="sameSite="+p.sameSite+";",p.partitioned&&(d+="Partitioned;"),this.document.cookie=d}delete(r,i,o,s,a="Lax"){if(!this.documentIsAccessible)return;let c=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(r,"",{expires:c,path:i,domain:o,secure:s,sameSite:a})}deleteAll(r,i,o,s="Lax"){if(!this.documentIsAccessible)return;let a=this.getAll();for(let c in a)a.hasOwnProperty(c)&&this.delete(c,r,i,o,s)}};e.\u0275fac=function(i){return new(i||e)(x(Ge),x(Tt))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Pe=(()=>{let e=class e{constructor(r,i){this.http=r,this.cookieService=i,this.users=[],this.current_id_retos_VV=null,this.loadUsers().subscribe(o=>{this.users=o?o.filter(s=>s!==null&&s._id_user_VV!==void 0&&s._id_user_VV!==null):[]})}loadUsers(){return this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")}login(r,i){return this.users.find(s=>s.username===r&&s.password.toString()===i)?(this.cookieService.set("username",r,{expires:2,sameSite:"Lax"}),this.cookieService.set("isLoggedIn","true",{expires:2,sameSite:"Lax"}),!0):!1}isLoggedIn(){return this.cookieService.check("isLoggedIn")&&this.cookieService.get("isLoggedIn")==="true"}getUsername(){return this.cookieService.get("username")}logout(){this.cookieService.delete("username"),this.cookieService.delete("isLoggedIn")}loadUsersWithChallenge(){return this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/retos_user_VV.json")}getIdChallenge(){return v(this,null,function*(){yield this.loadUsersWithChallenge();let r=this.getUsername();if(r!=""){let i=yield this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/retos_user_VV.json").toPromise();if(i){let s=Object.values(i).find(a=>a._username===r);s?this.current_id_retos_VV=s._id_retos_VV:console.log("Usuario no encontrado en la base de datos")}return this.current_id_retos_VV}else return console.log("No encontre el user"),this.current_id_retos_VV})}};e.\u0275fac=function(i){return new(i||e)(x(pe),x(ob))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nP(t,e){if(t&1){let n=Le();h(0,"div",4)(1,"div",5)(2,"h3",6),g(3,"Iniciar sesi\xF3n"),f(),h(4,"form")(5,"div",7)(6,"label",8),g(7,"Usuario"),f(),h(8,"div",9)(9,"input",10),Oe("ngModelChange",function(i){Ce(n);let o=k();return Ve(o.username,i)||(o.username=i),Ie(i)}),f()()(),h(10,"div",7)(11,"label",11),g(12,"Contrase\xF1a"),f(),h(13,"div",9)(14,"input",12),Oe("ngModelChange",function(i){Ce(n);let o=k();return Ve(o.password,i)||(o.password=i),Ie(i)}),f()()(),h(15,"div",13)(16,"div"),R(17,"input",14),h(18,"label",15),g(19,"Recordar"),f()(),h(20,"a",16),g(21,"\xBFOlvidaste tu contrase\xF1a?"),f()(),h(22,"div",17)(23,"button",18),O("click",function(){Ce(n);let i=k();return Ie(i.onLogin())}),g(24," Iniciar Sesi\xF3n "),f()(),h(25,"div",19)(26,"p"),g(27," \xBFNo tienes cuenta? "),h(28,"a",20),g(29,"\xA1Reg\xEDstrate aqu\xED!"),f()()()()()()}if(t&2){let n=k();y(9),Re("ngModel",n.username),y(5),Re("ngModel",n.password)}}function rP(t,e){if(t&1&&(h(0,"div",4)(1,"div",21)(2,"h3"),g(3),f(),h(4,"span",22),g(5,"\xA1EMPIEZA TU AVENTURA!"),f()()()),t&2){let n=k();y(3),Z("\xA1Bienvenido, ",n.authService.getUsername(),"!")}}var sb=(()=>{let e=class e{constructor(r,i){this.authService=r,this.http=i,this.username="",this.password="",this.errorMessage="",this.users=[],this.loadUsers()}onUsernameChange(r){this.username=r}loadUsers(){this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json").subscribe(r=>{this.users=r?r.filter(i=>i!==null&&i._id_user_VV!==void 0&&i._id_user_VV!==null):[]},r=>{console.error("Error al cargar los usuarios:",r),alert("Error al cargar los usuarios")})}onLogin(){console.log("onLogin called"),console.log(`Username: ${this.username}`),console.log(`Password: ${this.password}`),this.authService.login(this.username,this.password)?(this.errorMessage="",alert("Inicio de sesi\xF3n exitoso")):(this.errorMessage="Usuario o contrase\xF1a incorrectos",console.error(this.errorMessage))}};e.\u0275fac=function(i){return new(i||e)(b(Pe),b(pe))},e.\u0275cmp=z({type:e,selectors:[["app-login"]],standalone:!0,features:[te],decls:5,vars:2,consts:[[1,"container-fluid","custom-container"],[1,"row","justify-content-center","min-vh-100"],[1,"col-md-4"],["class","card mt-5 custom-card",4,"ngIf"],[1,"card","mt-5","custom-card"],[1,"card-body"],[1,"card-title","text-center"],[1,"form-group"],["for","userName",1,"visually-hidden"],[1,"input-group","mb-3"],["name","userName","type","text","id","userName","placeholder","Usuario","aria-label","Usuario",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"visually-hidden"],["name","password","type","password","id","password","placeholder","Contrase\xF1a","aria-label","Contrase\xF1a",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","d-flex","justify-content-between"],["type","checkbox","id","remember","name","remember"],["for","remember"],["href","#",1,"forgot-password"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-primary","custom-btn","mt-3",3,"click"],[1,"d-flex","justify-content-center","mt-3"],["routerLink","../register",1,"link-info"],[1,"card-body","text-center"],["routerLink","/group",1,"btn","btn-primary","btn-lg"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),q(3,nP,30,2,"div",3)(4,rP,6,1,"div",3),f()()()),i&2&&(y(3),M("ngIf",!o.authService.isLoggedIn()),y(),M("ngIf",o.authService.isLoggedIn()))},dependencies:[Rt,yo,ln,hr,_o,Mn,Zr,me,Qe,ur],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:Arial,sans-serif}h3[_ngcontent-%COMP%]{margin-bottom:20px}.container-fluid[_ngcontent-%COMP%]{width:100%;padding:0}.custom-card[_ngcontent-%COMP%]{background-color:#fffc;border-radius:8px;box-shadow:0 4px 8px #0000001a}.text-center[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}.text-center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]{border:1px solid #4caf50;border-radius:0}.custom-btn[_ngcontent-%COMP%]{background-color:#4caf50;border:none;padding:10px 20px;font-size:16px;width:auto}.custom-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}.forgot-password[_ngcontent-%COMP%]{color:#4caf50;text-decoration:none}.forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333}.min-vh-100[_ngcontent-%COMP%]{min-height:100vh}"]});let t=e;return t})();var ab=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=z({type:e,selectors:[["app-err-404"]],standalone:!0,features:[te],decls:2,vars:0,template:function(i,o){i&1&&(h(0,"p"),g(1,"err-404 works!"),f())}});let t=e;return t})();var op={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var I=function(t,e){if(!t)throw Xr(e)},Xr=function(t){return new Error("Firebase Database ("+op.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var lb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iP=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Nl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,p=(a&15)<<2|l>>6,m=l&63;c||(m=64,s||(p=64)),r.push(n[u],n[d],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new sp;let p=o<<2|a>>4;if(r.push(p),l!==64){let m=a<<4&240|l>>2;if(r.push(m),d!==64){let _=l<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},sp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},cp=function(t){let e=lb(t);return Nl.encodeByteArray(e,!0)},$s=function(t){return cp(t).replace(/\./g,"")},Hs=function(t){try{return Nl.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ub(t){return db(void 0,t)}function db(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!oP(n)||(t[n]=db(t[n],e[n]));return t}function oP(t){return t!=="__proto__"}function sP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aP=()=>sP().__FIREBASE_DEFAULTS__,cP=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Hs(t[1]);return e&&JSON.parse(e)},lp=()=>{try{return aP()||cP()||lP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},up=t=>{var e,n;return(n=(e=lp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rl=t=>{let e=up(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dp=()=>{var t;return(t=lp())===null||t===void 0?void 0:t.config},hp=t=>{var e;return(e=lp())===null||e===void 0?void 0:e[`_${t}`]};var Jr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ol(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$s(JSON.stringify(n)),$s(JSON.stringify(s)),""].join(".")}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ws(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function hb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Pl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fb(){let t=Ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dn(){return op.NODE_CLIENT===!0||op.NODE_ADMIN===!0}function pb(){try{return typeof indexedDB=="object"}catch{return!1}}function gb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var uP="FirebaseError",_t=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uP,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xn.prototype.create)}},xn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?dP(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new _t(i,a,r)}};function dP(t,e){return t.replace(hP,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var hP=/\{\$([^}]+)}/g;function Eo(t){return JSON.parse(t)}function Be(t){return JSON.stringify(t)}var mb=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=Eo(Hs(o[0])||""),n=Eo(Hs(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var vb=function(t){let e=mb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},_b=function(t){let e=mb(t).claims;return typeof e=="object"&&e.admin===!0};function hn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ei(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function zs(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gs(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function bo(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(cb(o)&&cb(s)){if(!bo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function cb(t){return t!==null&&typeof t=="object"}function ti(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var xl=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let p=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function yb(t,e){let n=new ap(t,e);return n.subscribe.bind(n)}var ap=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ip),i.error===void 0&&(i.error=ip),i.complete===void 0&&(i.complete=ip);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function fP(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ip(){}function Eb(t,e){return`${t} failed: ${e} argument `}var bb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qs=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var tq=4*60*60*1e3;function Ze(t){return t&&t._delegate?t._delegate:t}var ut=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ni="[DEFAULT]";var kl=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Jr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gP(e))try{this.getOrInitializeService({instanceIdentifier:ni})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ni){return this.instances.has(e)}getOptions(e=ni){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ni){return this.component?this.component.multipleInstances?e:ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function pP(t){return t===ni?void 0:t}function gP(t){return t.instantiationMode==="EAGER"}var Ks=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new kl(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var mP=[],ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ce||{}),vP={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},_P=ce.INFO,yP={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},EP=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=yP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},fr=class{constructor(e){this.name=e,this._logLevel=_P,this._logHandler=EP,this._userLogHandler=null,mP.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var bP=(t,e)=>e.some(n=>t instanceof n),wb,Cb;function wP(){return wb||(wb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CP(){return Cb||(Cb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ib=new WeakMap,pp=new WeakMap,Db=new WeakMap,fp=new WeakMap,mp=new WeakMap;function IP(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(fn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Ib.set(n,t)}).catch(()=>{}),mp.set(e,t),e}function DP(t){if(pp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});pp.set(t,e)}var gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Db.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sb(t){gp=t(gp)}function SP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Fl(this),e,...n);return Db.set(r,e.sort?e.sort():[e]),fn(r)}:CP().includes(t)?function(...e){return t.apply(Fl(this),e),fn(Ib.get(this))}:function(...e){return fn(t.apply(Fl(this),e))}}function TP(t){return typeof t=="function"?SP(t):(t instanceof IDBTransaction&&DP(t),bP(t,wP())?new Proxy(t,gp):t)}function fn(t){if(t instanceof IDBRequest)return IP(t);if(fp.has(t))return fp.get(t);let e=TP(t);return e!==t&&(fp.set(t,e),mp.set(e,t)),e}var Fl=t=>mp.get(t);function Ab(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=fn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(fn(s.result),c.oldVersion,c.newVersion,fn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var AP=["get","getKey","getAll","getAllKeys","count"],MP=["put","add","delete","clear"],vp=new Map;function Tb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=MP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AP.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return vp.set(e,o),o}Sb(t=>ie(D({},t),{get:(e,n,r)=>Tb(e,n)||t.get(e,n,r),has:(e,n)=>!!Tb(e,n)||t.has(e,n)}));var yp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xP(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function xP(t){let e=t.getComponent();return e?.type==="VERSION"}var Ep="@firebase/app",Mb="0.10.6";var ri=new fr("@firebase/app"),NP="@firebase/app-compat",RP="@firebase/analytics-compat",OP="@firebase/analytics",PP="@firebase/app-check-compat",kP="@firebase/app-check",FP="@firebase/auth",LP="@firebase/auth-compat",VP="@firebase/database",UP="@firebase/database-compat",jP="@firebase/functions",BP="@firebase/functions-compat",$P="@firebase/installations",HP="@firebase/installations-compat",WP="@firebase/messaging",zP="@firebase/messaging-compat",GP="@firebase/performance",qP="@firebase/performance-compat",KP="@firebase/remote-config",YP="@firebase/remote-config-compat",QP="@firebase/storage",ZP="@firebase/storage-compat",JP="@firebase/firestore",XP="@firebase/vertexai-preview",ek="@firebase/firestore-compat",tk="firebase",nk="10.12.3";var bp="[DEFAULT]",rk={[Ep]:"fire-core",[NP]:"fire-core-compat",[OP]:"fire-analytics",[RP]:"fire-analytics-compat",[kP]:"fire-app-check",[PP]:"fire-app-check-compat",[FP]:"fire-auth",[LP]:"fire-auth-compat",[VP]:"fire-rtdb",[UP]:"fire-rtdb-compat",[jP]:"fire-fn",[BP]:"fire-fn-compat",[$P]:"fire-iid",[HP]:"fire-iid-compat",[WP]:"fire-fcm",[zP]:"fire-fcm-compat",[GP]:"fire-perf",[qP]:"fire-perf-compat",[KP]:"fire-rc",[YP]:"fire-rc-compat",[QP]:"fire-gcs",[ZP]:"fire-gcs-compat",[JP]:"fire-fst",[ek]:"fire-fst-compat",[XP]:"fire-vertex","fire-js":"fire-js",[tk]:"fire-js-all"};var Ys=new Map,ik=new Map,wp=new Map;function xb(t,e){try{t.container.addComponent(e)}catch(n){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pn(t){let e=t.name;if(wp.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,t);for(let n of Ys.values())xb(n,t);for(let n of ik.values())xb(n,t);return!0}function ii(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t.settings!==void 0}var ok={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new xn("app","Firebase",ok);var Cp=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}};var gn=nk;function Sp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:bp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw pr.create("bad-app-name",{appName:String(i)});if(n||(n=dp()),!n)throw pr.create("no-options");let o=Ys.get(i);if(o){if(bo(n,o.options)&&bo(r,o.config))return o;throw pr.create("duplicate-app",{appName:i})}let s=new Ks(i);for(let c of wp.values())s.addComponent(c);let a=new Cp(n,r,s);return Ys.set(i,a),a}function gr(t=bp){let e=Ys.get(t);if(!e&&t===bp&&dp())return Sp();if(!e)throw pr.create("no-app",{appName:t});return e}function Ll(){return Array.from(Ys.values())}function _e(t,e,n){var r;let i=(r=rk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(a.join(" "));return}pn(new ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var sk="firebase-heartbeat-database",ak=1,Qs="firebase-heartbeat-store",_p=null;function Pb(){return _p||(_p=Ab(sk,ak,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qs)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),_p}function ck(t){return v(this,null,function*(){try{let n=(yield Pb()).transaction(Qs),r=yield n.objectStore(Qs).get(kb(t));return yield n.done,r}catch(e){if(e instanceof _t)ri.warn(e.message);else{let n=pr.create("idb-get",{originalErrorMessage:e?.message});ri.warn(n.message)}}})}function Nb(t,e){return v(this,null,function*(){try{let r=(yield Pb()).transaction(Qs,"readwrite");yield r.objectStore(Qs).put(e,kb(t)),yield r.done}catch(n){if(n instanceof _t)ri.warn(n.message);else{let r=pr.create("idb-set",{originalErrorMessage:n?.message});ri.warn(r.message)}}})}function kb(t){return`${t.name}!${t.options.appId}`}var lk=1024,uk=30*24*60*60*1e3,Ip=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Dp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Rb();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=uk}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return v(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Rb(),{heartbeatsToSend:r,unsentEntries:i}=dk(this._heartbeatsCache.heartbeats),o=$s(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function Rb(){return new Date().toISOString().substring(0,10)}function dk(t,e=lk){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Ob(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ob(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Dp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return pb()?gb().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield ck(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Nb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Nb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Ob(t){return $s(JSON.stringify({version:2,heartbeats:t})).length}function hk(t){pn(new ut("platform-logger",e=>new yp(e),"PRIVATE")),pn(new ut("heartbeat",e=>new Ip(e),"PRIVATE")),_e(Ep,Mb,t),_e(Ep,Mb,"esm2017"),_e("fire-js","")}hk("");var fk="firebase",pk="10.12.3";_e(fk,pk,"app");var Rn=new bn("ANGULARFIRE2_VERSION");function Co(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var si=(t,e)=>{let n=e?[e]:Ll(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},mr=class{constructor(){return si(gk)}},gk="app-check";function wo(){}var Vl=class{zone;delegate;constructor(e,n=nd){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Tp=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wo,{},wo,wo)),n.pipe(Ae({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},vr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Vl(Zone.current)),this.insideAngular=n.run(()=>new Vl(Zone.current,td)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(x(oe))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ul(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function mk(t){return Ul().ngZone.runOutsideAngular(()=>t())}function oi(t){return Ul().ngZone.run(()=>t())}function vk(t){return _k(Ul())(t)}function _k(t){return function(n){return n=n.lift(new Tp(t.ngZone)),n.pipe(Bn(t.outsideAngular),jn(t.insideAngular))}}var yk=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),oi(()=>t.apply(void 0,r))},Ot=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=oi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wo,{},wo,wo))),r[o]=yk(r[o],n));let i=mk(()=>t.apply(this,r));if(!e)if(i instanceof G){let o=Ul();return i.pipe(Bn(o.outsideAngular),jn(o.insideAngular))}else return oi(()=>i);return i instanceof G?i.pipe(vk):i instanceof Promise?oi(()=>new Promise((o,s)=>i.then(a=>oi(()=>o(a)),a=>oi(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:oi(()=>i)};var zt=class{constructor(e){return e}},On=class{constructor(){return Ll()}};function Ek(t){return t&&t.length===1?t[0]:new zt(gr())}var Ap=new A("angularfire2._apps"),bk={provide:zt,useFactory:Ek,deps:[[new Ne,Ap]]},wk={provide:On,deps:[[new Ne,Ap]]};function Ck(t){return(e,n)=>{let r=n.get(Tt);_e("angularfire",Rn.full,"core"),_e("angularfire",Rn.full,"app"),_e("angular",p0.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new zt(i)}}function jl(t,...e){return ct([bk,wk,{provide:Ap,useFactory:Ck(t),multi:!0,deps:[oe,ze,vr,...e]}])}var Bl=Ot(Sp,!0);function Qb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Zb=Qb,Jb=new xn("auth","Firebase",Qb());var ql=new fr("@firebase/auth");function Ik(t,...e){ql.logLevel<=ce.WARN&&ql.warn(`Auth (${gn}): ${t}`,...e)}function Hl(t,...e){ql.logLevel<=ce.ERROR&&ql.error(`Auth (${gn}): ${t}`,...e)}function yr(t,...e){throw Kp(t,...e)}function ci(t,...e){return Kp(t,...e)}function Xb(t,e,n){let r=Object.assign(Object.assign({},Zb()),{[e]:n});return new xn("auth","Firebase",r).create(e,{appName:t.name})}function ai(t){return Xb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kp(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jb.create(t,...e)}function j(t,e,...n){if(!t)throw Kp(e,...n)}function Pn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Hl(e),new Error(e)}function Er(t,e){t||Pn(e)}function Rp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Dk(){return Fb()==="http:"||Fb()==="https:"}function Fb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Sk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dk()||hb()||"connection"in navigator)?navigator.onLine:!0}function Tk(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var li=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Er(n>e,"Short delay should be less than long delay!"),this.isMobile=Ws()||Pl()}get(){return Sk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Yp(t,e){Er(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Kl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ak={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Mk=new li(3e4,6e4);function Qp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Do(o,s,a,c){return v(this,arguments,function*(t,e,n,r,i={}){return ew(t,i,()=>v(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=ti(Object.assign({key:t.config.apiKey},u)).slice(1),p=yield t._getAdditionalHeaders();return p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode),Kl.fetch()(tw(t,t.config.apiHost,n,d),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},l))}))})}function ew(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Ak),e);try{let i=new Op(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw $l(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $l(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw $l(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw $l(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Xb(t,u,l);yr(t,u)}}catch(i){if(i instanceof _t)throw i;yr(t,"network-request-failed",{message:String(i)})}})}function xk(o,s,a,c){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield Do(t,e,n,r,i);return"mfaPendingCredential"in l&&yr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function tw(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Yp(t.config,i):`${t.config.apiScheme}://${i}`}var Op=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),Mk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function $l(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ci(t,e,r);return i.customData._tokenResponse=n,i}function Nk(t,e){return v(this,null,function*(){return Do(t,"POST","/v1/accounts:delete",e)})}function nw(t,e){return v(this,null,function*(){return Do(t,"POST","/v1/accounts:lookup",e)})}function Zs(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Zp(t,e=!1){return v(this,null,function*(){let n=Ze(t),r=yield n.getIdToken(e),i=Jp(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Zs(Mp(i.auth_time)),issuedAtTime:Zs(Mp(i.iat)),expirationTime:Zs(Mp(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Mp(t){return Number(t)*1e3}function Jp(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Hs(n);return i?JSON.parse(i):(Hl("Failed to decode base64 JWT payload"),null)}catch(i){return Hl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Lb(t){let e=Jp(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xs(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof _t&&Rk(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Rk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Pp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ea=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zs(this.lastLoginAt),this.creationTime=Zs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Yl(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Xs(t,nw(n,{idToken:r}));j(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?rw(o.providerUserInfo):[],a=Ok(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ea(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Xp(t){return v(this,null,function*(){let e=Ze(t);yield Yl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Ok(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rw(t){return t.map(e=>{var{providerId:n}=e,r=rd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Pk(t,e){return v(this,null,function*(){let n=yield ew(t,{},()=>v(this,null,function*(){let r=ti({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=tw(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Kl.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function kk(t,e){return v(this,null,function*(){return Do(t,"POST","/v2/accounts:revokeToken",Qp(t,e))})}var Js=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){j(e.length!==0,"internal-error");let n=Lb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Pk(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(j(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(j(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Pn("not implemented")}};function _r(t,e){j(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Io=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=rd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ea(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Xs(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Zp(this,e)}reload(){return Xp(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Yl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Nn(this.auth.app))return Promise.reject(ai(this.auth));let e=yield this.getIdToken();return yield Xs(this,Nk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,_=(s=n.photoURL)!==null&&s!==void 0?s:void 0,C=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(l=n.createdAt)!==null&&l!==void 0?l:void 0,K=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:L,emailVerified:P,isAnonymous:Se,providerData:he,stsTokenManager:He}=n;j(L&&He,e,"internal-error");let bt=Js.fromJSON(this.name,He);j(typeof L=="string",e,"internal-error"),_r(d,e.name),_r(p,e.name),j(typeof P=="boolean",e,"internal-error"),j(typeof Se=="boolean",e,"internal-error"),_r(m,e.name),_r(_,e.name),_r(C,e.name),_r(E,e.name),_r(S,e.name),_r(K,e.name);let Ho=new t({uid:L,auth:e,email:p,emailVerified:P,displayName:d,isAnonymous:Se,photoURL:_,phoneNumber:m,tenantId:C,stsTokenManager:bt,createdAt:S,lastLoginAt:K});return he&&Array.isArray(he)&&(Ho.providerData=he.map(Pu=>Object.assign({},Pu))),E&&(Ho._redirectEventId=E),Ho}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Js;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Yl(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];j(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?rw(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Js;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ea(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var Vb=new Map;function kn(t){Er(t instanceof Function,"Expected a class definition");let e=Vb.get(t);return e?(Er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Vb.set(t,e),e)}var Fk=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),kp=Fk;function Wl(t,e,n){return`firebase:${t}:${e}:${n}`}var Ql=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Wl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Wl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Io._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(kn(kp),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||kn(kp),s=Wl(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d=Io._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function Ub(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cw(e))return"Blackberry";if(lw(e))return"Webos";if(eg(e))return"Safari";if((e.includes("chrome/")||ow(e))&&!e.includes("edge/"))return"Chrome";if(aw(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function iw(t=Ke()){return/firefox\//i.test(t)}function eg(t=Ke()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ow(t=Ke()){return/crios\//i.test(t)}function sw(t=Ke()){return/iemobile/i.test(t)}function aw(t=Ke()){return/android/i.test(t)}function cw(t=Ke()){return/blackberry/i.test(t)}function lw(t=Ke()){return/webos/i.test(t)}function iu(t=Ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Lk(t=Ke()){var e;return iu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Vk(){return fb()&&document.documentMode===10}function uw(t=Ke()){return iu(t)||aw(t)||lw(t)||cw(t)||/windows phone/i.test(t)||sw(t)}function Uk(){try{return!!(window&&window!==window.top)}catch{return!1}}function dw(t,e=[]){let n;switch(t){case"Browser":n=Ub(Ke());break;case"Worker":n=`${Ub(Ke())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gn}/${r}`}var Fp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function jk(n){return v(this,arguments,function*(t,e={}){return Do(t,"GET","/v2/passwordPolicy",Qp(t,e))})}var Bk=6,Lp=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Bk,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Vp=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zl(this),this.idTokenSubscription=new Zl(this),this.beforeStateQueue=new Fp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kn(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ql.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield nw(this,{idToken:e}),r=yield Io._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Nn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Yl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Tk()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Nn(this.app))return Promise.reject(ai(this));let n=e?Ze(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Nn(this.app)?Promise.reject(ai(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Nn(this.app)?Promise.reject(ai(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(kn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield jk(this),n=new Lp(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield kk(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&kn(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=yield Ql.create(this,[kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Ik(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function tg(t){return Ze(t)}var Zl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yb(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ng={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $k(t){ng=t}function Hk(t){return ng.loadJS(t)}function Wk(){return ng.gapiScript}function hw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function rg(t,e){let n=ii(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(bo(o,e??{}))return i;yr(i,"already-initialized")}return n.initialize({options:e})}function zk(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(kn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function ig(t,e,n){let r=tg(t);j(r._canInitEmulator,r,"emulator-config-failed"),j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=fw(e),{host:s,port:a}=Gk(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||qk()}function fw(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Gk(t){let e=fw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:jb(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:jb(s)}}}function jb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function qk(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Jl=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}};function xp(t,e){return v(this,null,function*(){return xk(t,"POST","/v1/accounts:signInWithIdp",Qp(t,e))})}var Xl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Up=class extends Xl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ta=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield Io._fromIdTokenResponse(e,r,i),s=Bb(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Bb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Bb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var jp=class t extends _t{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function pw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jp._fromErrorAndOperation(t,o,e,r):o})}function Kk(t,e,n=!1){return v(this,null,function*(){let r=yield Xs(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ta._forOperation(t,"link",r)})}function Yk(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(Nn(r.app))return Promise.reject(ai(r));let i="reauthenticate";try{let o=yield Xs(t,pw(r,i,e,t),n);j(o.idToken,r,"internal-error");let s=Jp(o.idToken);j(s,r,"internal-error");let{sub:a}=s;return j(t.uid===a,r,"user-mismatch"),ta._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&yr(r,"user-mismatch"),o}})}function Qk(t,e,n=!1){return v(this,null,function*(){if(Nn(t.app))return Promise.reject(ai(t));let r="signIn",i=yield pw(t,r,e),o=yield ta._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function og(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function sg(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}var eu="__sak";var tu=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eu,"1"),this.storage.removeItem(eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function Zk(){let t=Ke();return eg(t)||iu(t)}var Jk=1e3,Xk=10,e1=(()=>{class t extends tu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Zk()&&Uk(),this.fallbackToPolling=uw(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Vk()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,Xk):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield Ir(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield Ir(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield Ir(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),gw=e1;var t1=(()=>{class t extends tu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),ag=t1;function n1(t){return Promise.all(t.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var r1=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>v(this,null,function*(){return u(r.origin,s)})),l=yield n1(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function mw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Bp=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=mw("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let p=d;if(p.data.eventId===l)switch(p.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(p.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function mn(){return window}function i1(t){mn().location.href=t}function vw(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}function o1(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function s1(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function a1(){return vw()?self:null}var _w="firebaseLocalStorageDb",c1=1,nu="firebaseLocalStorage",yw="fbase_key",ui=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ou(t,e){return t.transaction([nu],e?"readwrite":"readonly").objectStore(nu)}function l1(){let t=indexedDB.deleteDatabase(_w);return new ui(t).toPromise()}function $p(){let t=indexedDB.open(_w,c1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(nu,{keyPath:yw})}catch(i){n(i)}}),t.addEventListener("success",()=>v(this,null,function*(){let r=t.result;r.objectStoreNames.contains(nu)?e(r):(r.close(),yield l1(),e(yield $p()))}))})}function $b(t,e,n){return v(this,null,function*(){let r=ou(t,!0).put({[yw]:e,value:n});return new ui(r).toPromise()})}function u1(t,e){return v(this,null,function*(){let n=ou(t,!1).get(e),r=yield new ui(n).toPromise();return r===void 0?null:r.value})}function Hb(t,e){let n=ou(t,!0).delete(e);return new ui(n).toPromise()}var d1=800,h1=3,f1=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield $p(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>h1)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return vw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=r1._getInstance(a1()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield o1(),!this.activeServiceWorker)return;this.sender=new Bp(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||s1()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield $p();return yield $b(n,eu,"1"),yield Hb(n,eu),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>$b(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>u1(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>Hb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=ou(o,!1).getAll();return new ui(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Ew=f1;var Qq=hw("rcb"),Zq=new li(3e4,6e4);function p1(t,e){return e?kn(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var na=class extends Jl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xp(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function g1(t){return Qk(t.auth,new na(t),t.bypassAuthState)}function m1(t){let{auth:e,user:n}=t;return j(n,e,"internal-error"),Yk(n,new na(t),t.bypassAuthState)}function v1(t){return v(this,null,function*(){let{auth:e,user:n}=t;return j(n,e,"internal-error"),Kk(n,new na(t),t.bypassAuthState)})}var Hp=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g1;case"linkViaPopup":case"linkViaRedirect":return v1;case"reauthViaPopup":case"reauthViaRedirect":return m1;default:yr(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Jq=new li(2e3,1e4);var _1="pendingRedirect",zl=new Map,Wp=class t extends Hp{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=zl.get(this.auth._key());if(!e){try{let r=(yield y1(this.resolver,this.auth))?yield Ir(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zl.set(this.auth._key(),e)}return this.bypassAuthState||zl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Ir(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Ir(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function y1(t,e){return v(this,null,function*(){let n=w1(e),r=b1(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function E1(t,e){zl.set(t._key(),e)}function b1(t){return kn(t._redirectPersistence)}function w1(t){return Wl(_1,t.config.apiKey,t.name)}function C1(t,e,n=!1){return v(this,null,function*(){if(Nn(t.app))return Promise.reject(ai(t));let r=tg(t),i=p1(r,e),s=yield new Wp(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var I1=10*60*1e3,zp=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!bw(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ci(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=I1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wb(e))}saveEventToCache(e){this.cachedEventUids.add(Wb(e)),this.lastProcessedEventTime=Date.now()}};function Wb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bw({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function D1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bw(t);default:return!1}}function S1(n){return v(this,arguments,function*(t,e={}){return Do(t,"GET","/v1/projects",e)})}var T1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A1=/^https?/;function M1(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield S1(t);for(let n of e)try{if(x1(n))return}catch{}yr(t,"unauthorized-domain")})}function x1(t){let e=Rp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!A1.test(n))return!1;if(T1.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var N1=new li(3e4,6e4);function zb(){let t=mn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function R1(t){return new Promise((e,n)=>{var r,i,o;function s(){zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zb(),n(ci(t,"network-request-failed"))},timeout:N1.get()})}if(!((i=(r=mn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=mn().gapi)===null||o===void 0)&&o.load)s();else{let a=hw("iframefcb");return mn()[a]=()=>{gapi.load?s():n(ci(t,"network-request-failed"))},Hk(`${Wk()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Gl=null,e})}var Gl=null;function O1(t){return Gl=Gl||R1(t),Gl}var P1=new li(5e3,15e3),k1="__/auth/iframe",F1="emulator/auth/iframe",L1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U1(t){let e=t.config;j(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Yp(e,F1):`https://${t.config.authDomain}/${k1}`,r={apiKey:e.apiKey,appName:t.name,v:gn},i=V1.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ti(r).slice(1)}`}function j1(t){return v(this,null,function*(){let e=yield O1(t),n=mn().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:U1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L1,dontclear:!0},r=>new Promise((i,o)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ci(t,"network-request-failed"),a=mn().setTimeout(()=>{o(s)},P1.get());function c(){mn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var B1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$1=500,H1=600,W1="_blank",z1="http://localhost",ru=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function G1(t,e,n,r=$1,i=H1){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},B1),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ke().toLowerCase();n&&(a=ow(l)?W1:n),iw(l)&&(e=e||z1,c.scrollbars="yes");let u=Object.entries(c).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(Lk(l)&&a!=="_self")return q1(e||"",a),new ru(null);let d=window.open(e||"",a,u);j(d,t,"popup-blocked");try{d.focus()}catch{}return new ru(d)}function q1(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var K1="__/auth/handler",Y1="emulator/auth/handler",Q1=encodeURIComponent("fac");function Gb(t,e,n,r,i,o){return v(this,null,function*(){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gn,eventId:i};if(e instanceof Xl){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",zs(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(e instanceof Up){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${Q1}=${encodeURIComponent(c)}`:"";return`${Z1(t)}?${ti(a).slice(1)}${l}`})}function Z1({config:t}){return t.emulator?Yp(t,Y1):`https://${t.authDomain}/${K1}`}var Np="webStorageSupport",Gp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ag,this._completeRedirectFn=C1,this._overrideRedirectResult=E1}_openPopup(e,n,r,i){return v(this,null,function*(){var o;Er((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield Gb(e,n,r,Rp(),i);return G1(e,s,mw())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield Gb(e,n,r,Rp(),i);return i1(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Er(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield j1(e),r=new zp(e);return n.register("authEvent",i=>(j(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Np,{type:Np},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Np];s!==void 0&&n(!!s),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uw()||eg()||iu()}},ww=Gp;var qb="@firebase/auth",Kb="1.7.5";var qp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function J1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X1(t){pn(new ut("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;j(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dw(t)},l=new Vp(r,i,o,c);return zk(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),pn(new ut("auth-internal",e=>{let n=tg(e.getProvider("auth").getImmediate());return(r=>new qp(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_e(qb,Kb,J1(t)),_e(qb,Kb,"esm2017")}var eF=5*60,tF=hp("authIdTokenMaxAge")||eF,Yb=null,nF=t=>e=>v(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tF)return;let i=n?.token;Yb!==i&&(Yb=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function cg(t=gr()){let e=ii(t,"auth");if(e.isInitialized())return e.getImmediate();let n=rg(t,{popupRedirectResolver:ww,persistence:[Ew,gw,ag]}),r=hp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=nF(o.toString());sg(n,s,()=>s(n.currentUser)),og(n,a=>s(a))}}let i=up("auth");return i&&ig(n,`http://${i}`),n}function rF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$k({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=ci("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",rF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X1("Browser");var Cw="auth",ra=class{constructor(e){return e}},di=class{constructor(){return si(Cw)}};var lg=new A("angularfire2.auth-instances");function ZF(t,e){let n=Co(Cw,t,e);return n&&new ra(n)}function JF(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ra(r)}}var XF={provide:di,deps:[[new Ne,lg]]},eL={provide:ra,useFactory:ZF,deps:[[new Ne,lg],zt]};function ug(t,...e){return _e("angularfire",Rn.full,"auth"),ct([eL,XF,{provide:lg,useFactory:JF(t),multi:!0,deps:[oe,ze,vr,On,[new Ne,mr],...e]}])}var dg=Ot(cg,!0);var Nw="firebasestorage.googleapis.com",Rw="storageBucket",tL=2*60*1e3,nL=10*60*1e3;var we=class t extends _t{constructor(e,n,r=0){super(hg(e),`Firebase Storage: ${n} (${hg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},De=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(De||{});function hg(t){return"storage/"+t}function yg(){let t="An unknown error occurred, please check the error payload for server response.";return new we(De.UNKNOWN,t)}function rL(t){return new we(De.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function iL(t){return new we(De.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oL(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new we(De.UNAUTHENTICATED,t)}function sL(){return new we(De.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function aL(t){return new we(De.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function cL(){return new we(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lL(){return new we(De.CANCELED,"User canceled the upload/download.")}function uL(t){return new we(De.INVALID_URL,"Invalid URL '"+t+"'.")}function dL(t){return new we(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hL(){return new we(De.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rw+"' property when initializing the app?")}function fL(){return new we(De.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pL(){return new we(De.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gL(t){return new we(De.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fg(t){return new we(De.INVALID_ARGUMENT,t)}function Ow(){return new we(De.APP_DELETED,"The Firebase app was deleted.")}function mL(t){return new we(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oa(t,e){return new we(De.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ia(t){throw new we(De.INTERNAL_ERROR,"Internal error: "+t)}var yt=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw dL(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(P){P.path_=decodeURIComponent(P.path)}let u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${u}/b/${i}/o${p}`,"i"),_={bucket:1,path:3},C=n===Nw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",S=new RegExp(`^https?://${C}/${i}/${E}`,"i"),L=[{regex:a,indices:c,postModify:o},{regex:m,indices:_,postModify:l},{regex:S,indices:{bucket:1,path:2},postModify:l}];for(let P=0;P<L.length;P++){let Se=L[P],he=Se.regex.exec(e);if(he){let He=he[Se.indices.bucket],bt=he[Se.indices.path];bt||(bt=""),r=new t(He,bt),Se.postModify(r);break}}if(r==null)throw uL(e);return r}},pg=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function vL(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function u(...E){l||(l=!0,e.apply(null,E))}function d(E){i=setTimeout(()=>{i=null,t(m,c())},E)}function p(){o&&clearTimeout(o)}function m(E,...S){if(l){p();return}if(E){p(),u.call(null,E,...S);return}if(c()||s){p(),u.call(null,E,...S);return}r<64&&(r*=2);let L;a===1?(a=2,L=0):L=(r+Math.random())*1e3,d(L)}let _=!1;function C(E){_||(_=!0,p(),!l&&(i!==null?(E||(a=2),clearTimeout(i),d(0)):E||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,C(!0)},n),C}function _L(t){t(!1)}function yL(t){return t!==void 0}function EL(t){return typeof t=="object"&&!Array.isArray(t)}function Eg(t){return typeof t=="string"||t instanceof String}function Iw(t){return bg()&&t instanceof Blob}function bg(){return typeof Blob<"u"}function gg(t,e,n,r){if(r<e)throw fg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw fg(`Invalid value for '${t}'. Expected ${n} or less.`)}function lu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Pw(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var To=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(To||{});function bL(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var mg=class{constructor(e,n,r,i,o,s,a,c,l,u,d,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new So(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===To.NO_ERROR,c=o.getStatus();if(!a||bL(c,this.additionalRetryCodes_)&&this.retry){let u=o.getErrorCode()===To.ABORT;r(!1,new So(!1,null,u));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new So(l,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());yL(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=yg();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?Ow():lL();s(c)}else{let c=cL();s(c)}};this.canceled_?n(!1,new So(!1,null,!0)):this.backoffId_=vL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_L(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},So=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function wL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function CL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function IL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function DL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function SL(t,e,n,r,i,o,s=!0){let a=Pw(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return IL(l,e),wL(l,n),CL(l,o),DL(l,r),new mg(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}function TL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function AL(...t){let e=TL();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(bg())return new Blob(t);throw new we(De.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ML(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function xL(t){if(typeof atob>"u")throw gL("base-64");return atob(t)}var vn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},sa=class{constructor(e,n){this.data=e,this.contentType=n||null}};function NL(t,e){switch(t){case vn.RAW:return new sa(kw(e));case vn.BASE64:case vn.BASE64URL:return new sa(Fw(t,e));case vn.DATA_URL:return new sa(OL(e),PL(e))}throw yg()}function kw(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function RL(t){let e;try{e=decodeURIComponent(t)}catch{throw oa(vn.DATA_URL,"Malformed data URL.")}return kw(e)}function Fw(t,e){switch(t){case vn.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw oa(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case vn.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw oa(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xL(e)}catch(i){throw i.message.includes("polyfill")?i:oa(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var au=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw oa(vn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=kL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function OL(t){let e=new au(t);return e.base64?Fw(vn.BASE64,e.rest):RL(e.rest)}function PL(t){return new au(t).contentType}function kL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var cu=class t{constructor(e,n){let r=0,i="";Iw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Iw(this.data_)){let r=this.data_,i=ML(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(bg()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(AL.apply(null,n))}else{let n=e.map(s=>Eg(s)?NL(vn.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function wg(t){let e;try{e=JSON.parse(t)}catch{return null}return EL(e)?e:null}function FL(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function LL(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Lw(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function VL(t,e){return e}var Ye=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||VL}},su=null;function UL(t){return!Eg(t)||t.length<2?t:Lw(t)}function Vw(){if(su)return su;let t=[];t.push(new Ye("bucket")),t.push(new Ye("generation")),t.push(new Ye("metageneration")),t.push(new Ye("name","fullPath",!0));function e(o,s){return UL(s)}let n=new Ye("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new Ye("size");return i.xform=r,t.push(i),t.push(new Ye("timeCreated")),t.push(new Ye("updated")),t.push(new Ye("md5Hash",null,!0)),t.push(new Ye("cacheControl",null,!0)),t.push(new Ye("contentDisposition",null,!0)),t.push(new Ye("contentEncoding",null,!0)),t.push(new Ye("contentLanguage",null,!0)),t.push(new Ye("contentType",null,!0)),t.push(new Ye("metadata","customMetadata",!0)),su=t,su}function jL(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new yt(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function BL(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return jL(r,t),r}function Uw(t,e,n){let r=wg(e);return r===null?null:BL(t,r,n)}function $L(t,e,n,r){let i=wg(e);if(i===null||!Eg(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let u=t.bucket,d=t.fullPath,p="/b/"+s(u)+"/o/"+s(d),m=lu(p,n,r),_=Pw({alt:"media",token:l});return m+_})[0]}function HL(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Dw="prefixes",Sw="items";function WL(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Dw])for(let i of n[Dw]){let o=i.replace(/\/$/,""),s=t._makeStorageReference(new yt(e,o));r.prefixes.push(s)}if(n[Sw])for(let i of n[Sw]){let o=t._makeStorageReference(new yt(e,i.name));r.items.push(o)}return r}function zL(t,e,n){let r=wg(n);return r===null?null:WL(t,e,r)}var aa=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Cg(t){if(!t)throw yg()}function GL(t,e){function n(r,i){let o=Uw(t,i,e);return Cg(o!==null),o}return n}function qL(t,e){function n(r,i){let o=zL(t,e,i);return Cg(o!==null),o}return n}function KL(t,e){function n(r,i){let o=Uw(t,i,e);return Cg(o!==null),$L(o,i,t.host,t._protocol)}return n}function Ig(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=sL():i=oL():n.getStatus()===402?i=iL(t.bucket):n.getStatus()===403?i=aL(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function YL(t){let e=Ig(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=rL(t.path)),o.serverResponse=i.serverResponse,o}return n}function QL(t,e,n,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=lu(s,t.host,t._protocol),c="GET",l=t.maxOperationRetryTime,u=new aa(a,c,qL(t,e.bucket),l);return u.urlParams=o,u.errorHandler=Ig(e),u}function ZL(t,e,n){let r=e.fullServerUrl(),i=lu(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new aa(i,o,KL(t,n),s);return a.errorHandler=YL(e),a}function JL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function XL(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=JL(null,e)),r}function eV(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let L="";for(let P=0;P<2;P++)L=L+Math.random().toString().slice(2);return L}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let l=XL(e,r,i),u=HL(l,n),d="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,p=`\r
--`+c+"--",m=cu.getBlob(d,r,p);if(m===null)throw fL();let _={name:l.fullPath},C=lu(o,t.host,t._protocol),E="POST",S=t.maxUploadRetryTime,K=new aa(C,E,GL(t,n),S);return K.urlParams=_,K.headers=s,K.body=m.uploadData(),K.errorHandler=Ig(e),K}var H8=256*1024;var Tw=null,vg=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=To.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=To.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=To.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ia("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ia("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ia("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ia("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ia("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},_g=class extends vg{initXhr(){this.xhr_.responseType="text"}};function Dg(){return Tw?Tw():new _g}var Ao=class t{constructor(e,n){this._service=e,n instanceof yt?this._location=n:this._location=yt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new yt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Lw(this._location.path)}get storage(){return this._service}get parent(){let e=FL(this._location.path);if(e===null)return null;let n=new yt(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw mL(e)}};function tV(t,e,n){t._throwIfRoot("uploadBytes");let r=eV(t.storage,t._location,Vw(),new cu(e,!0),n);return t.storage.makeRequestWithTokens(r,Dg).then(i=>({metadata:i,ref:t}))}function nV(t){let e={prefixes:[],items:[]};return jw(t,e).then(()=>e)}function jw(t,e,n){return v(this,null,function*(){let i=yield rV(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield jw(t,e,i.nextPageToken))})}function rV(t,e){e!=null&&typeof e.maxResults=="number"&&gg("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=QL(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Dg)}function iV(t){t._throwIfRoot("getDownloadURL");let e=ZL(t.storage,t._location,Vw());return t.storage.makeRequestWithTokens(e,Dg).then(n=>{if(n===null)throw pL();return n})}function oV(t,e){let n=LL(t._location.path,e),r=new yt(t._location.bucket,n);return new Ao(t.storage,r)}function sV(t){return/^[A-Za-z]+:\/\//.test(t)}function aV(t,e){return new Ao(t,e)}function Bw(t,e){if(t instanceof ca){let n=t;if(n._bucket==null)throw hL();let r=new Ao(n,n._bucket);return e!=null?Bw(r,e):r}else return e!==void 0?oV(t,e):t}function cV(t,e){if(e&&sV(e)){if(t instanceof ca)return aV(t,e);throw fg("To use ref(service, url), the first argument must be a Storage instance.")}else return Bw(t,e)}function Aw(t,e){let n=e?.[Rw];return n==null?null:yt.makeFromBucketSpec(n,t)}function lV(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Ol(i,t.app.options.projectId))}var ca=class{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Nw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tL,this._maxUploadRetryTime=nL,this._requests=new Set,i!=null?this._bucket=yt.makeFromBucketSpec(i,this._host):this._bucket=Aw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yt.makeFromBucketSpec(this._url,e):this._bucket=Aw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ao(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new pg(Ow());{let s=SL(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return v(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},Mw="@firebase/storage",xw="0.12.6";var $w="storage";function Hw(t,e,n){return t=Ze(t),tV(t,e,n)}function Ww(t){return t=Ze(t),nV(t)}function zw(t){return t=Ze(t),iV(t)}function Gw(t,e){return t=Ze(t),cV(t,e)}function qw(t=gr(),e){t=Ze(t);let r=ii(t,$w).getImmediate({identifier:e}),i=Rl("storage");return i&&Kw(r,...i),r}function Kw(t,e,n,r={}){lV(t,e,n,r)}function uV(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ca(n,r,i,e,gn)}function dV(){pn(new ut($w,uV,"PUBLIC").setMultipleInstances(!0)),_e(Mw,xw,""),_e(Mw,xw,"esm2017")}dV();var hi=class{constructor(e){return e}},Yw="storage",Sg=class{constructor(){return si(Yw)}};var Tg=new A("angularfire2.storage-instances");function hV(t,e){let n=Co(Yw,t,e);return n&&new hi(n)}function fV(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new hi(r)}}var pV={provide:Sg,deps:[[new Ne,Tg]]},gV={provide:hi,useFactory:hV,deps:[[new Ne,Tg],zt]};function uu(t,...e){return _e("angularfire",Rn.full,"gcs"),ct([gV,pV,{provide:Tg,useFactory:fV(t),multi:!0,deps:[oe,ze,vr,On,[new Ne,di],[new Ne,mr],...e]}])}var du=Ot(zw,!0);var hu=Ot(qw,!0);var Ag=Ot(Ww,!0),fu=Ot(Gw,!0);var Qw=Ot(Hw,!0);var br=(()=>{let e=class e{constructor(r){this.storage=r,this.latestImageUrl=null}uploadImage(r){let i=fu(this.storage,`images/${r.name}`);return new Promise((o,s)=>{Qw(i,r).then(a=>v(this,null,function*(){let c=yield du(i);this.latestImageUrl=c,console.log("Subida exitosa:",a),console.log("URL de descarga:",c),o()})).catch(a=>{console.error("Error al subir la imagen:",a),s(a)})})}getImages(){let r=fu(this.storage,"images");return Ag(r).then(i=>v(this,null,function*(){let o=[];for(let s of i.items){let a=yield du(s);o.push(a)}return o})).catch(i=>{throw console.error("Error al obtener las im\xE1genes:",i),i})}getImagesProfile(){let r=fu(this.storage,"imgUser");return Ag(r).then(i=>v(this,null,function*(){let o=[];for(let s of i.items){let a=yield du(s);o.push(a)}return o})).catch(i=>{throw console.error("Error al obtener las im\xE1genes:",i),i})}getLatestImageUrl(){return this.latestImageUrl}};e.\u0275fac=function(i){return new(i||e)(x(hi))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gu=(()=>{let e=class e{constructor(r){this.http=r,this.baseUrl="https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/",this.urlRetos=`${this.baseUrl}retos_VV.json`}getEmployees(){return this.http.get(this.urlRetos)}addRetoUser(r){return this.http.post(`${this.baseUrl}retos_user_VV.json`,r)}getRetosUserVV(){return this.http.get(`${this.baseUrl}retos_user_VV.json`)}checkAndAddOrUpdateRetosUserVV(r){let{_id_retos_VV:i,_username:o}=r;return this.getRetosUserVV().pipe(F(s=>{if(!s)return null;let c=Object.entries(s).map(([l,u])=>D({id:l},u)).find(l=>l._id_retos_VV===i&&l._username===o);return c?c.id:null}),tt(s=>s?this.http.patch(`${this.baseUrl}retos_user_VV/${s}.json`,{urlUploaded:r.urlUploaded}).pipe(F(()=>!0)):this.http.post(`${this.baseUrl}retos_user_VV.json`,r).pipe(F(()=>!0))),Yt(s=>{throw console.error("Error al verificar o actualizar/agregar el reto:",s),s}))}};e.\u0275fac=function(i){return new(i||e)(x(pe))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vV=()=>["q1","q2","q3","q4"];function _V(t,e){if(t&1){let n=Le();h(0,"div",16)(1,"div",17)(2,"div",18),R(3,"img",19),f(),h(4,"div",20)(5,"div",21)(6,"h5",22),g(7),R(8,"br"),g(9),f(),h(10,"p",23)(11,"b"),g(12,"\xBFC\xF3mo hacerlo?"),f(),g(13),f(),h(14,"p",23),g(15," \xA1"),h(16,"b"),g(17,"Val\xEDdalo"),f(),g(18),f(),h(19,"p",23)(20,"b"),g(21,"Verdecitos otorgados:"),f(),g(22),f(),h(23,"label",24),g(24," Subir Imagen "),h(25,"input",25),O("change",function(i){let o=Ce(n).$implicit,s=k(2).$implicit,a=k();return Ie(a.uploadImageToDB(i,s,a.numeroDeReto(o._id_retos_VV)))}),f()()()()()()}if(t&2){let n=e.$implicit,r=k(3);y(3),M("src",r.getImageUrl(n),At),y(4),Z(" Reto ",r.numeroDeReto(n._id_retos_VV),": "),y(2),Z(" ",n.description," "),y(4),Z(" ",n.howTo,""),y(5),Z(" para obtener Verdecitos! ",n.verification," "),y(4),Z(" ",n.pointsGiven," ")}}function yV(t,e){if(t&1&&(h(0,"div",13)(1,"h2",14),g(2),f(),q(3,_V,26,6,"div",15),f()),t&2){let n=k(),r=n.$implicit,i=n.index,o=k();y(2),Z(" Quincena ",i+1," "),y(),M("ngForOf",o.retosPorQuincena[r])}}function EV(t,e){if(t&1&&(h(0,"div"),q(1,yV,4,2,"div",12),f()),t&2){let n=e.$implicit,r=k();y(),M("ngIf",r.quincenaSeleccionada===n)}}var Jw=(()=>{let e=class e{constructor(r,i,o,s){this.imageService=r,this.authService=i,this.http=o,this.retosService=s,this.latestImageUrl=void 0,this.userUploading=null,this.users=[],this.retos_user_VV=[],this.challengesList=[],this.retosPorQuincena={},this.quincenaSeleccionada="q1"}ngOnInit(){this.loadUsers(),this.loadRetosUserVV(),this.retosService.getEmployees().subscribe(r=>{this.challengesList=r,this.clasificarRetosPorQuincenas()})}clasificarRetosPorQuincenas(){this.retosPorQuincena={q1:[],q2:[],q3:[],q4:[]},this.challengesList.forEach(r=>{let i=r._id_retos_VV.substring(3,5);this.retosPorQuincena[i]&&this.retosPorQuincena[i].push(r)})}numeroDeReto(r){let i=r.substring(6,7);return parseInt(i)}loadUsers(){this.http.get(`${this.retosService.baseUrl}register.json`).subscribe(r=>{this.users=r},r=>{console.error("Error al cargar los usuarios:",r)})}loadRetosUserVV(){this.retosService.getRetosUserVV().subscribe(r=>{this.retos_user_VV=Object.values(r||{})},r=>{console.error("Error al cargar los retos de usuario:",r)})}getImageToStorage(r){return v(this,null,function*(){let i=r.target.files[0];console.log(i);try{yield this.imageService.uploadImage(i),this.latestImageUrl=this.imageService.getLatestImageUrl()||void 0,console.log("URL de la imagen:",this.latestImageUrl),this.userUploading=this.authService.getUsername(),console.log("Usuario subiendo la imagen:",this.userUploading)}catch(o){console.error("Error al subir la imagen:",o)}})}uploadImageToDB(r,i,o){return v(this,null,function*(){yield this.getImageToStorage(r);let s=yield this.authService.getIdChallenge(),a=`s01${i}r${o}`;if(console.log("uploading id: "+s),console.log("_idGenerated: "+a),this.userUploading&&this.latestImageUrl){let c={urlUploaded:this.latestImageUrl,_username:this.userUploading,_id_retos_VV:a};this.retosService.checkAndAddOrUpdateRetosUserVV(c).subscribe(l=>{console.log("Registro de reto enviado a la base de datos:",l);let u=this.retosPorQuincena[i].findIndex(d=>d._id_retos_VV===a);if(u!==-1){this.retosPorQuincena[i][u].urlImgDefault=this.latestImageUrl||void 0;let d=this.retos_user_VV.findIndex(p=>p._id_retos_VV===a&&p._username===this.userUploading);d!==-1?this.retos_user_VV[d].urlUploaded=this.latestImageUrl:this.retos_user_VV.push(c)}},l=>{console.error("Error al enviar el registro a la base de datos:",l)})}})}getImageUrl(r){let i=this.retos_user_VV.find(o=>o._id_retos_VV===r._id_retos_VV&&o._username===this.authService.getUsername());return i?i.urlUploaded||r.urlImgDefault||"":r.urlImgDefault||""}};e.\u0275fac=function(i){return new(i||e)(b(br),b(Pe),b(pe),b(gu))},e.\u0275cmp=z({type:e,selectors:[["app-retos"]],standalone:!0,features:[te],decls:30,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-3","position-fixed-top"],[1,"p-3","bg-light","rounded","shadow","mb-3"],[1,"list-unstyled"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"content-below-sidebar","p-3","bg-light","rounded","shadow"],["routerLink","/retos/seasonal"],["src","/assets/bannerseasonal.png","alt","Seasonal Banner",1,"img-fluid","rounded"],[1,"col-sm-9"],[4,"ngFor","ngForOf"],["class","card mb-3",4,"ngIf"],[1,"card","mb-3"],["id","title",1,"card-title-quincena"],["class","animate__animated animate__fadeIn ae-grid__item item-lg-4 au-mb-3",4,"ngFor","ngForOf"],[1,"animate__animated","animate__fadeIn","ae-grid__item","item-lg-4","au-mb-3"],[1,"row","g-0"],[1,"col-md-2","image-container"],["alt","Image",1,"reto-img",3,"src"],[1,"col-md-10"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary"],["type","file",2,"display","none",3,"change"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"span",6),O("click",function(){return o.quincenaSeleccionada="q1"}),g(7,"Quincena 1"),f(),h(8,"span"),g(9,"Inicia en..."),f()(),h(10,"li",5)(11,"span",6),O("click",function(){return o.quincenaSeleccionada="q2"}),g(12,"Quincena 2"),f(),h(13,"span"),g(14,"Inicia en..."),f()(),h(15,"li",5)(16,"span",6),O("click",function(){return o.quincenaSeleccionada="q3"}),g(17,"Quincena 3"),f(),h(18,"span"),g(19,"Inicia en..."),f()(),h(20,"li",5)(21,"span",6),O("click",function(){return o.quincenaSeleccionada="q4"}),g(22,"Quincena 4"),f(),h(23,"span"),g(24,"Inicia en..."),f()()()(),h(25,"div",7)(26,"a",8),R(27,"img",9),f()()(),h(28,"div",10),q(29,EV,2,1,"div",11),f()()()),i&2&&(y(29),M("ngForOf",eo(1,vV)))},dependencies:[Rt,me,Mt,Qe,ur],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Arial,sans-serif}.container-fluid[_ngcontent-%COMP%]{width:100%;padding:0}.bg-light[_ngcontent-%COMP%]{background-color:#eaf7f7}.p-3[_ngcontent-%COMP%]{padding:1rem!important}.rounded[_ngcontent-%COMP%]{border-radius:.25rem!important}.shadow[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026!important}.img-fluid[_ngcontent-%COMP%]{max-width:100%;height:auto}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.8}.seasonal-challenge[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:20px;border-radius:10px}.upload-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.upload-image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.challenge-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .challenge-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px}#title[_ngcontent-%COMP%]{margin-bottom:20px;padding:20px}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.reto-img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:150px;max-height:150px;object-fit:cover;border-radius:8px}"]});let t=e;return t})();function bV(t,e){if(t&1){let n=Le();h(0,"div",2)(1,"button",3),O("click",function(){Ce(n);let i=k();return Ie(i.navigateTo("migrupo"))}),g(2,"MI GRUPO"),f()()}}var Xw=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.http=i,this.authService=o,this.userHasGroup=!1}ngOnInit(){return v(this,null,function*(){yield this.loadCurrentUser(),this.currentUser&&this.currentUser._id_grupos_VV!==void 0?(this.userHasGroup=!0,this.router.url==="/group"&&this.router.navigate(["/migrupo"])):this.userHasGroup=!1})}loadCurrentUser(){return v(this,null,function*(){try{let r=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")),i=this.authService.getUsername(),o=Object.entries(r||{});for(let[s,a]of o)if(a.username===i){this.currentUser=a;break}}catch(r){console.error("Error al cargar los usuarios:",r),alert("Error al cargar los usuarios")}})}navigateTo(r){r==="migrupo"&&!this.userHasGroup?alert("No perteneces a ning\xFAn grupo."):this.router.navigate([`/${r}`])}};e.\u0275fac=function(i){return new(i||e)(b(Ue),b(pe),b(Pe))},e.\u0275cmp=z({type:e,selectors:[["app-group"]],decls:17,vars:1,consts:[[1,"container","text-center","mt-5","p-5","custom-container"],[1,"d-flex","justify-content-center","mt-4"],[1,"button-group","mx-3"],[1,"btn","btn-primary","group-button",3,"click"],["class","button-group mx-3",4,"ngIf"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"h1"),g(2,"GRUPOS"),f(),h(3,"h3"),g(4," \xA1\xDAnete a otros participantes para enriquecer tu experiencia! "),f(),h(5,"h5"),g(6," Puedes a\xF1adirte a un grupo ya creado por otros o formar el tuyo propio. Tendr\xE1s acceso al progreso general de los dem\xE1s. "),f(),h(7,"h5"),g(8," Si te quedas atascado, \xA1ya sabr\xE1s a quien pedir ayuda! "),f(),h(9,"div",1)(10,"div",2)(11,"button",3),O("click",function(){return o.navigateTo("creargrupo")}),g(12,"CREAR GRUPO"),f()(),h(13,"div",2)(14,"button",3),O("click",function(){return o.navigateTo("buscargrupo")}),g(15,"BUSCAR GRUPO"),f()(),q(16,bV,3,0,"div",4),f()()),i&2&&(y(16),M("ngIf",o.userHasGroup))},styles:[".container-fluid[_ngcontent-%COMP%]{width:100%;padding:0}.custom-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;box-shadow:0 4px 8px #0000001a}.group-button[_ngcontent-%COMP%]{background-color:#a3d8d4;color:#000;border:none;padding:20px 40px;border-radius:10px;font-size:20px;cursor:pointer}.group-button[_ngcontent-%COMP%]:hover{background-color:#91cfc9}.button-group[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}h1[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}"]});let t=e;return t})();function wV(t,e){if(t&1){let n=Le();h(0,"div",5)(1,"label",18),g(2,"Contrase\xF1a"),f(),h(3,"input",19),Oe("ngModelChange",function(i){Ce(n);let o=k();return Ve(o.contrasena,i)||(o.contrasena=i),Ie(i)}),f()()}if(t&2){let n=k();y(3),Re("ngModel",n.contrasena)}}var eC=(()=>{let e=class e{constructor(r,i,o){this.http=r,this.authService=i,this.router=o,this.groupName="",this.public=!0,this.sizeGroup=10,this.contrasena="",this.grupos=[],this.users={},this.userName="",this.loadGrupos(),this.loadUsers(),this.userName=this.authService.getUsername()}loadGrupos(){return v(this,null,function*(){try{let r=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/grupos_VV.json"));this.grupos=r?Object.values(r).filter(i=>i!==null&&i._id_grupos_VV!==void 0&&i._id_grupos_VV!==null):[]}catch(r){console.error("Error al cargar los grupos:",r),alert("Error al cargar los grupos")}})}loadUsers(){return v(this,null,function*(){try{let r=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json"));this.users=r||{};let i=Object.entries(this.users);for(let[o,s]of i)if(s.username===this.userName){this.currentUser=s,this.currentUserKey=o;break}}catch(r){console.error("Error al cargar los usuarios:",r),alert("Error al cargar los usuarios")}})}crearGrupo(){return v(this,null,function*(){if(!this.groupName){alert("El nombre del grupo es obligatorio");return}if(!this.public&&!this.contrasena){alert("La contrase\xF1a es obligatoria para grupos privados");return}if(this.currentUser&&this.currentUser._id_grupos_VV!==void 0){alert("Ya perteneces a un grupo.");return}let r=this.grupos.filter(s=>s&&s._id_grupos_VV!==void 0&&s._id_grupos_VV!==null).map(s=>s._id_grupos_VV).sort((s,a)=>s-a),i=1;for(let s of r)if(s===i)i++;else break;let o={_id_grupos_VV:i,groupName:this.groupName,size:this.sizeGroup,public:this.public,groupPass:this.public?void 0:this.contrasena,members:this.userName};this.grupos.push(o);try{yield ee(this.http.put("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/grupos_VV.json",this.grupos)),this.currentUserKey&&this.currentUser&&(yield ee(this.http.patch(`https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register/${this.currentUserKey}.json`,{_id_grupos_VV:i})),this.currentUser._id_grupos_VV=i),alert("Grupo creado exitosamente"),this.groupName="",this.contrasena="",this.router.navigate(["//migrupo"])}catch(s){console.error("Error al guardar el grupo:",s),alert("Error al crear el grupo")}})}};e.\u0275fac=function(i){return new(i||e)(b(pe),b(Pe),b(Ue))},e.\u0275cmp=z({type:e,selectors:[["app-crear"]],standalone:!0,features:[te],decls:58,vars:10,consts:[[1,"container-fluid","no-padding"],[1,"row","no-margin"],[1,"col-md-4","no-margin"],[1,"p-3","bg-light","custom-card","no-margin"],[1,"col-md-8","no-margin"],[1,"form-group"],["for","groupName"],["type","text","id","groupName","placeholder","Escriba aqu\xED...","name","groupName","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","radio","id","publico","name","public","required","",3,"ngModelChange","ngModel","value"],["for","publico"],["type","radio","id","privado","name","public","required","",3,"ngModelChange","ngModel","value"],["for","privado"],["type","radio","id","size5","name","sizeGroup","required","",3,"ngModelChange","ngModel","value"],["for","size5"],["type","radio","id","size10","name","sizeGroup","required","",3,"ngModelChange","ngModel","value"],["for","size10"],["class","form-group",4,"ngIf"],["type","button",1,"btn","btn-primary","custom-btn","mt-3",3,"click"],["for","contrasena"],["type","password","id","contrasena","placeholder","Escriba aqu\xED...","name","contrasena",1,"form-control",3,"ngModelChange","ngModel"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),g(5,"AYUDA"),f(),h(6,"ul")(7,"li")(8,"strong"),g(9,"TIPO DE GRUPO:"),f(),h(10,"p"),g(11," Grupo p\xFAblico: cualquier persona podr\xE1 acceder de forma p\xFAblica y formar parte del grupo. "),f(),h(12,"p"),g(13," Grupo privado: S\xF3lo podr\xE1n acceder aquellas personas que tengan la contrase\xF1a. "),f()(),h(14,"li")(15,"strong"),g(16,"TAMA\xD1O DE GRUPO:"),f(),h(17,"p"),g(18," Podr\xE1s seleccionar entre 2 opciones de tama\xF1o: 5 participantes o 10 participantes. "),f()(),h(19,"li")(20,"strong"),g(21,"CONTRASE\xD1A:"),f(),h(22,"p"),g(23,"S\xF3lo tendr\xE1n contrase\xF1as los grupos privados."),f()()()()(),h(24,"div",4)(25,"div",3)(26,"h5"),g(27,"FORMULARIO CREACI\xD3N DE GRUPO"),f(),h(28,"form")(29,"div",5)(30,"label",6),g(31,"Nombre de grupo"),f(),h(32,"input",7),Oe("ngModelChange",function(a){return Ve(o.groupName,a)||(o.groupName=a),a}),f()(),h(33,"div",5)(34,"label"),g(35,"Tipo de grupo"),f(),R(36,"br"),h(37,"input",8),Oe("ngModelChange",function(a){return Ve(o.public,a)||(o.public=a),a}),f(),h(38,"label",9),g(39,"Grupo p\xFAblico"),f(),R(40,"br"),h(41,"input",10),Oe("ngModelChange",function(a){return Ve(o.public,a)||(o.public=a),a}),f(),h(42,"label",11),g(43,"Grupo privado"),f()(),h(44,"div",5)(45,"label"),g(46,"Tama\xF1o del grupo"),f(),R(47,"br"),h(48,"input",12),Oe("ngModelChange",function(a){return Ve(o.sizeGroup,a)||(o.sizeGroup=a),a}),f(),h(49,"label",13),g(50,"5 participantes"),f(),R(51,"br"),h(52,"input",14),Oe("ngModelChange",function(a){return Ve(o.sizeGroup,a)||(o.sizeGroup=a),a}),f(),h(53,"label",15),g(54,"10 participantes"),f()(),q(55,wV,4,1,"div",16),h(56,"button",17),O("click",function(){return o.crearGrupo()}),g(57," CREAR GRUPO "),f()()()()()()),i&2&&(y(32),Re("ngModel",o.groupName),y(5),Re("ngModel",o.public),M("value",!0),y(4),Re("ngModel",o.public),M("value",!1),y(7),Re("ngModel",o.sizeGroup),M("value",5),y(4),Re("ngModel",o.sizeGroup),M("value",10),y(3),M("ngIf",!o.public))},dependencies:[me,Qe,Rt,yo,ln,rp,hr,_o,Bs,Mn,Zr],styles:[".custom-card[_ngcontent-%COMP%]{background-color:#fffc;border-radius:8px;box-shadow:0 4px 8px #0000001a;padding:20px}h5[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]{border:1px solid #4caf50;border-radius:5px}.custom-btn[_ngcontent-%COMP%]{background-color:#4caf50;border:none;padding:10px 20px;font-size:16px;width:auto}.custom-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}.no-margin[_ngcontent-%COMP%]{margin:0}.container-fluid.no-padding[_ngcontent-%COMP%]{padding:0}"]});let t=e;return t})();function CV(t,e){if(t&1){let n=Le();h(0,"div",28),O("click",function(){let i=Ce(n).$implicit,o=k();return Ie(o.selectGroup(i))}),h(1,"div",25),g(2),f(),h(3,"div",25),g(4),f(),h(5,"div",25),g(6),f()()}if(t&2){let n=e.$implicit,r=k();zh("id",n.data._id_grupos_VV),y(2),Dn(n.data.groupName),y(2),rr(" Tama\xF1o del grupo: ",r.getMemberCount(n.data)," / ",n.data.size," participantes "),y(2),Z(" ",n.data.public?"Grupo p\xFAblico":"Grupo privado"," ")}}function IV(t,e){if(t&1){let n=Le();h(0,"div",5)(1,"label",29),g(2,"Contrase\xF1a del Grupo"),f(),h(3,"input",30),Oe("ngModelChange",function(i){Ce(n);let o=k();return Ve(o.groupPasswordInput,i)||(o.groupPasswordInput=i),Ie(i)}),f()()}if(t&2){let n=k();y(3),Re("ngModel",n.groupPasswordInput)}}var tC=(()=>{let e=class e{constructor(r,i,o){this.http=r,this.authService=i,this.router=o,this.groupName="",this.sizeGroup="both",this.public="both",this.groupPasswordInput="",this.grupos=[],this.filteredGrupos=[],this.selectedGroup=null}ngOnInit(){return v(this,null,function*(){yield this.loadGrupos(),yield this.loadCurrentUser()})}loadGrupos(){return v(this,null,function*(){try{let r=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/grupos_VV.json"));this.grupos=r?Object.entries(r).map(([i,o])=>({key:i,data:o})):[]}catch(r){console.error("Error al cargar los grupos:",r),alert("Error al cargar los grupos")}})}loadCurrentUser(){return v(this,null,function*(){try{let r=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")),i=this.authService.getUsername(),o=Object.entries(r||{});for(let[s,a]of o)if(a.username===i){this.currentUser=a,this.currentUserKey=s;break}}catch(r){console.error("Error al cargar los usuarios:",r),alert("Error al cargar los usuarios")}})}buscarGrupos(){this.filteredGrupos=this.grupos.filter(({data:r})=>{let i=!this.groupName||r.groupName.toLowerCase().includes(this.groupName.toLowerCase()),o=this.sizeGroup==="both"||r.size===this.sizeGroup,s=this.public==="both"||r.public===this.public;return i&&o&&s})}getMemberCount(r){return r.members?r.members.split(", ").length:0}selectGroup(r){this.selectedGroup=r,document.querySelectorAll(".table-row").forEach(s=>s.classList.remove("selected"));let o=document.getElementById(r.data._id_grupos_VV.toString());o&&o.classList.add("selected")}joinGroup(){return v(this,null,function*(){if(!this.selectedGroup){alert("Por favor, selecciona un grupo primero");return}if(this.currentUser&&this.currentUser._id_grupos_VV!==void 0){alert("Ya perteneces a un grupo.");return}let r=this.selectedGroup.data.members?this.selectedGroup.data.members.split(", "):[];if(r.length>=this.selectedGroup.data.size){alert("El grupo ya est\xE1 lleno.");return}if(!this.selectedGroup.data.public&&this.selectedGroup.data.groupPass!==this.groupPasswordInput){alert("Contrase\xF1a incorrecta.");return}try{this.currentUserKey&&this.currentUser&&(yield ee(this.http.patch(`https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register/${this.currentUserKey}.json`,{_id_grupos_VV:this.selectedGroup.data._id_grupos_VV})),this.currentUser._id_grupos_VV=this.selectedGroup.data._id_grupos_VV,r.push(this.currentUser.username),yield ee(this.http.patch(`https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/grupos_VV/${this.selectedGroup.key}.json`,{members:r.join(", ")})),alert("Te has unido al grupo exitosamente"),this.router.navigate(["/migrupo"]))}catch(i){console.error("Error al unirse al grupo:",i),alert("Error al unirse al grupo")}})}setSize(r){this.sizeGroup=r}setPublic(r){this.public=r}};e.\u0275fac=function(i){return new(i||e)(b(pe),b(Pe),b(Ue))},e.\u0275cmp=z({type:e,selectors:[["app-buscar"]],standalone:!0,features:[te],decls:61,vars:3,consts:[[1,"container-fluid","no-padding"],[1,"row","no-margin"],[1,"col-md-4","no-margin"],[1,"p-3","bg-light","custom-card","no-margin"],["type","text","placeholder","Escriba aqu\xED...",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["for","groupSize"],["type","radio","id","size5","name","groupSize",3,"change"],["for","size5"],["type","radio","id","size10","name","groupSize",3,"change"],["for","size10"],["type","radio","id","sizeBoth","name","groupSize","checked","",3,"change"],["for","sizeBoth"],["for","groupType"],["type","radio","id","public","name","groupType",3,"change"],["for","public"],["type","radio","id","private","name","groupType",3,"change"],["for","private"],["type","radio","id","both","name","groupType","checked","",3,"change"],["for","both"],[1,"d-flex","justify-content-center","mt-3"],["type","button",1,"btn","btn-primary","custom-btn",3,"click"],[1,"col-md-8","no-margin"],[1,"table-container"],[1,"table-row","table-header"],[1,"table-cell"],["class","table-row",3,"id","click",4,"ngFor","ngForOf"],["class","mt-3",4,"ngIf"],[1,"table-row",3,"click","id"],["for","groupPasswordInput"],["type","password","id","groupPasswordInput","placeholder","Introduce la contrase\xF1a del grupo",1,"form-control",3,"ngModelChange","ngModel"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),g(5,"BUSCAR GRUPOS"),f(),h(6,"input",4),Oe("ngModelChange",function(a){return Ve(o.groupName,a)||(o.groupName=a),a}),f(),h(7,"div",5)(8,"label",6)(9,"strong"),g(10,"Tama\xF1o del grupo:"),f()(),R(11,"br"),h(12,"div")(13,"input",7),O("change",function(){return o.setSize(5)}),f(),h(14,"label",8),g(15,"5"),f()(),h(16,"div")(17,"input",9),O("change",function(){return o.setSize(10)}),f(),h(18,"label",10),g(19,"10"),f()(),h(20,"div")(21,"input",11),O("change",function(){return o.setSize("both")}),f(),h(22,"label",12),g(23,"Ambos"),f()()(),h(24,"div",5)(25,"label",13)(26,"strong"),g(27,"Tipo de grupo:"),f()(),R(28,"br"),h(29,"div")(30,"input",14),O("change",function(){return o.setPublic(!0)}),f(),h(31,"label",15),g(32,"P\xFAblico"),f()(),h(33,"div")(34,"input",16),O("change",function(){return o.setPublic(!1)}),f(),h(35,"label",17),g(36,"Privado"),f()(),h(37,"div")(38,"input",18),O("change",function(){return o.setPublic("both")}),f(),h(39,"label",19),g(40,"Ambos"),f()()(),h(41,"div",20)(42,"button",21),O("click",function(){return o.buscarGrupos()}),g(43," REALIZAR B\xDASQUEDA "),f()()()(),h(44,"div",22)(45,"div",3)(46,"h5"),g(47,"LISTA DE GRUPOS"),f(),h(48,"div",23)(49,"div",24)(50,"div",25),g(51,"NOMBRE GRUPO"),f(),h(52,"div",25),g(53,"TAMA\xD1O DEL GRUPO"),f(),h(54,"div",25),g(55,"TIPO DE GRUPO"),f()(),q(56,CV,7,5,"div",26),f(),q(57,IV,4,1,"div",27),h(58,"div",20)(59,"button",21),O("click",function(){return o.joinGroup()}),g(60," UNIRSE AL GRUPO "),f()()()()()()),i&2&&(y(6),Re("ngModel",o.groupName),y(50),M("ngForOf",o.filteredGrupos),y(),M("ngIf",o.selectedGroup&&!o.selectedGroup.data.public))},dependencies:[me,Mt,Qe,Rt,ln,hr,Mn],styles:[".custom-card[_ngcontent-%COMP%]{background-color:#fffc;border-radius:8px;box-shadow:0 4px 8px #0000001a;padding:20px;margin:10px}h5[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]{border:1px solid #4caf50;border-radius:5px;margin-bottom:10px}.custom-btn[_ngcontent-%COMP%]{background-color:#4caf50;border:none;padding:10px 20px;font-size:16px;width:auto}.custom-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}.no-margin[_ngcontent-%COMP%]{margin:0}.container-fluid.no-padding[_ngcontent-%COMP%]{padding:0}.table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.table-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px;background-color:#fffc;border-radius:5px;cursor:pointer}.table-header[_ngcontent-%COMP%]{font-weight:700;background-color:#f5f5f5;cursor:default}.table-row.selected[_ngcontent-%COMP%]{background-color:#78a890}.table-cell[_ngcontent-%COMP%]{flex:1;text-align:center}.table-cell[_ngcontent-%COMP%]:nth-child(1){text-align:left}.table-cell[_ngcontent-%COMP%]:nth-child(3){text-align:right}"]});let t=e;return t})();function DV(t,e){if(t&1){let n=Le();h(0,"div",26)(1,"img",27),O("click",function(){let i=Ce(n).$implicit,o=k();return Ie(o.selectProfileImage(i.url))}),f()()}if(t&2){let n=e.$implicit;y(),M("src",n.url,At)}}var nC=(()=>{let e=class e{constructor(r,i,o,s){this.http=r,this.authService=i,this.router=o,this.imageService=s,this.currentUser=null,this.currentGroupName=null,this.imageList=[]}ngOnInit(){this.loadCurrentUser(),this.loadImageGallery()}loadCurrentUser(){return v(this,null,function*(){let r=this.authService.getUsername();if(r)try{let i=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")),o=Object.values(i);this.currentUser=o.find(s=>s.username===r)||null,this.currentUser&&this.currentUser._id_grupos_VV!==void 0&&(yield this.loadGroupName(this.currentUser._id_grupos_VV))}catch(i){console.error("Error al cargar los usuarios:",i),alert("Error al cargar los usuarios")}})}loadGroupName(r){return v(this,null,function*(){try{let i=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/grupos_VV.json")),s=(i?Object.entries(i).map(([a,c])=>({key:a,data:c})):[]).find(a=>a.data._id_grupos_VV===r);s&&(this.currentGroupName=s.data.groupName)}catch(i){console.error("Error al cargar los grupos:",i),alert("Error al cargar los grupos")}})}loadImageGallery(){return v(this,null,function*(){try{let r=yield this.imageService.getImagesProfile();this.imageList=r.map(i=>({name:i.substring(i.lastIndexOf("/")+1,i.indexOf("?")),url:i}))}catch(r){console.error("Error al cargar la galer\xEDa de im\xE1genes:",r)}})}selectProfileImage(r){return v(this,null,function*(){if(this.currentUser){this.currentUser.profileImage=r;try{let i=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")),o=Object.entries(i).find(([s,a])=>a.username===this.authService.getUsername());if(o){let[s]=o;yield ee(this.http.patch(`https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register/${s}.json`,{profileImage:r})),alert("Imagen de perfil actualizada exitosamente")}}catch(i){console.error("Error al actualizar la imagen de perfil:",i),alert("Error al actualizar la imagen de perfil")}}})}navigateToGroup(){this.currentGroupName?this.router.navigate(["/migrupo"]):this.router.navigate(["/group"])}navigateToRetos(){this.router.navigate(["/retos"])}};e.\u0275fac=function(i){return new(i||e)(b(pe),b(Pe),b(Ue),b(br))},e.\u0275cmp=z({type:e,selectors:[["app-userprofile"]],standalone:!0,features:[te],decls:56,vars:9,consts:[[1,"container-fluid","no-padding"],[1,"row","no-margin"],[1,"col-md-4","no-margin"],[1,"p-3","bg-light","custom-card","no-margin"],[1,"text-center","image-container"],["alt","User Avatar",1,"img-fluid","rounded-circle","mb-3",3,"src"],["data-bs-toggle","modal","data-bs-target","#imageGalleryModal",1,"change-image-text"],[1,"user-info"],[1,"mb-4"],[1,"d-grid","gap-2"],[1,"btn","btn-primary","btn-block",3,"click"],[1,"bi","bi-people-fill"],[1,"bi","bi-folder-fill"],[1,"col-md-8","no-margin"],[1,"row"],[1,"col-md-6"],["id","imageGalleryModal","tabindex","-1","role","dialog","aria-labelledby","imageGalleryModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","imageGalleryModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["class","col-4",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"col-4"],["alt","Profile Image",1,"img-thumbnail",3,"click","src"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),R(5,"img",5),h(6,"div",6),g(7," Cambiar Imagen "),f()(),h(8,"div",7)(9,"h2",8),g(10),f()(),h(11,"div",9)(12,"a",10),O("click",function(){return o.navigateToRetos()}),R(13,"i",11),g(14," MIS RETOS "),f(),h(15,"a",10),O("click",function(){return o.navigateToGroup()}),R(16,"i",12),g(17," MI GRUPO "),f()()()(),h(18,"div",13)(19,"div",3)(20,"h3",8),g(21,"INFORMACI\xD3N DE USUARIO"),f(),h(22,"div",14)(23,"div",15)(24,"h5"),g(25,"INFORMACI\xD3N"),f(),h(26,"ul")(27,"li"),g(28),f(),h(29,"li"),g(30),f(),h(31,"li"),g(32),f(),h(33,"li"),g(34),f()()(),h(35,"div",15)(36,"h5"),g(37,"RETOS"),f(),h(38,"ul")(39,"li"),g(40),f(),h(41,"li"),g(42),f()()()()()(),h(43,"div",16)(44,"div",17)(45,"div",18)(46,"div",19)(47,"h5",20),g(48," Seleccionar Imagen de Perfil "),f(),R(49,"button",21),f(),h(50,"div",22)(51,"div",14),q(52,DV,2,1,"div",23),f()(),h(53,"div",24)(54,"button",25),g(55," Cerrar "),f()()()()()()()),i&2&&(y(5),M("src",(o.currentUser==null?null:o.currentUser.profileImage)||"https://firebasestorage.googleapis.com/v0/b/verdeventura-db.appspot.com/o/imgUser%2Fdefault.jpeg?alt=media&token=8729918d-308a-45be-a289-8b6992e62ebd",At),y(5),Dn(o.currentUser==null?null:o.currentUser.username),y(18),Z("C\xF3digo Postal: ",o.currentUser==null?null:o.currentUser.cp,""),y(2),Z("e-mail: ",o.currentUser==null?null:o.currentUser.email,""),y(2),Z("Nombre de usuario: ",o.currentUser==null?null:o.currentUser.username,""),y(2),Z("Fecha de creaci\xF3n: ",o.currentUser==null?null:o.currentUser.created,""),y(6),Z("Verdecitos: ",o.currentUser==null?null:o.currentUser.points,""),y(2),Z(" Grupo al que perteneces: ",o.currentGroupName?o.currentGroupName:"A\xFAn no perteneces a ning\xFAn grupo."," "),y(10),M("ngForOf",o.imageList))},dependencies:[me,Mt],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Arial,sans-serif}.container-fluid[_ngcontent-%COMP%]{width:100%;padding:0}.bg-light[_ngcontent-%COMP%]{background-color:#eaf7f7}.p-3[_ngcontent-%COMP%]{padding:1rem!important}.rounded[_ngcontent-%COMP%]{border-radius:.25rem!important}.shadow[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026!important}.img-fluid[_ngcontent-%COMP%]{max-width:100%;height:auto}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.8}.custom-card[_ngcontent-%COMP%]{background-color:#fffc;border-radius:8px;box-shadow:0 4px 8px #0000001a;padding:20px;margin:10px}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]{border:1px solid #4caf50;border-radius:5px;margin-bottom:10px}.custom-btn[_ngcontent-%COMP%]{background-color:#4caf50;border:none;padding:10px 20px;font-size:16px;width:auto}.custom-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}.no-margin[_ngcontent-%COMP%]{margin:0}.container-fluid.no-padding[_ngcontent-%COMP%]{padding:0}.image-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;transition:opacity .3s}.image-container[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:.7}.change-image-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-weight:700;opacity:0;transition:opacity .3s}.image-container[_ngcontent-%COMP%]:hover   .change-image-text[_ngcontent-%COMP%]{opacity:1;cursor:pointer}.user-info[_ngcontent-%COMP%]{text-align:center}.list-unstyled[_ngcontent-%COMP%]{padding-left:0}.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;align-items:center}.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#333;text-decoration:none}.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.nav-link[_ngcontent-%COMP%]{cursor:pointer}"]});let t=e;return t})();function SV(t,e){if(t&1&&(h(0,"div",6)(1,"span"),g(2),f()()),t&2){let n=e.$implicit,r=k();y(),$r("width",r.getUserPoints(n)/r.getMaxPoints()*100,"%"),y(),rr(" ",n," - ",r.getUserPoints(n)," ")}}function TV(t,e){if(t&1&&(h(0,"div",6)(1,"span"),g(2),f()()),t&2){let n=e.$implicit,r=k();y(),$r("width",r.getUserLocPoints(n)/r.getMaxLocPoints()*100,"%"),y(),rr(" ",n," - ",r.getUserLocPoints(n)," ")}}var rC=(()=>{let e=class e{constructor(r,i,o){this.http=r,this.authService=i,this.router=o,this.grupoActual=null,this.membersPoints={},this.locationPoints={}}ngOnInit(){return v(this,null,function*(){yield this.loadCurrentUser(),this.currentUser&&(this.currentUser._id_grupos_VV!==void 0&&(yield this.loadUserGroup(this.currentUser._id_grupos_VV),yield this.loadMembersPoints()),this.currentUser.cp&&(yield this.loadUsersLocationPoints(this.currentUser.cp)))})}loadCurrentUser(){return v(this,null,function*(){try{let r=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")),i=this.authService.getUsername(),o=Object.entries(r||{});for(let[s,a]of o)if(a.username===i){this.currentUser=a,this.currentUserKey=s;break}}catch(r){console.error("Error al cargar los usuarios:",r),alert("Error al cargar los usuarios")}})}loadUserGroup(r){return v(this,null,function*(){try{let i=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/grupos_VV.json")),o=Object.entries(i||{});for(let[s,a]of o)if(a._id_grupos_VV===r){this.grupoActual={key:s,data:a};break}}catch(i){console.error("Error al cargar el grupo del usuario:",i),alert("Error al cargar el grupo del usuario")}})}loadMembersPoints(){return v(this,null,function*(){if(!this.grupoActual||!this.grupoActual.data.members)return;let r=this.grupoActual.data.members.split(", ");for(let i of r)try{let o=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")),s=Object.entries(o||{});for(let[a,c]of s)if(c.username===i){this.membersPoints[i]=c.points;break}}catch(o){console.error(`Error al cargar los puntos del usuario ${i}:`,o)}})}leaveGroup(){return v(this,null,function*(){if(!(!this.currentUser||!this.currentUserKey||!this.grupoActual))try{yield ee(this.http.patch(`https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register/${this.currentUserKey}.json`,{_id_grupos_VV:null})),this.currentUser._id_grupos_VV=void 0;let i=(this.grupoActual.data.members?this.grupoActual.data.members.split(", "):[]).filter(o=>o!==this.currentUser.username);yield ee(this.http.patch(`https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/grupos_VV/${this.grupoActual.key}.json`,{members:i.join(", ")})),alert("Has dejado el grupo exitosamente"),this.grupoActual=null,this.router.navigate(["/group"])}catch(r){console.error("Error al dejar el grupo:",r),alert("Error al dejar el grupo")}})}getUserPoints(r){return this.membersPoints[r]||0}getTotalGroupPoints(){return Object.values(this.membersPoints).reduce((r,i)=>r+i,0)}getMaxPoints(){return Math.max(...Object.values(this.membersPoints))}getRanking(){return Object.keys(this.membersPoints).sort((r,i)=>this.membersPoints[i]-this.membersPoints[r])}loadUsersLocationPoints(r){return v(this,null,function*(){try{let i=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")),o=Object.entries(i||{});for(let[s,a]of o)a.cp===r&&(this.locationPoints[a.username]=a.points)}catch(i){console.error("Error al cargar los usuarios por CP:",i),alert("Error al cargar los usuarios por CP")}})}getUserLocPoints(r){return this.locationPoints[r]||0}getTotalLocationPoints(){return Object.values(this.locationPoints).reduce((r,i)=>r+i,0)}getMaxLocPoints(){return Math.max(...Object.values(this.locationPoints))}getLocRanking(){return Object.keys(this.locationPoints).sort((r,i)=>this.locationPoints[i]-this.locationPoints[r])}};e.\u0275fac=function(i){return new(i||e)(b(pe),b(Pe),b(Ue))},e.\u0275cmp=z({type:e,selectors:[["app-ranking"]],standalone:!0,features:[te],decls:24,vars:4,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-6"],[1,"p-3","bg-light","custom-card"],[1,"progress-bar-container"],["class","progress-bar",4,"ngFor","ngForOf"],[1,"progress-bar"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),g(5,"RANKING MIEMBROS"),f(),h(6,"div",4),q(7,SV,3,4,"div",5),f(),R(8,"br"),h(9,"h5"),g(10,"VERDECITOS TOTALES GRUPO"),f(),h(11,"p"),g(12),f()()(),h(13,"div",2)(14,"div",3)(15,"h5"),g(16,"RANKING USUARIOS - C\xD3DIGO POSTAL"),f(),h(17,"div",4),q(18,TV,3,4,"div",5),f(),R(19,"br"),h(20,"h5"),g(21,"VERDECITOS TOTALES GRUPO"),f(),h(22,"p"),g(23),f()()()()()),i&2&&(y(7),M("ngForOf",o.getRanking()),y(5),Z("",o.getTotalGroupPoints()," Verdecitos"),y(6),M("ngForOf",o.getLocRanking()),y(5),Z("",o.getTotalLocationPoints()," Verdecitos"))},dependencies:[me,Mt],styles:[".custom-card[_ngcontent-%COMP%]{background-color:#fffc;border-radius:8px;box-shadow:0 4px 8px #0000001a;padding:20px;margin:10px}h5[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]{border:1px solid #4caf50;border-radius:5px;margin-bottom:10px}.custom-btn[_ngcontent-%COMP%]{background-color:#4caf50;border:none;padding:10px 20px;font-size:16px;width:auto}.custom-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}.no-margin[_ngcontent-%COMP%]{margin:0}.container-fluid.no-padding[_ngcontent-%COMP%]{padding:0}.table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.table-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px;background-color:#fffc;border-radius:5px;cursor:pointer}.table-header[_ngcontent-%COMP%]{font-weight:700;background-color:#f5f5f5;cursor:default}.table-row.selected[_ngcontent-%COMP%]{background-color:#e0f7fa}.table-cell[_ngcontent-%COMP%]{flex:1;text-align:center}.table-cell[_ngcontent-%COMP%]:nth-child(1){text-align:left}.table-cell[_ngcontent-%COMP%]:nth-child(3){text-align:right}.progress-bar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.progress-bar[_ngcontent-%COMP%]{background-color:#e0f7fa;border-radius:5px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:20px;background-color:#4caf50;border-radius:5px;text-align:center;color:#fff}.change-image-btn[_ngcontent-%COMP%]{display:block;margin:10px auto 0}"]});let t=e;return t})();function AV(t,e){if(t&1&&(h(0,"div",8)(1,"h2"),g(2,"NUESTRO OBJETIVO"),f(),h(3,"p"),g(4," El objetivo principal de verdeVentura es fomentar una cultura de sostenibilidad y responsabilidad ambiental a trav\xE9s de la gamificaci\xF3n. La plataforma est\xE1 dise\xF1ada para involucrar a los usuarios en actividades que promuevan los Objetivos de Desarrollo Sostenible (ODS), incentivando cambios positivos en sus comportamientos y h\xE1bitos diarios. Al ofrecer retos sostenibles y objetivos puntuables, verdeVentura busca educar, motivar e inspirar a las personas a tomar acciones concretas que beneficien tanto al medio ambiente como a la sociedad. "),f(),h(5,"p"),g(6," Una de las metas clave de verdeVentura es aumentar la concienciaci\xF3n sobre la importancia de los ODS y c\xF3mo cada individuo puede contribuir a su cumplimiento. Mediante la participaci\xF3n en retos, los usuarios aprenden sobre pr\xE1cticas sostenibles y la relevancia de cada objetivo, desde la reducci\xF3n de residuos y el uso eficiente de recursos hasta la promoci\xF3n de la igualdad y el bienestar social. Esta educaci\xF3n pr\xE1ctica y experiencial es esencial para internalizar los valores sostenibles y hacerlos parte integral de la vida cotidiana de los usuarios. "),f(),h(7,"p"),g(8," Adem\xE1s, verdeVentura se propone crear una comunidad activa y comprometida con la sostenibilidad. Al formar grupos y competir en un ranking, los usuarios no solo se motivan a s\xED mismos, sino que tambi\xE9n inspiran a otros a unirse a la causa. Este sentido de comunidad y colaboraci\xF3n es fundamental para generar un movimiento amplio y eficaz hacia un futuro m\xE1s sostenible. "),f(),h(9,"p"),g(10," Otro objetivo crucial de verdeVentura es demostrar que la sostenibilidad puede ser divertida y gratificante. Al incorporar elementos de juego, como la acumulaci\xF3n de Verdecitos y la competencia amistosa, la plataforma transforma tareas que de otro modo podr\xEDan parecer abrumadoras en actividades atractivas y desafiantes. Esto no solo aumenta la participaci\xF3n, sino que tambi\xE9n ayuda a mantener el inter\xE9s y el compromiso a largo plazo. "),f()()),t&2){let n=k();M("ngClass",n.animationClass)}}function MV(t,e){if(t&1&&(h(0,"div",9)(1,"h1",10),g(2,"FUNDADORES"),f(),h(3,"h4"),g(4," A continuaci\xF3n nos presentamos. Somos Alex, Jose y Aurora, tres personas que venian del mundo laboral, y buscaron llevar a cabo un reskilling de sus p\xE9rfiles profesional hac\xEDa el mundo del desarrollo y la programaci\xF3n web. Esta p\xE1gina web es la culminaci\xF3n de meses de esfuerzo y trabajo en equipo. "),f(),h(5,"h4",11),g(6,"\xA1Con\xF3cenos!"),f(),h(7,"div",12)(8,"div",13)(9,"h3"),g(10,"Alexandre Rom\xE1n D\xEDaz"),f(),R(11,"img",14),h(12,"p"),g(13," Junior Fullstack web developer. T\xE9cnico de Control de Calidad y No Conformidades. "),f(),h(14,"div",15)(15,"a",16),R(16,"i",17),f(),h(17,"a",18),R(18,"i",19),f()()(),h(19,"div",13)(20,"h3"),g(21,"Aurora Socorro Ruiz"),f(),R(22,"img",20),h(23,"p"),g(24,"Junior Fullstack web developer. Graduada en turismo."),f(),h(25,"div",15)(26,"a",21),R(27,"i",17),f(),h(28,"a",22),R(29,"i",19),f()()(),h(30,"div",13)(31,"h3"),g(32,"Jose Ram\xF3n Ruiz Aguilar"),f(),R(33,"img",23),h(34,"p"),g(35,"Junior Fullstack web developer. T\xE9cnico de laboratorio."),f(),h(36,"div",15)(37,"a",24),R(38,"i",17),f(),h(39,"a",25),R(40,"i",19),f()()()()()),t&2){let n=k();M("ngClass",n.animationClass)}}function xV(t,e){if(t&1&&(h(0,"div",26)(1,"h2"),g(2,"\xBFQU\xC9 ES VERDEVENTURA?"),f(),h(3,"p"),g(4," VerdeVentura es una innovadora plataforma social basada en la gamificaci\xF3n, dise\xF1ada para promover valores y actividades alineadas con los Objetivos de Desarrollo Sostenible (ODS). La plataforma ofrece un espacio din\xE1mico y atractivo donde los usuarios pueden participar en retos y cumplir objetivos sostenibles, todo dentro de un marco de tiempo espec\xEDfico. Estos retos, cuidadosamente dise\xF1ados, no solo fomentan la concienciaci\xF3n sobre la sostenibilidad, sino que tambi\xE9n motivan a los participantes a adoptar pr\xE1cticas responsables y ecol\xF3gicas en su vida diaria. "),f(),h(5,"p"),g(6," El funcionamiento de verdeVentura se basa en la formaci\xF3n de grupos de usuarios que compiten entre s\xED en un ranking. Cada grupo trabaja en conjunto para completar los retos propuestos, acumulando Verdecitos en funci\xF3n de su desempe\xF1o. Esta estructura competitiva no solo incentiva la participaci\xF3n activa, sino que tambi\xE9n crea un sentido de comunidad y colaboraci\xF3n entre los participantes, quienes comparten un objetivo com\xFAn: contribuir al bienestar del planeta. "),f(),h(7,"p"),g(8," Al finalizar el plazo de cada reto, los Verdecitos obtenidos por los grupos determinan su posici\xF3n en el ranking. Esta clasificaci\xF3n no solo refleja el compromiso y esfuerzo de los usuarios, sino que tambi\xE9n sirve como una herramienta de motivaci\xF3n para futuros retos, ya que los participantes buscan mejorar su rendimiento y alcanzar posiciones m\xE1s altas en el ranking. "),f(),h(9,"p"),g(10," VerdeVentura va m\xE1s all\xE1 de ser una simple aplicaci\xF3n de gamificaci\xF3n; es una herramienta educativa y transformadora que impulsa a sus usuarios a ser agentes de cambio. Al involucrar a las personas en actividades concretas y medibles, la plataforma ayuda a internalizar la importancia de los ODS y a poner en pr\xE1ctica acciones sostenibles que pueden tener un impacto positivo y duradero en el medio ambiente y la sociedad. "),f()()),t&2){let n=k();M("ngClass",n.animationClass)}}var iC=(()=>{let e=class e{constructor(){this.selectedSlide=1,this.previousSlide=1,this.currentView=1,this.animationClass="",this.contentAnimationClass=""}selectSlide(r){this.selectedSlide!==r&&(this.previousSlide=this.selectedSlide,this.selectedSlide=r,r>this.previousSlide?this.animationClass="animate__animated animate__backInRight":r<this.previousSlide&&(this.animationClass="animate__animated animate__backInLeft"),this.contentAnimationClass="animate__animated fadeOutCustom",setTimeout(()=>{this.animationClass=""},1e3),setTimeout(()=>{this.currentView=r,this.contentAnimationClass="animate__animated fadeInCustom",setTimeout(()=>{this.contentAnimationClass=""},500)},500))}getBackgroundClass(){return{[`background-slide-${this.selectedSlide}`]:!0,[this.animationClass]:!0}}getContentClass(){return{[this.contentAnimationClass]:!0}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=z({type:e,selectors:[["app-home"]],standalone:!0,features:[te],decls:13,vars:10,consts:[[1,"container-fluid","home-header"],["id","header",1,"overlay",3,"ngClass"],[1,"buttons"],[3,"click"],["id","contenido",1,"container-fluid","content-container","d-flex","flex-row"],["class","view content custom-view flex-fill","id","view1",3,"ngClass",4,"ngIf"],["class","view content custom-view flex-fill","id","view2",3,"ngClass",4,"ngIf"],["class","view content custom-view flex-fill","id","view3",3,"ngClass",4,"ngIf"],["id","view1",1,"view","content","custom-view","flex-fill",3,"ngClass"],["id","view2",1,"view","content","custom-view","flex-fill",3,"ngClass"],["id","title"],[1,"mb-4"],[1,"row"],[1,"col"],["src","/assets/1.png","alt","imagenAlexandre"],[1,"button-group"],["href","https://www.linkedin.com/in/alexandre-roman-diaz/","target","_blank",1,"btn","btn-primary","btn-lg"],[1,"bi","bi-linkedin"],["href","https://github.com/AchillesD9-Alex","target","_blank",1,"btn","btn-primary","btn-lg"],[1,"bi","bi-github"],["src","/assets/2.png","alt","imagenAurora"],["href","https://www.linkedin.com/in/aurora-socorro/","target","_blank",1,"btn","btn-primary","btn-lg"],["href","https://github.com/Anatagora","target","_blank",1,"btn","btn-primary","btn-lg"],["src","/assets/3.png","alt","imagenJoseRamon"],["href","https://www.linkedin.com/in/jose-ramon-ruiz-aguilar/","target","_blank",1,"btn","btn-primary","btn-lg"],["href","https://github.com/Jowser97","target","_blank",1,"btn","btn-primary","btn-lg"],["id","view3",1,"view","content","custom-view","flex-fill",3,"ngClass"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),O("click",function(){return o.selectSlide(1)}),g(4," 1 "),f(),h(5,"button",3),O("click",function(){return o.selectSlide(2)}),g(6," 2 "),f(),h(7,"button",3),O("click",function(){return o.selectSlide(3)}),g(8," 3 "),f()()()(),h(9,"div",4),q(10,AV,11,1,"div",5)(11,MV,41,1,"div",6)(12,xV,11,1,"div",7),f()),i&2&&(y(),M("ngClass",o.getBackgroundClass()),y(2),nr("selected",o.selectedSlide===1),y(2),nr("selected",o.selectedSlide===2),y(2),nr("selected",o.selectedSlide===3),y(3),M("ngIf",o.selectedSlide===1),y(),M("ngIf",o.selectedSlide===2),y(),M("ngIf",o.selectedSlide===3))},dependencies:[me,k0,Qe],styles:[".container-fluid[_ngcontent-%COMP%]{width:100%;padding:0}.home-header[_ngcontent-%COMP%]{height:45vh;position:relative}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-size:cover;background-position:center;display:flex;justify-content:center;align-items:flex-end;padding-bottom:20px;border-radius:8px}h1[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}.background-slide-1[_ngcontent-%COMP%]{background-image:url(/assets/fondohome1.jpeg)}.background-slide-2[_ngcontent-%COMP%]{background-image:url(/assets/fondohome2.jpeg)}.background-slide-3[_ngcontent-%COMP%]{background-image:url(/assets/fondohome3.jpeg)}.buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#78a890!important;border-color:#78a890!important;color:#fff!important;border:none;padding:10px;border-radius:50%;width:50px;height:50px;cursor:pointer;font-size:16px;display:flex;justify-content:center;align-items:center}.buttons[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%], .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#547766!important;border-color:#547766!important}.content[_ngcontent-%COMP%]{padding:20px;text-align:center}.custom-view[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a;text-align:center;margin:20px auto;width:100%}.custom-view[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}.custom-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333}#view2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}#title[_ngcontent-%COMP%]{margin-bottom:25px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-top:10px}.button-group[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;justify-content:center;align-items:center;text-align:center;padding:0;border-radius:8px}img[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}"]});let t=e;return t})();var oC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=z({type:e,selectors:[["app-guiaods"]],standalone:!0,features:[te],decls:121,vars:0,consts:[[1,"container-fluid"],[1,"row","justify-content-center"],[1,"row"],[1,"col-sm-3"],["id","sidebar",1,"p-3","bg-light","rounded","shadow","affix"],[1,"mb-4"],[1,"list-unstyled"],[1,"mb-3"],["href","/guiaods/#id1"],["href","/guiaods/#id2"],["href","/guiaods/#id3"],["href","/guiaods/#id4"],["href","/guiaods/#id5"],[1,"col-sm-9"],[1,"main-content","p-3","bg-light","rounded","shadow"],["id","id1"],["id","id2"],["id","id3"],["id","id4"],["id","id5"],["href","https://www.un.org/sustainabledevelopment/es/","target","_blank"],["href","https://www.undp.org/","target","_blank"],["href","https://www.mdsocialesa2030.gob.es/agenda2030/conoce_la_agenda.htm#:~:text=%C2%BFQu%C3%A9%20es%20la%20Agenda%202030,el%20acceso%20a%20la%20justicia.","target","_blank"],["href","https://www.unicef.org/es/unicef-y-los-objetivos-de-desarrollo-sostenible","target","_blank"],["href","https://www.worldbank.org/en/home","target","_blank"],["href","https://www.who.int/topics/sustainable-development-goals/es/","target","_blank"],["href","https://es.unesco.org/education2030-sdg4","target","_blank"],["href","https://www.fao.org/sustainable-development-goals-helpdesk/en","target","_blank"],["href","https://www.pactomundial.org/","target","_blank"],["href","https://ec.europa.eu/eurostat/web/sdi","target","_blank"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),g(7,"GUIA ODS"),f(),h(8,"ul",6)(9,"li",7)(10,"a",8),g(11,"\xBFQU\xC9 SON?"),f()(),h(12,"li",7)(13,"a",9),g(14,"Agenda 2030"),f()(),h(15,"li",7)(16,"a",10),g(17,"17 objetivos de desarrollo sostenible"),f()(),h(18,"li",7)(19,"a",11),g(20,"Datos estad\xEDsticos"),f()(),h(21,"li",7)(22,"a",12),g(23,"Enlaces de inter\xE9s"),f()()()()(),h(24,"div",13)(25,"div",14)(26,"h2",15),g(27,"\xBFQU\xC9 SON?"),f(),h(28,"p"),g(29," Los Objetivos de Desarrollo Sostenible (ODS) son un conjunto de 17 metas globales establecidas por la Asamblea General de las Naciones Unidas en 2015 como parte de la Agenda 2030 para el Desarrollo Sostenible. Estos objetivos se dise\xF1aron para abordar los desaf\xEDos m\xE1s apremiantes que enfrenta el mundo, incluyendo la pobreza, la desigualdad, el cambio clim\xE1tico, la degradaci\xF3n ambiental, la paz y la justicia. Los ODS son universales y aplicables a todos los pa\xEDses, independientemente de su nivel de desarrollo econ\xF3mico. Cada objetivo cuenta con metas espec\xEDficas que deben alcanzarse para 2030, fomentando una acci\xF3n conjunta de gobiernos, empresas, sociedad civil y ciudadanos para crear un mundo m\xE1s sostenible y equitativo. Los ODS tambi\xE9n buscan promover la prosperidad econ\xF3mica mientras protegen el planeta, asegurando que todas las personas puedan disfrutar de paz y prosperidad. "),f(),h(30,"h2",16),g(31,"AGENDA 2030"),f(),h(32,"p"),g(33," La Agenda 2030 para el Desarrollo Sostenible es un plan de acci\xF3n adoptado por los 193 Estados Miembros de las Naciones Unidas en septiembre de 2015. Este plan tiene como objetivo principal erradicar la pobreza en todas sus formas y dimensiones, algo que se considera un requisito indispensable para el desarrollo sostenible. La Agenda 2030 est\xE1 compuesta por 17 Objetivos de Desarrollo Sostenible (ODS) y 169 metas espec\xEDficas, que abordan cuestiones como la pobreza, la desigualdad, la salud, la educaci\xF3n, el cambio clim\xE1tico, la igualdad de g\xE9nero, el agua limpia y el saneamiento, entre otros. Estos objetivos est\xE1n interconectados y buscan equilibrar las tres dimensiones del desarrollo sostenible: la econ\xF3mica, la social y la ambiental. La Agenda 2030 es una llamada a la acci\xF3n para todos los pa\xEDses, fomentando la colaboraci\xF3n internacional y el compromiso colectivo para lograr un futuro sostenible para todos. "),f(),h(34,"h2",17),g(35,"17 OBJETIVOS DE DESARROLLO SOSTENIBLE"),f(),h(36,"ol")(37,"li"),g(38," Fin de la pobreza: Erradicar la pobreza en todas sus formas en todo el mundo. "),f(),h(39,"li"),g(40," Hambre cero: Poner fin al hambre, lograr la seguridad alimentaria y la mejora de la nutrici\xF3n, y promover la agricultura sostenible. "),f(),h(41,"li"),g(42," Salud y bienestar: Garantizar una vida sana y promover el bienestar para todos en todas las edades. "),f(),h(43,"li"),g(44," Educaci\xF3n de calidad: Garantizar una educaci\xF3n inclusiva, equitativa y de calidad, y promover oportunidades de aprendizaje durante toda la vida para todos. "),f(),h(45,"li"),g(46," Igualdad de g\xE9nero: Lograr la igualdad entre los g\xE9neros y empoderar a todas las mujeres y ni\xF1as. "),f(),h(47,"li"),g(48," Agua limpia y saneamiento: Garantizar la disponibilidad de agua y su gesti\xF3n sostenible y el saneamiento para todos. "),f(),h(49,"li"),g(50," Energ\xEDa asequible y no contaminante: Garantizar el acceso a una energ\xEDa asequible, segura, sostenible y moderna para todos. "),f(),h(51,"li"),g(52," Trabajo decente y crecimiento econ\xF3mico: Promover el crecimiento econ\xF3mico sostenido, inclusivo y sostenible, el empleo pleno y productivo, y el trabajo decente para todos. "),f(),h(53,"li"),g(54," Industria, innovaci\xF3n e infraestructura: Construir infraestructuras resilientes, promover la industrializaci\xF3n inclusiva y sostenible, y fomentar la innovaci\xF3n. "),f(),h(55,"li"),g(56," Reducci\xF3n de las desigualdades: Reducir la desigualdad en y entre los pa\xEDses. "),f(),h(57,"li"),g(58," Ciudades y comunidades sostenibles: Lograr que las ciudades y los asentamientos humanos sean inclusivos, seguros, resilientes y sostenibles. "),f(),h(59,"li"),g(60," Producci\xF3n y consumo responsables: Garantizar modalidades de consumo y producci\xF3n sostenibles. "),f(),h(61,"li"),g(62," Acci\xF3n por el clima: Adoptar medidas urgentes para combatir el cambio clim\xE1tico y sus efectos. "),f(),h(63,"li"),g(64," Vida submarina: Conservar y utilizar de forma sostenible los oc\xE9anos, los mares y los recursos marinos para el desarrollo sostenible. "),f(),h(65,"li"),g(66," Vida de ecosistemas terrestres: Gestionar sosteniblemente los bosques, luchar contra la desertificaci\xF3n, detener e invertir la degradaci\xF3n de las tierras, y detener la p\xE9rdida de biodiversidad. "),f(),h(67,"li"),g(68," Paz, justicia e instituciones s\xF3lidas: Promover sociedades pac\xEDficas e inclusivas para el desarrollo sostenible, facilitar el acceso a la justicia para todos, y construir instituciones eficaces, responsables e inclusivas a todos los niveles. "),f(),h(69,"li"),g(70," Alianzas para lograr los objetivos: Fortalecer los medios de implementaci\xF3n y revitalizar la Alianza Mundial para el Desarrollo Sostenible. "),f()(),h(71,"h2",18),g(72,"DATOS ESTAD\xCDSTICOS"),f(),h(73,"p"),g(74," Estos datos subrayan la urgencia y la escala de los desaf\xEDos que los ODS buscan abordar. "),f(),h(75,"ul")(76,"li"),g(77," Los ODS incluyen 169 metas espec\xEDficas y m\xE1s de 230 indicadores para medir el progreso hacia su consecuci\xF3n. "),f(),h(78,"li"),g(79," Aproximadamente 736 millones de personas a\xFAn viven en la pobreza extrema, sobreviviendo con menos de 1.90 d\xF3lares al d\xEDa. "),f(),h(80,"li"),g(81," La tasa de malnutrici\xF3n mundial sigue siendo alarmante, afectando a alrededor de 821 millones de personas. "),f(),h(82,"li"),g(83," Cada a\xF1o, alrededor de 5.9 millones de ni\xF1os menores de cinco a\xF1os mueren, y m\xE1s de 264 millones de ni\xF1os y j\xF3venes no asisten a la escuela. "),f(),h(84,"li"),g(85," En t\xE9rminos de igualdad de g\xE9nero, las mujeres representan solo el 39% de la fuerza laboral mundial, aunque realizan una cantidad desproporcionada de trabajo no remunerado. "),f(),h(86,"li"),g(87," En el \xE1mbito del medio ambiente, se estima que 7 millones de personas mueren anualmente debido a la contaminaci\xF3n del aire, y solo el 9% de todo el pl\xE1stico producido se ha reciclado. "),f()(),h(88,"h2",19),g(89,"ENLACES DE INTER\xC9S"),f(),h(90,"ol")(91,"li")(92,"a",20),g(93,"Naciones Unidas - Objetivos de Desarrollo Sostenible"),f()(),h(94,"li")(95,"a",21),g(96,"Programa de las Naciones Unidas para el Desarrollo (PNUD)"),f()(),h(97,"li")(98,"a",22),g(99,"Agenda 2030 en Espa\xF1a"),f()(),h(100,"li")(101,"a",23),g(102,"UNICEF - Objetivos de Desarrollo Sostenible"),f()(),h(103,"li")(104,"a",24),g(105,"Banco Mundial - ODS"),f()(),h(106,"li")(107,"a",25),g(108,"Organizaci\xF3n Mundial de la Salud (OMS) - ODS"),f()(),h(109,"li")(110,"a",26),g(111,"UNESCO - Educaci\xF3n 2030"),f()(),h(112,"li")(113,"a",27),g(114,"FAO - Objetivos de Desarrollo Sostenible"),f()(),h(115,"li")(116,"a",28),g(117,"Pacto Mundial de Naciones Unidas"),f()(),h(118,"li")(119,"a",29),g(120,"Eurostat - Seguimiento de los ODS"),f()()()()()()()()())},styles:[".p-3[_ngcontent-%COMP%]{border-radius:15px;box-shadow:0 4px 8px #0000001a}.p-4[_ngcontent-%COMP%]{border-radius:15px;box-shadow:0 4px 8px #0000001a;position:fixed;width:20%;max-width:600px}.main-content[_ngcontent-%COMP%]{border-radius:15px;box-shadow:0 4px 8px #0000001a;overflow-y:auto;padding-bottom:20px}.shadow[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a!important}#sidebar[_ngcontent-%COMP%]{border-radius:15px;box-shadow:0 4px 8px #0000001a;position:fixed;width:20%;max-width:600px}"]});let t=e;return t})();function NV(t,e){if(t&1&&R(0,"img",4),t&2){let n=e.$implicit;M("src",n,At)}}var sC=(()=>{let e=class e{constructor(r){this.imageService=r,this.images=[]}ngOnInit(){this.getImages()}uploadImage(r){let i=r.target.files[0];console.log(i),this.imageService.uploadImage(i).then(()=>this.getImages()).catch(o=>console.error("Error al subir la imagen:",o))}getImages(){this.imageService.getImages().then(r=>this.images=r).catch(r=>console.error("Error al obtener las im\xE1genes:",r))}};e.\u0275fac=function(i){return new(i||e)(b(br))},e.\u0275cmp=z({type:e,selectors:[["app-root"]],decls:4,vars:1,consts:[[1,"container-fluid","custom-container"],["type","file",3,"change"],[1,"images"],["width","200",3,"src",4,"ngFor","ngForOf"],["width","200",3,"src"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"input",1),O("change",function(a){return o.uploadImage(a)}),f(),h(2,"div",2),q(3,NV,1,1,"img",3),f()()),i&2&&(y(3),M("ngForOf",o.images))}});let t=e;return t})();var aC=(()=>{let e=class e{constructor(r){this.http=r,this.name="",this.username="",this.password="",this.email="",this.cp="",this.rol="USER",this.points=0,this.group=1,this.created=this.getCurrentFormattedDate(),this.users=[],this.loadUsers()}loadUsers(){return v(this,null,function*(){try{let r=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json"));this.users=r?r.filter(i=>i!==null&&i._id_user_VV!==void 0&&i._id_user_VV!==null):[]}catch(r){console.error("Error al cargar los usuarios:",r),alert("Error al cargar los usuarios")}})}getCurrentFormattedDate(){let r=new Date,i=String(r.getDate()).padStart(2,"0"),o=String(r.getMonth()+1).padStart(2,"0"),s=r.getFullYear();return`${i}/${o}/${s}`}onRegister(){return v(this,null,function*(){let r=this.users.filter(o=>o&&o._id_user_VV!==void 0&&o._id_user_VV!==null).map(o=>o._id_user_VV).sort((o,s)=>o-s),i=1;for(let o of r)if(o===i)i++;else break;if(this.users.some(o=>o&&o.username===this.username)){alert("El nombre de usuario ya est\xE1 registrado");return}if(this.username!==""&&this.password!==""){let o={_id_user_VV:i,username:this.username,password:this.password,name:this.name,email:this.email,cp:this.cp,rol:this.rol,points:this.points,created:this.created};this.users.push(o);try{yield ee(this.http.put("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json",this.users)),alert("Registro exitoso"),this.username="",this.password=""}catch(s){console.error("Error al guardar el usuario:",s),alert("Error al registrar el usuario")}}else alert("Rellena los campos vac\xEDos")})}};e.\u0275fac=function(i){return new(i||e)(b(pe))},e.\u0275cmp=z({type:e,selectors:[["app-register"]],standalone:!0,features:[te],decls:41,vars:5,consts:[[1,"container-fluid","custom-container"],[1,"row","justify-content-center","min-vh-100"],[1,"col-md-4"],[1,"card","mt-5","custom-card"],[1,"card-body"],[1,"card-title","text-center"],[1,"form-group"],["for","name",1,"visually-hidden"],[1,"input-group","mb-3"],["name","name","type","text","id","name","placeholder","Escribe tu nombre","aria-label","Name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"visually-hidden"],["name","email","type","email","id","email","placeholder","Escribe tu email","aria-label","Email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","userName",1,"visually-hidden"],["name","username","type","text","id","username","placeholder","Escribe tu nombre de usuario","aria-label","Username","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"visually-hidden"],["name","password","type","password","id","password","placeholder","Crea tu contrase\xF1a","aria-label","Password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","CP",1,"visually-hidden"],["name","cp","type","text","id","codigopost","placeholder","Introduce tu C\xF3digo Postal","aria-label","cp","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","custom-btn","mt-3",3,"click"],["routerLink","../login",1,"link-info"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),g(6,"\xA1REGISTRATE!"),f(),h(7,"form")(8,"div",6)(9,"label",7),g(10,"Name"),f(),h(11,"div",8)(12,"input",9),Oe("ngModelChange",function(a){return Ve(o.name,a)||(o.name=a),a}),f()()(),h(13,"div",6)(14,"label",10),g(15,"Email"),f(),h(16,"div",8)(17,"input",11),Oe("ngModelChange",function(a){return Ve(o.email,a)||(o.email=a),a}),f()()(),h(18,"div",6)(19,"label",12),g(20,"Username"),f(),h(21,"div",8)(22,"input",13),Oe("ngModelChange",function(a){return Ve(o.username,a)||(o.username=a),a}),f()()(),h(23,"div",6)(24,"label",14),g(25,"Contrase\xF1a"),f(),h(26,"div",8)(27,"input",15),Oe("ngModelChange",function(a){return Ve(o.password,a)||(o.password=a),a}),f()()(),h(28,"div",6)(29,"label",16),g(30,"CP"),f(),h(31,"div",8)(32,"input",17),Oe("ngModelChange",function(a){return Ve(o.cp,a)||(o.cp=a),a}),f()()(),h(33,"div",18)(34,"button",19),O("click",function(){return o.onRegister()}),g(35," REGISTER "),f()(),h(36,"div",18)(37,"p"),g(38,"\xBFYa tienes cuenta? "),h(39,"a",20),g(40,"\xA1Inicia sesi\xF3n aqu\xED!"),f()()()()()()()()()),i&2&&(y(12),Re("ngModel",o.name),y(5),Re("ngModel",o.email),y(5),Re("ngModel",o.username),y(5),Re("ngModel",o.password),y(5),Re("ngModel",o.cp))},dependencies:[me,Rt,yo,ln,hr,_o,Bs,Mn,Zr,ur],styles:[".custom-card[_ngcontent-%COMP%]{background-color:#fffc;border-radius:8px;box-shadow:0 4px 8px #0000001a}.text-center[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}.text-center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]{border:1px solid #4caf50;border-radius:0}.custom-btn[_ngcontent-%COMP%]{background-color:#4caf50;border:none;padding:10px 20px;font-size:16px;width:auto}.forgot-password[_ngcontent-%COMP%]{color:#4caf50;text-decoration:none}.forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333}body[_ngcontent-%COMP%]{margin:0;font-family:Arial,sans-serif}.min-vh-100[_ngcontent-%COMP%]{min-height:100vh}"]});let t=e;return t})();var RV=()=>[];function OV(t,e){if(t&1&&(h(0,"div",20)(1,"label",21),g(2,"Contrase\xF1a del grupo:"),f(),R(3,"input",22),f()),t&2){let n=k(2);y(3),M("value",n.grupoActual.data.public?"GRUPO PUBLICO":n.grupoActual.data.groupPass)}}function PV(t,e){if(t&1&&(h(0,"div")(1,"div",23)(2,"div",16),g(3),f(),h(4,"div",16),g(5),f()()()),t&2){let n=e.$implicit,r=k(2);y(3),Dn(n),y(2),Dn(r.getUserPoints(n))}}function kV(t,e){if(t&1&&(h(0,"div",24)(1,"span"),g(2),f()()),t&2){let n=e.$implicit,r=k(2);y(),$r("width",r.getUserPoints(n)/r.getMaxPoints()*100,"%"),y(),rr(" ",n," - ",r.getUserPoints(n)," ")}}function FV(t,e){if(t&1){let n=Le();h(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),R(5,"img",6),h(6,"h3",7),g(7),f()(),h(8,"p"),g(9),f(),h(10,"p"),g(11),f(),h(12,"p"),g(13),f(),h(14,"p"),g(15),f(),q(16,OV,4,1,"div",8),h(17,"button",9),O("click",function(){Ce(n);let i=k();return Ie(i.leaveGroup())}),g(18," SALIR DEL GRUPO "),f()()(),h(19,"div",10)(20,"div",4)(21,"h3",5),g(22,"MI GRUPO"),f(),h(23,"div",11)(24,"div",12)(25,"div",13)(26,"h5"),g(27,"MIEMBROS"),f(),h(28,"div",14)(29,"div",15)(30,"div",16),g(31,"NOMBRE USUARIO"),f(),h(32,"div",16),g(33,"VERDECITOS"),f()(),q(34,PV,6,2,"div",17),f()()(),h(35,"div",12)(36,"div",13)(37,"h5"),g(38,"VERDECITOS TOTALES GRUPO"),f(),h(39,"p"),g(40),f(),h(41,"h5"),g(42,"RANKING MIEMBROS"),f(),h(43,"div",18),q(44,kV,3,4,"div",19),f()()()()()()()()}if(t&2){let n=k();y(5),M("src",(n.currentUser==null?null:n.currentUser.profileImage)||"https://firebasestorage.googleapis.com/v0/b/verdeventura-db.appspot.com/o/imgUser%2Fdefault.jpeg?alt=media&token=8729918d-308a-45be-a289-8b6992e62ebd",At),y(2),Dn(n.currentUser==null?null:n.currentUser.username),y(2),Z("Mis Verdecitos: ",n.currentUser==null?null:n.currentUser.points," verdecitos"),y(2),Z("Tipo grupo: ",n.grupoActual.data.public?"p\xFAblico":"privado",""),y(2),Z("Tama\xF1o del grupo: ",n.grupoActual.data.size,""),y(2),Z("ID grupo: ",n.grupoActual.data._id_grupos_VV,""),y(),M("ngIf",!n.grupoActual.data.public),y(18),M("ngForOf",(n.grupoActual.data.members==null?null:n.grupoActual.data.members.split(", "))||eo(10,RV)),y(6),Z("",n.getTotalGroupPoints()," Verdecitos"),y(4),M("ngForOf",n.getRanking())}}var cC=(()=>{let e=class e{constructor(r,i,o){this.http=r,this.authService=i,this.router=o,this.grupoActual=null,this.membersPoints={}}ngOnInit(){return v(this,null,function*(){yield this.loadCurrentUser(),this.currentUser&&this.currentUser._id_grupos_VV!==void 0&&(yield this.loadUserGroup(this.currentUser._id_grupos_VV),yield this.loadMembersPoints())})}loadCurrentUser(){return v(this,null,function*(){try{let r=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")),i=this.authService.getUsername(),o=Object.entries(r||{});for(let[s,a]of o)if(a.username===i){this.currentUser=a,this.currentUserKey=s;break}}catch(r){console.error("Error al cargar los usuarios:",r),alert("Error al cargar los usuarios")}})}loadUserGroup(r){return v(this,null,function*(){try{let i=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/grupos_VV.json")),o=Object.entries(i||{});for(let[s,a]of o)if(a._id_grupos_VV===r){this.grupoActual={key:s,data:a};break}}catch(i){console.error("Error al cargar el grupo del usuario:",i),alert("Error al cargar el grupo del usuario")}})}loadMembersPoints(){return v(this,null,function*(){if(!this.grupoActual||!this.grupoActual.data.members)return;let r=this.grupoActual.data.members.split(", ");for(let i of r)try{let o=yield ee(this.http.get("https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register.json")),s=Object.entries(o||{});for(let[a,c]of s)if(c.username===i){this.membersPoints[i]=c.points;break}}catch(o){console.error(`Error al cargar los puntos del usuario ${i}:`,o)}})}leaveGroup(){return v(this,null,function*(){if(!(!this.currentUser||!this.currentUserKey||!this.grupoActual))try{yield ee(this.http.patch(`https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/register/${this.currentUserKey}.json`,{_id_grupos_VV:null})),this.currentUser._id_grupos_VV=void 0;let i=(this.grupoActual.data.members?this.grupoActual.data.members.split(", "):[]).filter(o=>o!==this.currentUser.username);yield ee(this.http.patch(`https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app/grupos_VV/${this.grupoActual.key}.json`,{members:i.join(", ")})),alert("Has dejado el grupo exitosamente"),this.grupoActual=null,this.router.navigate(["/group"])}catch(r){console.error("Error al dejar el grupo:",r),alert("Error al dejar el grupo")}})}getUserPoints(r){return this.membersPoints[r]||0}getTotalGroupPoints(){return Object.values(this.membersPoints).reduce((r,i)=>r+i,0)}getMaxPoints(){return Math.max(...Object.values(this.membersPoints))}getRanking(){return Object.keys(this.membersPoints).sort((r,i)=>this.membersPoints[i]-this.membersPoints[r])}};e.\u0275fac=function(i){return new(i||e)(b(pe),b(Pe),b(Ue))},e.\u0275cmp=z({type:e,selectors:[["app-migrupo"]],standalone:!0,features:[te],decls:1,vars:1,consts:[["class","container-fluid no-padding",4,"ngIf"],[1,"container-fluid","no-padding"],[1,"row","no-margin"],[1,"col-md-4","no-margin","animate__animated","animate__zoomIn"],[1,"p-3","bg-light","custom-card","no-margin"],[1,"text-center"],["alt","User Avatar",1,"img-fluid","rounded-circle","mb-3",3,"src"],[1,"mb-4"],["class","form-group",4,"ngIf"],["type","button",1,"btn","btn-primary","custom-btn","mt-3",3,"click"],[1,"col-md-8","no-margin","animate__animated","animate__zoomIn"],[1,"row"],[1,"col-md-6"],[1,"p-3","bg-light","custom-card"],[1,"table-container"],[1,"table-row","table-header"],[1,"table-cell"],[4,"ngFor","ngForOf"],[1,"progress-bar-container"],["class","progress-bar",4,"ngFor","ngForOf"],[1,"form-group"],["for","groupPass"],["type","text","id","groupPass","readonly","",1,"form-control",3,"value"],[1,"table-row"],[1,"progress-bar"]],template:function(i,o){i&1&&q(0,FV,45,11,"div",0),i&2&&M("ngIf",o.grupoActual)},dependencies:[me,Mt,Qe],styles:[".custom-card[_ngcontent-%COMP%]{background-color:#fffc;border-radius:8px;box-shadow:0 4px 8px #0000001a;padding:20px;margin:10px}h5[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]{border:1px solid #4caf50;border-radius:5px;margin-bottom:10px}.custom-btn[_ngcontent-%COMP%]{background-color:#4caf50;border:none;padding:10px 20px;font-size:16px;width:auto}.custom-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}.no-margin[_ngcontent-%COMP%]{margin:0}.container-fluid.no-padding[_ngcontent-%COMP%]{padding:0}.table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.table-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px;background-color:#fffc;border-radius:5px;cursor:pointer}.table-header[_ngcontent-%COMP%]{font-weight:700;background-color:#f5f5f5;cursor:default}.table-row.selected[_ngcontent-%COMP%]{background-color:#e0f7fa}.table-cell[_ngcontent-%COMP%]{flex:1;text-align:center}.table-cell[_ngcontent-%COMP%]:nth-child(1){text-align:left}.table-cell[_ngcontent-%COMP%]:nth-child(3){text-align:right}.progress-bar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.progress-bar[_ngcontent-%COMP%]{background-color:#e0f7fa;border-radius:5px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:20px;background-color:#4caf50;border-radius:5px;text-align:center;color:#fff}.change-image-btn[_ngcontent-%COMP%]{display:block;margin:10px auto 0}.img-fluid[_ngcontent-%COMP%]{width:70%}"]});let t=e;return t})();var LV=()=>["seasonq1","seasonq2","seasonq3","seasonq4"];function VV(t,e){if(t&1){let n=Le();h(0,"div",11)(1,"div",12)(2,"div",13),R(3,"img",14),f(),h(4,"div",15)(5,"div",16)(6,"h5",17),g(7),R(8,"br"),g(9),f(),h(10,"p",18),g(11),f(),h(12,"p",18),g(13),f(),h(14,"p",18),g(15),f(),h(16,"label",19),g(17," Subir Imagen "),h(18,"input",20),O("change",function(i){let o=Ce(n).$implicit,s=k(2).$implicit,a=k();return Ie(a.uploadImageToDB(i,s,a.seasonNumeroDeQuincena(o._id_retos_VV)))}),f()()()()()()}if(t&2){let n=e.$implicit,r=k(3);y(3),M("src",r.getImageUrl(n),At),y(4),Z(" Reto ",r.seasonNumeroDeQuincena(n._id_retos_VV),": "),y(2),Z(" ",n.description," "),y(2),Z("\xBFC\xF3mo hacerlo? ",n.howTo,""),y(2),Z(" \xA1Val\xEDdalo para obtener verdecitos! ",n.verification," "),y(2),Z(" Verdecitos otorgados: ",n.pointsGiven," ")}}function UV(t,e){if(t&1&&(h(0,"div"),q(1,VV,19,6,"div",10),f()),t&2){let n=k().$implicit,r=k();y(),M("ngForOf",r.retosPorQuincena[n])}}function jV(t,e){t&1&&(h(0,"div")(1,"p",21),g(2,"No hay retos disponibles para esta quincena."),f()())}function BV(t,e){if(t&1&&(h(0,"div")(1,"div",7)(2,"h2",8),g(3),f(),q(4,UV,2,1,"div",9)(5,jV,3,0,"div",9),f()()),t&2){let n=e.$implicit,r=e.index,i=k();y(3),Z(" Quincena ",r+1," "),y(),M("ngIf",i.retosPorQuincena[n]&&i.retosPorQuincena[n].length>0),y(),M("ngIf",!i.retosPorQuincena[n]||i.retosPorQuincena[n].length===0)}}var lC=(()=>{let e=class e{constructor(r,i,o,s){this.imageService=r,this.authService=i,this.http=o,this.retosService=s,this.latestImageUrl=void 0,this.userUploading=null,this.users=[],this.retos_user_VV=[],this.challengesList=[],this.retosPorQuincena={},this.quincenaSeleccionada="seasonq1"}ngOnInit(){this.loadUsers(),this.loadRetosUserVV(),this.retosService.getEmployees().subscribe(r=>{this.challengesList=r,console.log("Challenges List:",this.challengesList),this.seasonClasificarRetosPorQuincenas(),console.log("Retos por Quincena:",this.retosPorQuincena)})}seasonClasificarRetosPorQuincenas(){this.retosPorQuincena={seasonq1:[],seasonq2:[],seasonq3:[],seasonq4:[]},this.challengesList.forEach(r=>{let i=r._id_retos_VV;if(this.isValidSeasonId(i)){let o=i.substring(3,11);console.log("Quincena:",o,"Reto:",r),this.retosPorQuincena[o]?this.retosPorQuincena[o].push(r):console.warn(`Reto con id ${i} no sigue el formato esperado.`)}else console.warn(`Reto con id ${i} no sigue el formato esperado.`)})}isValidSeasonId(r){return/^s01seasonq[1-4]$/.test(r)}seasonNumeroDeQuincena(r){let i=r.length>=11?r.substring(10,11):"";return parseInt(i,10)}loadUsers(){this.http.get(`${this.retosService.baseUrl}register.json`).subscribe(r=>{this.users=r,console.log("Loaded users:",this.users)},r=>{console.error("Error al cargar los usuarios:",r)})}loadRetosUserVV(){this.retosService.getRetosUserVV().subscribe(r=>{this.retos_user_VV=Object.values(r||{}),console.log("Loaded retos_user_VV:",this.retos_user_VV)},r=>{console.error("Error al cargar los retos de usuario:",r)})}getImageToStorage(r){return v(this,null,function*(){let i=r.target.files[0];try{yield this.imageService.uploadImage(i),this.latestImageUrl=this.imageService.getLatestImageUrl()||void 0,this.userUploading=this.authService.getUsername()}catch(o){console.error("Error al subir la imagen:",o)}})}uploadImageToDB(r,i,o){return v(this,null,function*(){yield this.getImageToStorage(r);let s=`s01${i}`;if(console.log("uploading id: "+s),this.userUploading&&this.latestImageUrl){let a={urlUploaded:this.latestImageUrl,_username:this.userUploading,_id_retos_VV:s};this.retosService.checkAndAddOrUpdateRetosUserVV(a).subscribe(c=>{console.log("Registro de reto enviado a la base de datos:",c);let l=this.retosPorQuincena[i].findIndex(u=>u._id_retos_VV===s);if(l!==-1){this.retosPorQuincena[i][l].urlImgDefault=this.latestImageUrl||void 0;let u=this.retos_user_VV.findIndex(d=>d._id_retos_VV===s&&d._username===this.userUploading);u!==-1?this.retos_user_VV[u].urlUploaded=this.latestImageUrl:this.retos_user_VV.push(a)}},c=>{console.error("Error al enviar el registro a la base de datos:",c)})}})}getImageUrl(r){let i=this.retos_user_VV.find(o=>o._id_retos_VV===r._id_retos_VV&&o._username===this.authService.getUsername());return i?i.urlUploaded||r.urlImgDefault||"":r.urlImgDefault||""}};e.\u0275fac=function(i){return new(i||e)(b(br),b(Pe),b(pe),b(gu))},e.\u0275cmp=z({type:e,selectors:[["app-seasonal"]],standalone:!0,features:[te],decls:7,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-9"],[4,"ngFor","ngForOf"],[1,"col-sm-3"],[1,"banner-container"],["src","/assets/infoseasonal.png","alt","Banner",1,"img-fluid"],[1,"card","mb-3"],["id","title",1,"card-title-quincena"],[4,"ngIf"],["class","animate__animated animate__fadeIn ae-grid__item item-lg-4 au-mb-3",4,"ngFor","ngForOf"],[1,"animate__animated","animate__fadeIn","ae-grid__item","item-lg-4","au-mb-3"],[1,"row","g-0"],[1,"col-md-2","image-container"],["alt","Image",1,"reto-img",3,"src"],[1,"col-md-10"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary"],["type","file",2,"display","none",3,"change"],[1,"text-center"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),q(3,BV,6,3,"div",3),f(),h(4,"div",4)(5,"div",5),R(6,"img",6),f()()()()),i&2&&(y(3),M("ngForOf",eo(1,LV)))},dependencies:[Rt,me,Mt,Qe],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;font-family:Arial,sans-serif}.container-fluid[_ngcontent-%COMP%]{width:100%;padding:0}.bg-light[_ngcontent-%COMP%]{background-color:#eaf7f7}.p-3[_ngcontent-%COMP%]{padding:1rem!important}.rounded[_ngcontent-%COMP%]{border-radius:.25rem!important}.shadow[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026!important}.img-fluid[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.8}.seasonal-challenge[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:20px;border-radius:10px}.upload-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.upload-image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.challenge-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .challenge-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px}#title[_ngcontent-%COMP%]{margin-bottom:20px;padding:20px}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.reto-img[_ngcontent-%COMP%]{width:100%;height:auto;max-width:150px;max-height:150px;object-fit:cover;border-radius:8px}.banner-container[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;text-align:center}"]});let t=e;return t})();var uC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=z({type:e,selectors:[["app-sesion-cerrada"]],standalone:!0,features:[te],decls:6,vars:0,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","custom-card","text-center"],[1,"card-body"],["src","/assets/despedida.gif","alt","Imagen de despedida",1,"img-fluid","rounded-circle","mb-3"],[1,"card-text"]],template:function(i,o){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),R(3,"img",3),h(4,"h3",4),g(5,"Nos vemos pronto. \xA1Cu\xEDdate!"),f()()()())},styles:[".custom-card[_ngcontent-%COMP%]{background-color:#fffc;border-radius:8px;box-shadow:0 4px 8px #0000001a;padding:20px;max-width:400px;width:100%;margin-top:-150px}"]});let t=e;return t})();var dC=[{path:"",component:iC},{path:"retos",component:Jw},{path:"retos/seasonal",component:lC},{path:"group",component:Xw},{path:"creargrupo",component:eC},{path:"buscargrupo",component:tC},{path:"migrupo",component:cC},{path:"login",component:sb},{path:"register",component:aC},{path:"hastapronto",component:uC},{path:"perfil",component:nC},{path:"rank",component:rC},{path:"guiaods",component:oC},{path:"database",component:sC},{path:"**",component:ab}];var hC={production:!1,firebase:{apiKey:"AIzaSyCnWKM_I5yxJzrL40qvFGupJHTykuHSsGU",authDomain:"verdeventura-db.firebaseapp.com",databaseURL:"https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app",projectId:"verdeventura-db",storageBucket:"verdeventura-db.appspot.com",messagingSenderId:"1010780911535",appId:"1:1010780911535:web:c7efd14be17be4acc1e15a"}};var fC="@firebase/database",pC="1.0.6";var Sm="";function $V(t){Sm=t}var Fg=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Be(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Eo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Lg=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return hn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var GC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Fg(e)}}catch{}return new Lg},pi=GC("localStorage"),Vg=GC("sessionStorage");var Ro=new fr("@firebase/database"),HV=function(){let t=1;return function(){return t++}}(),qC=function(t){let e=bb(t),n=new xl;n.update(e);let r=n.digest();return Nl.encodeByteArray(r)},ba=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ba.apply(null,r):typeof r=="object"?e+=Be(r):e+=r,e+=" "}return e},gi=null,gC=!0,WV=function(t,e){I(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ro.logLevel=ce.VERBOSE,gi=Ro.log.bind(Ro),e&&Vg.set("logging_enabled",!0)):typeof t=="function"?gi=t:(gi=null,Vg.remove("logging_enabled"))},Je=function(...t){if(gC===!0&&(gC=!1,gi===null&&Vg.get("logging_enabled")===!0&&WV(!0)),gi){let e=ba.apply(null,t);gi(e)}},wa=function(t){return function(...e){Je(t,...e)}},Ug=function(...t){let e="FIREBASE INTERNAL ERROR: "+ba(...t);Ro.error(e)},Ln=function(...t){let e=`FIREBASE FATAL ERROR: ${ba(...t)}`;throw Ro.error(e),new Error(e)},Et=function(...t){let e="FIREBASE WARNING: "+ba(...t);Ro.warn(e)},zV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},KC=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},GV=function(t){if(dn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Po="[MIN_NAME]",mi="[MAX_NAME]",Bo=function(t,e){if(t===e)return 0;if(t===Po||e===mi)return-1;if(e===Po||t===mi)return 1;{let n=mC(t),r=mC(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},qV=function(t,e){return t===e?0:t<e?-1:1},la=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Be(e))},Tm=function(t){if(typeof t!="object"||t===null)return Be(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Be(e[r]),n+=":",n+=Tm(t[e[r]]);return n+="}",n},YC=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ft(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var QC=function(t){I(!KC(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let p=parseInt(u.substr(c,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},KV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},YV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var QV=new RegExp("^-?(0*)\\d{1,10}$"),ZV=-2147483648,JV=2147483647,mC=function(t){if(QV.test(t)){let e=Number(t);if(e>=ZV&&e<=JV)return e}return null},Ca=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Et("Exception was thrown by user callback.",n),e},Math.floor(0))}},XV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},pa=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var jg=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Et(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Bg=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Et(e)}},ga=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),vu="5",ZC="v",JC="s",XC="r",eI="f",tI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nI="ls",rI="p",$g="ac",iI="websocket",oI="long_polling";var _u=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function eU(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function sI(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===iI)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===oI)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);eU(t)&&(n.ns=t.namespace);let i=[];return Ft(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Hg=class{constructor(){this.counters_={}}incrementCounter(e,n=1){hn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return ub(this.counters_)}};var Mg={},xg={};function Am(t){let e=t.toString();return Mg[e]||(Mg[e]=new Hg),Mg[e]}function tU(t,e){let n=t.toString();return xg[n]||(xg[n]=e()),xg[n]}var Wg=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ca(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var vC="start",nU="close",rU="pLPCommand",iU="pRTLPCB",aI="id",cI="pw",lI="ser",oU="cb",sU="seg",aU="ts",cU="d",lU="dframe",uI=1870,dI=30,uU=uI-dI,dU=25e3,hU=3e4,zg=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wa(e),this.stats_=Am(n),this.urlFn=c=>(this.appCheckToken&&(c[$g]=this.appCheckToken),sI(n,oI,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Wg(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(hU)),GV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gg((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===vC)this.id=a,this.password=c;else if(s===nU)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[vC]="t",r[lI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[oU]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ZC]=vu,this.transportSessionId&&(r[JC]=this.transportSessionId),this.lastSessionId&&(r[nI]=this.lastSessionId),this.applicationId&&(r[rI]=this.applicationId),this.appCheckToken&&(r[$g]=this.appCheckToken),typeof location<"u"&&location.hostname&&tI.test(location.hostname)&&(r[XC]=eI);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return dn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!KV()&&!YV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Be(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=cp(n),i=YC(r,uU);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(dn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[lU]="t",r[aI]=e,r[cI]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Be(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Gg=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,dn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=HV(),window[rU+this.uniqueCallbackIdentifier]=e,window[iU+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Je("frame writing exception"),a.stack&&Je(a.stack),Je(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Je("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[aI]=this.myID,e[cI]=this.myPW,e[lI]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+dI+r.length<=uI;){let s=this.pendingSegs.shift();r=r+"&"+sU+i+"="+s.seg+"&"+aU+i+"="+s.ts+"&"+cU+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(dU)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){dn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Je("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var fU=16384,pU=45e3,yu=null;typeof MozWebSocket<"u"?yu=MozWebSocket:typeof WebSocket<"u"&&(yu=WebSocket);var ua=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wa(this.connId),this.stats_=Am(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[ZC]=vu,!dn()&&typeof location<"u"&&location.hostname&&tI.test(location.hostname)&&(a[XC]=eI),r&&(a[JC]=r),i&&(a[nI]=i),o&&(a[$g]=o),s&&(a[rI]=s),sI(n,iI,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pi.set("previous_websocket_failure",!0);try{let i;if(dn()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${vu}/${Sm}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new yu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&yu!==null&&!t.forceDisallow_}static previouslyFailed(){return pi.isInMemoryStorage||pi.get("previous_websocket_failure")===!0}markConnectionHealthy(){pi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Eo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(I(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Be(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=YC(r,fU);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(pU))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),gU=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[zg,ua]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=ua&&ua.isAvailable(),i=r&&!ua.previouslyFailed();if(n.webSocketOnly&&(r||Et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ua];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),mU=6e4,vU=5e3,_U=10*1024,yU=100*1024,Ng="t",_C="d",EU="s",yC="r",bU="e",EC="o",bC="a",wC="n",CC="p",wU="h",qg=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wa("c:"+this.id+":"),this.transportManager_=new gU(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=pa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>yU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>_U?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ng in e){let n=e[Ng];n===bC?this.upgradeIfSecondaryHealthy_():n===yC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===EC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=la("t",e),r=la("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:CC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:bC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=la("t",e),r=la("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=la(Ng,e);if(_C in e){let r=e[_C];if(n===wU){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===wC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===EU?this.onConnectionShutdown_(r):n===yC?this.onReset_(r):n===bU?Ug("Server Error: "+r):n===EC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ug("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),vu!==r&&Et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),pa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(mU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(vU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:CC,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Eu=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var bu=class{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var wu=class t extends bu{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ws()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var IC=32,DC=768,ge=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function de(){return new ge("")}function ne(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Cr(t){return t.pieces_.length-t.pieceNum_}function ve(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ge(t.pieces_,e)}function hI(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function CU(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fI(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function pI(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ge(e,0)}function $e(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ge(n,0)}function J(t){return t.pieceNum_>=t.pieces_.length}function Pt(t,e){let n=ne(t),r=ne(e);if(n===null)return e;if(n===r)return Pt(ve(t),ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function gI(t,e){if(Cr(t)!==Cr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function qt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Cr(t)>Cr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Kg=class{constructor(e,n){this.errorPrefix_=n,this.parts_=fI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=qs(this.parts_[r]);mI(this)}};function IU(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=qs(e),mI(t)}function DU(t){let e=t.parts_.pop();t.byteLength_-=qs(e),t.parts_.length>0&&(t.byteLength_-=1)}function mI(t){if(t.byteLength_>DC)throw new Error(t.errorPrefix_+"has a key path longer than "+DC+" bytes ("+t.byteLength_+").");if(t.parts_.length>IC)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+IC+") or object contains a cycle "+fi(t))}function fi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Yg=class t extends bu{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}};var da=1e3,SU=60*5*1e3,SC=30*1e3,TU=1.3,AU=3e4,MU="server_kill",TC=3,Mm=(()=>{class t extends Eu{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=wa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=da,this.maxReconnectDelay_=SU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!dn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yg.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&wu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Be(s)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Jr,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&hn(n,"w")){let i=ei(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||_b(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=SC)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=vb(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Be(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Ug("Unrecognized action received from server: "+Be(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=da,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=da,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>AU&&(this.reconnectDelay_=da),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*TU)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(p){I(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[p,m]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Je("getToken() completed but was canceled"):(Je("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,c=new qg(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,_=>{Et(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(MU)},s))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&Et(p),l())}}})}interrupt(n){Je("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Je("Resuming connection for reason: "+n),delete this.interruptReasons_[n],zs(this.interruptReasons_)&&(this.reconnectDelay_=da,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Tm(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new ge(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Je("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=TC&&(this.reconnectDelay_=SC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Je("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=TC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";dn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Sm.replace(/\./g,"-")]=1,Ws()?n["framework.cordova"]=1:Pl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=wu.getInstance().currentlyOnline();return zs(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),re=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var ko=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new re(Po,e),i=new re(Po,n);return this.compare(r,i)!==0}minPost(){return re.MIN}};var mu,Cu=class extends ko{static get __EMPTY_NODE(){return mu}static set __EMPTY_NODE(e){mu=e}compare(e,n){return Bo(e.name,n.name)}isDefinedOn(e){throw Xr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return re.MIN}maxPost(){return new re(mi,mu)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new re(e,mu)}toString(){return".key"}},Oo=new Cu;var xo=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Gt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??kt.EMPTY_NODE,this.right=s??kt.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return kt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return kt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Qg=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new Gt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},kt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Gt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new xo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new xo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new xo(this.root_,null,this.comparator_,!0,e)}};kt.EMPTY_NODE=new Qg;function xU(t,e){return Bo(t.name,e.name)}function xm(t,e){return Bo(t,e)}var Zg;function NU(t){Zg=t}var vI=function(t){return typeof t=="number"?"number:"+QC(t):"string:"+t},_I=function(t){if(t.isLeafNode()){let e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&hn(e,".sv"),"Priority must be a string or number.")}else I(t===Zg||t.isEmpty(),"priority of unexpected type.");I(t===Zg||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var AC,Fo=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_I(this.priorityNode_)}static set __childrenNodeConstructor(n){AC=n}static get __childrenNodeConstructor(){return AC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return J(n)?this:ne(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=ne(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(I(i!==".priority"||Cr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+vI(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=QC(this.value_):n+=this.value_,this.lazyHash_=qC(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(I(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return I(o>=0,"Unknown leaf type: "+r),I(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),yI,EI;function RU(t){yI=t}function OU(t){EI=t}var Jg=class extends ko{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Bo(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return re.MIN}maxPost(){return new re(mi,new Fo("[PRIORITY-POST]",EI))}makePost(e,n){let r=yI(e);return new re(n,new Fo("[PRIORITY-POST]",r))}toString(){return".priority"}},et=new Jg;var PU=Math.log(2),Xg=class{constructor(e){let n=o=>parseInt(Math.log(o)/PU,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Iu=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,p;if(u===0)return null;if(u===1)return d=t[c],p=n?n(d):d,new Gt(p,d.node,Gt.BLACK,null,null);{let m=parseInt(u/2,10)+c,_=i(c,m),C=i(m+1,l);return d=t[m],p=n?n(d):d,new Gt(p,d.node,Gt.BLACK,_,C)}},o=function(c){let l=null,u=null,d=t.length,p=function(_,C){let E=d-_,S=d;d-=_;let K=i(E+1,S),L=t[E],P=n?n(L):L;m(new Gt(P,L.node,C,null,K))},m=function(_){l?(l.left=_,l=_):(u=_,l=_)};for(let _=0;_<c.count;++_){let C=c.nextBitIsOne(),E=Math.pow(2,c.count-(_+1));C?p(E,Gt.BLACK):(p(E,Gt.BLACK),p(E,Gt.RED))}return u},s=new Xg(t.length),a=o(s);return new kt(r||e,a)};var Rg,Mo={},Lo=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return I(Mo&&et,"ChildrenNode.ts has not been loaded"),Rg=Rg||new t({".priority":Mo},{".priority":et}),Rg}get(e){let n=ei(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof kt?n:null}hasIndex(e){return hn(this.indexSet_,e.toString())}addIndex(e,n){I(e!==Oo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(re.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Iu(r,e.getCompare()):a=Mo;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Gs(this.indexes_,(i,o)=>{let s=ei(this.indexSet_,o);if(I(s,"Missing index implementation for "+o),i===Mo)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(re.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Iu(a,s.getCompare())}else return Mo;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new re(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Gs(this.indexes_,i=>{if(i===Mo)return i;{let o=n.get(e.name);return o?i.remove(new re(e.name,o)):i}});return new t(r,this.indexSet_)}};var ha,Ee=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_I(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ha||(ha=new t(new kt(xm),null,Lo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ha}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?ha:r}}getChild(n){let r=ne(n);return r===null?this:this.getImmediateChild(r).getChild(ve(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(I(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new re(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?ha:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=ne(n);if(i===null)return r;{I(ne(n)!==".priority"||Cr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ve(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(et,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+vI(this.getPriority().val())+":"),this.forEachChild(et,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":qC(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new re(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new re(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new re(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,re.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,re.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Ia?-1:0}withIndex(n){if(n===Oo||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Oo||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(et),o=r.getIterator(et),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Oo?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),em=class extends Ee{constructor(){super(new kt(xm),Ee.EMPTY_NODE,Lo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ee.EMPTY_NODE}isEmpty(){return!1}},Ia=new em;Object.defineProperties(re,{MIN:{value:new re(Po,Ee.EMPTY_NODE)},MAX:{value:new re(mi,Ia)}});Cu.__EMPTY_NODE=Ee.EMPTY_NODE;Fo.__childrenNodeConstructor=Ee;NU(Ia);OU(Ia);var kU=!0;function Xe(t,e=null){if(t===null)return Ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Fo(n,Xe(e))}if(!(t instanceof Array)&&kU){let n=[],r=!1;if(Ft(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=Xe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new re(s,c)))}}),n.length===0)return Ee.EMPTY_NODE;let o=Iu(n,xU,s=>s.name,xm);if(r){let s=Iu(n,et.getCompare());return new Ee(o,Xe(e),new Lo({".priority":s},{".priority":et}))}else return new Ee(o,Xe(e),Lo.Default)}else{let n=Ee.EMPTY_NODE;return Ft(t,(r,i)=>{if(hn(t,r)&&r.substring(0,1)!=="."){let o=Xe(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Xe(e))}}RU(Xe);var tm=class extends ko{constructor(e){super(),this.indexPath_=e,I(!J(e)&&ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Bo(e.name,n.name):o}makePost(e,n){let r=Xe(e),i=Ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new re(n,i)}maxPost(){let e=Ee.EMPTY_NODE.updateChild(this.indexPath_,Ia);return new re(mi,e)}toString(){return fI(this.indexPath_,0).join("/")}};var nm=class extends ko{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Bo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return re.MIN}maxPost(){return re.MAX}makePost(e,n){let r=Xe(e);return new re(n,r)}toString(){return".value"}},FU=new nm;function LU(t){return{type:"value",snapshotNode:t}}function VU(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function UU(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function MC(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function jU(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var rm=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=et}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Po}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:mi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===et}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function xC(t){let e={};if(t.isDefault())return e;let n;if(t.index_===et?n="$priority":t.index_===FU?n="$value":t.index_===Oo?n="$key":(I(t.index_ instanceof tm,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Be(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Be(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Be(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Be(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Be(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function NC(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==et&&(e.i=t.index_.toString()),e}var im=class t extends Eu{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=wa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=xC(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),ei(this.listens_,s)===a){let p;l?l===401?p="permission_denied":p="rest_error:"+l:p="ok",i(p,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=xC(e._queryParams),r=e._path.toString(),i=new Jr;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ti(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Eo(a.responseText)}catch{Et("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Et("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var om=class{constructor(){this.rootNode_=Ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Du(){return{value:null,children:new Map}}function bI(t,e,n){if(J(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=ne(e);t.children.has(r)||t.children.set(r,Du());let i=t.children.get(r);e=ve(e),bI(i,e,n)}}function sm(t,e,n){t.value!==null?n(e,t.value):BU(t,(r,i)=>{let o=new ge(e.toString()+"/"+r);sm(i,o,n)})}function BU(t,e){t.children.forEach((n,r)=>{e(r,n)})}var am=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ft(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var RC=10*1e3,$U=30*1e3,HU=5*60*1e3,cm=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new am(e);let r=RC+($U-RC)*Math.random();pa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Ft(e,(i,o)=>{o>0&&hn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),pa(this.reportStats_.bind(this),Math.floor(Math.random()*2*HU))}};var Fn=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Fn||{});function wI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function CI(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function II(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var lm=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Fn.ACK_USER_WRITE,this.source=wI()}operationForChild(e){if(J(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ge(e));return new t(de(),n,this.revert)}}else return I(ne(this.path)===e,"operationForChild called for unrelated child."),new t(ve(this.path),this.affectedTree,this.revert)}};var Vo=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Fn.OVERWRITE}operationForChild(e){return J(this.path)?new t(this.source,de(),this.snap.getImmediateChild(e)):new t(this.source,ve(this.path),this.snap)}};var Su=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Fn.MERGE}operationForChild(e){if(J(this.path)){let n=this.children.subtree(new ge(e));return n.isEmpty()?null:n.value?new Vo(this.source,de(),n.value):new t(this.source,de(),n)}else return I(ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var _a=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(J(e))return this.isFullyInitialized()&&!this.filtered_;let n=ne(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function WU(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(jU(s.childName,s.snapshotNode))}),fa(t,i,"child_removed",e,r,n),fa(t,i,"child_added",e,r,n),fa(t,i,"child_moved",o,r,n),fa(t,i,"child_changed",e,r,n),fa(t,i,"value",e,r,n),i}function fa(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>GU(t,a,c)),s.forEach(a=>{let c=zU(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function zU(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function GU(t,e,n){if(e.childName==null||n.childName==null)throw Xr("Should only compare child_ events.");let r=new re(e.childName,e.snapshotNode),i=new re(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function DI(t,e){return{eventCache:t,serverCache:e}}function ma(t,e,n,r){return DI(new _a(e,n,r),t.serverCache)}function SI(t,e,n,r){return DI(t.eventCache,new _a(e,n,r))}function um(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function vi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Og,qU=()=>(Og||(Og=new kt(qV)),Og),dt=class t{constructor(e,n=qU()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Ft(e,(r,i)=>{n=n.set(new ge(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:de(),value:this.value};if(J(e))return null;{let r=ne(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ve(e),n);return o!=null?{path:$e(new ge(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(J(e))return this;{let n=ne(e),r=this.children.get(n);return r!==null?r.subtree(ve(e)):new t(null)}}set(e,n){if(J(e))return new t(n,this.children);{let r=ne(e),o=(this.children.get(r)||new t(null)).set(ve(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(J(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=ne(e),r=this.children.get(n);if(r){let i=r.remove(ve(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(J(e))return this.value;{let n=ne(e),r=this.children.get(n);return r?r.get(ve(e)):null}}setTree(e,n){if(J(e))return n;{let r=ne(e),o=(this.children.get(r)||new t(null)).setTree(ve(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(de(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_($e(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,de(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(J(e))return null;{let o=ne(e),s=this.children.get(o);return s?s.findOnPath_(ve(e),$e(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,de(),n)}foreachOnPath_(e,n,r){if(J(e))return this;{this.value&&r(n,this.value);let i=ne(e),o=this.children.get(i);return o?o.foreachOnPath_(ve(e),$e(n,i),r):new t(null)}}foreach(e){this.foreach_(de(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_($e(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Kt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new dt(null))}};function va(t,e,n){if(J(e))return new Kt(new dt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Pt(i,e);return o=o.updateChild(s,n),new Kt(t.writeTree_.set(i,o))}else{let i=new dt(n),o=t.writeTree_.setTree(e,i);return new Kt(o)}}}function OC(t,e,n){let r=t;return Ft(n,(i,o)=>{r=va(r,$e(e,i),o)}),r}function PC(t,e){if(J(e))return Kt.empty();{let n=t.writeTree_.setTree(e,new dt(null));return new Kt(n)}}function dm(t,e){return _i(t,e)!=null}function _i(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Pt(n.path,e)):null}function kC(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(et,(r,i)=>{e.push(new re(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new re(r,i.value))}),e}function wr(t,e){if(J(e))return t;{let n=_i(t,e);return n!=null?new Kt(new dt(n)):new Kt(t.writeTree_.subtree(e))}}function hm(t){return t.writeTree_.isEmpty()}function Uo(t,e){return TI(de(),t.writeTree_,e)}function TI(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(I(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=TI($e(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild($e(t,".priority"),r)),n}}function AI(t,e){return OI(e,t)}function KU(t,e,n,r,i){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=va(t.visibleWrites,e,n)),t.lastWriteId=r}function YU(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function QU(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&ZU(a,r.path)?i=!1:qt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return JU(t),!0;if(r.snap)t.visibleWrites=PC(t.visibleWrites,r.path);else{let a=r.children;Ft(a,c=>{t.visibleWrites=PC(t.visibleWrites,$e(r.path,c))})}return!0}else return!1}function ZU(t,e){if(t.snap)return qt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&qt($e(t.path,n),e))return!0;return!1}function JU(t){t.visibleWrites=MI(t.allWrites,XU,de()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function XU(t){return t.visible}function MI(t,e,n){let r=Kt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)qt(n,s)?(a=Pt(n,s),r=va(r,a,o.snap)):qt(s,n)&&(a=Pt(s,n),r=va(r,de(),o.snap.getChild(a)));else if(o.children){if(qt(n,s))a=Pt(n,s),r=OC(r,a,o.children);else if(qt(s,n))if(a=Pt(s,n),J(a))r=OC(r,de(),o.children);else{let c=ei(o.children,ne(a));if(c){let l=c.getChild(ve(a));r=va(r,de(),l)}}}else throw Xr("WriteRecord should have .snap or .children")}}return r}function xI(t,e,n,r,i){if(!r&&!i){let o=_i(t.visibleWrites,e);if(o!=null)return o;{let s=wr(t.visibleWrites,e);if(hm(s))return n;if(n==null&&!dm(s,de()))return null;{let a=n||Ee.EMPTY_NODE;return Uo(s,a)}}}else{let o=wr(t.visibleWrites,e);if(!i&&hm(o))return n;if(!i&&n==null&&!dm(o,de()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(qt(l.path,e)||qt(e,l.path))},a=MI(t.allWrites,s,e),c=n||Ee.EMPTY_NODE;return Uo(a,c)}}}function ej(t,e,n){let r=Ee.EMPTY_NODE,i=_i(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(et,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=wr(t.visibleWrites,e);return n.forEachChild(et,(s,a)=>{let c=Uo(wr(o,new ge(s)),a);r=r.updateImmediateChild(s,c)}),kC(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=wr(t.visibleWrites,e);return kC(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function tj(t,e,n,r,i){I(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=$e(e,n);if(dm(t.visibleWrites,o))return null;{let s=wr(t.visibleWrites,o);return hm(s)?i.getChild(n):Uo(s,i.getChild(n))}}function nj(t,e,n,r){let i=$e(e,n),o=_i(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=wr(t.visibleWrites,i);return Uo(s,r.getNode().getImmediateChild(n))}else return null}function rj(t,e){return _i(t.visibleWrites,e)}function ij(t,e,n,r,i,o,s){let a,c=wr(t.visibleWrites,e),l=_i(c,de());if(l!=null)a=l;else if(n!=null)a=Uo(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),p=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),m=p.getNext();for(;m&&u.length<i;)d(m,r)!==0&&u.push(m),m=p.getNext();return u}else return[]}function oj(){return{visibleWrites:Kt.empty(),allWrites:[],lastWriteId:-1}}function fm(t,e,n,r){return xI(t.writeTree,t.treePath,e,n,r)}function NI(t,e){return ej(t.writeTree,t.treePath,e)}function FC(t,e,n,r){return tj(t.writeTree,t.treePath,e,n,r)}function Tu(t,e){return rj(t.writeTree,$e(t.treePath,e))}function sj(t,e,n,r,i,o){return ij(t.writeTree,t.treePath,e,n,r,i,o)}function Nm(t,e,n){return nj(t.writeTree,t.treePath,e,n)}function RI(t,e){return OI($e(t.treePath,e),t.writeTree)}function OI(t,e){return{treePath:t,writeTree:e}}var pm=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,MC(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,UU(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,VU(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,MC(r,e.snapshotNode,i.oldSnap));else throw Xr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var gm=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},PI=new gm,ya=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new _a(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Nm(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:vi(this.viewCache_),o=sj(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function aj(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function cj(t,e,n,r,i){let o=new pm,s,a;if(n.type===Fn.OVERWRITE){let l=n;l.source.fromUser?s=mm(t,e,l.path,l.snap,r,i,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!J(l.path),s=Au(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===Fn.MERGE){let l=n;l.source.fromUser?s=uj(t,e,l.path,l.children,r,i,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=vm(t,e,l.path,l.children,r,i,a,o))}else if(n.type===Fn.ACK_USER_WRITE){let l=n;l.revert?s=fj(t,e,l.path,r,i,o):s=dj(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===Fn.LISTEN_COMPLETE)s=hj(t,e,n.path,r,o);else throw Xr("Unknown operation type: "+n.type);let c=o.getChanges();return lj(e,s,c),{viewCache:s,changes:c}}function lj(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=um(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(LU(um(e)))}}function kI(t,e,n,r,i,o){let s=e.eventCache;if(Tu(r,n)!=null)return e;{let a,c;if(J(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=vi(e),u=l instanceof Ee?l:Ee.EMPTY_NODE,d=NI(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=fm(r,vi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=ne(n);if(l===".priority"){I(Cr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=FC(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=ve(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let p=FC(r,n,s.getNode(),c);p!=null?d=s.getNode().getImmediateChild(l).updateChild(u,p):d=s.getNode().getImmediateChild(l)}else d=Nm(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return ma(e,a,s.isFullyInitialized()||J(n),t.filter.filtersNodes())}}function Au(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(J(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let m=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),m,null)}else{let m=ne(n);if(!c.isCompleteForPath(n)&&Cr(n)>1)return e;let _=ve(n),E=c.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?l=u.updatePriority(c.getNode(),E):l=u.updateChild(c.getNode(),m,E,_,PI,null)}let d=SI(e,l,c.isFullyInitialized()||J(n),u.filtersNodes()),p=new ya(i,d,o);return kI(t,d,n,i,p,a)}function mm(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new ya(i,e,o);if(J(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=ma(e,l,!0,t.filter.filtersNodes());else{let d=ne(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=ma(e,l,a.isFullyInitialized(),a.isFiltered());else{let p=ve(n),m=a.getNode().getImmediateChild(d),_;if(J(p))_=r;else{let C=u.getCompleteChild(d);C!=null?hI(p)===".priority"&&C.getChild(pI(p)).isEmpty()?_=C:_=C.updateChild(p,r):_=Ee.EMPTY_NODE}if(m.equals(_))c=e;else{let C=t.filter.updateChild(a.getNode(),d,_,p,u,s);c=ma(e,C,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function LC(t,e){return t.eventCache.isCompleteForChild(e)}function uj(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=$e(n,c);LC(e,ne(u))&&(a=mm(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=$e(n,c);LC(e,ne(u))||(a=mm(t,a,u,l,i,o,s))}),a}function VC(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function vm(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;J(n)?l=r:l=new dt(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,p)=>{if(u.hasChild(d)){let m=e.serverCache.getNode().getImmediateChild(d),_=VC(t,m,p);c=Au(t,c,new ge(d),_,i,o,s,a)}}),l.children.inorderTraversal((d,p)=>{let m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!u.hasChild(d)&&!m){let _=e.serverCache.getNode().getImmediateChild(d),C=VC(t,_,p);c=Au(t,c,new ge(d),C,i,o,s,a)}}),c}function dj(t,e,n,r,i,o,s){if(Tu(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(J(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Au(t,e,n,c.getNode().getChild(n),i,o,a,s);if(J(n)){let l=new dt(null);return c.getNode().forEachChild(Oo,(u,d)=>{l=l.set(new ge(u),d)}),vm(t,e,n,l,i,o,a,s)}else return e}else{let l=new dt(null);return r.foreach((u,d)=>{let p=$e(n,u);c.isCompleteForPath(p)&&(l=l.set(u,c.getNode().getChild(p)))}),vm(t,e,n,l,i,o,a,s)}}function hj(t,e,n,r,i){let o=e.serverCache,s=SI(e,o.getNode(),o.isFullyInitialized()||J(n),o.isFiltered());return kI(t,s,n,r,PI,i)}function fj(t,e,n,r,i,o){let s;if(Tu(r,n)!=null)return e;{let a=new ya(r,e,i),c=e.eventCache.getNode(),l;if(J(n)||ne(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=fm(r,vi(e));else{let d=e.serverCache.getNode();I(d instanceof Ee,"serverChildren would be complete if leaf node"),u=NI(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=ne(n),d=Nm(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ve(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,Ee.EMPTY_NODE,ve(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=fm(r,vi(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Tu(r,de())!=null,ma(e,l,s,t.filter.filtersNodes())}}function pj(t,e){let n=vi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!J(e)&&!n.getImmediateChild(ne(e)).isEmpty())?n.getChild(e):null}function UC(t,e,n,r){e.type===Fn.MERGE&&e.source.queryId!==null&&(I(vi(t.viewCache_),"We should always have a full cache before handling merges"),I(um(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=cj(t.processor_,i,e,n,r);return aj(t.processor_,o.viewCache),I(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,gj(t,o.changes,o.viewCache.eventCache.getNode(),null)}function gj(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return WU(t.eventGenerator_,e,n,i)}var jC;function mj(t){I(!jC,"__referenceConstructor has already been defined"),jC=t}function Rm(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return I(o!=null,"SyncTree gave us an op for an invalid query."),UC(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(UC(s,e,n,r));return o}}function Om(t,e){let n=null;for(let r of t.views.values())n=n||pj(r,e);return n}var BC;function vj(t){I(!BC,"__referenceConstructor has already been defined"),BC=t}var Mu=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new dt(null),this.pendingWriteTree_=oj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function _j(t,e,n,r,i){return KU(t.pendingWriteTree_,e,n,r,i),i?Nu(t,new Vo(wI(),e,n)):[]}function No(t,e,n=!1){let r=YU(t.pendingWriteTree_,e);if(QU(t.pendingWriteTree_,e)){let o=new dt(null);return r.snap!=null?o=o.set(de(),!0):Ft(r.children,s=>{o=o.set(new ge(s),!0)}),Nu(t,new lm(r.path,o,n))}else return[]}function xu(t,e,n){return Nu(t,new Vo(CI(),e,n))}function yj(t,e,n){let r=dt.fromObject(n);return Nu(t,new Su(CI(),e,r))}function Ej(t,e,n,r){let i=UI(t,r);if(i!=null){let o=jI(i),s=o.path,a=o.queryId,c=Pt(s,e),l=new Vo(II(a),c,n);return BI(t,s,l)}else return[]}function bj(t,e,n,r){let i=UI(t,r);if(i){let o=jI(i),s=o.path,a=o.queryId,c=Pt(s,e),l=dt.fromObject(n),u=new Su(II(a),c,l);return BI(t,s,u)}else return[]}function FI(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Pt(s,e),l=Om(a,c);if(l)return l});return xI(i,e,o,n,!0)}function Nu(t,e){return LI(e,t.syncPointTree_,null,AI(t.pendingWriteTree_,de()))}function LI(t,e,n,r){if(J(t.path))return VI(t,e,n,r);{let i=e.get(de());n==null&&i!=null&&(n=Om(i,de()));let o=[],s=ne(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=RI(r,s);o=o.concat(LI(a,c,l,u))}return i&&(o=o.concat(Rm(i,t,r,n))),o}}function VI(t,e,n,r){let i=e.get(de());n==null&&i!=null&&(n=Om(i,de()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=RI(r,s),u=t.operationForChild(s);u&&(o=o.concat(VI(u,a,c,l)))}),i&&(o=o.concat(Rm(i,t,r,n))),o}function UI(t,e){return t.tagToQueryMap.get(e)}function jI(t){let e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ge(t.substr(0,e))}}function BI(t,e,n){let r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");let i=AI(t.pendingWriteTree_,e);return Rm(r,n,i,null)}var _m=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},ym=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=$e(this.path_,e);return new t(this.syncTree_,n)}node(){return FI(this.syncTree_,this.path_)}},wj=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},$C=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Cj(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Ij(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Cj=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},Ij=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);let i=e.node();if(I(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},Dj=function(t,e,n,r){return Pm(e,new ym(n,t),r)},Sj=function(t,e,n){return Pm(t,new _m(e),n)};function Pm(t,e,n){let r=t.getPriority().val(),i=$C(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=$C(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new Fo(a,Xe(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Fo(i))),s.forEachChild(et,(a,c)=>{let l=Pm(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Ea=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function km(t,e){let n=e instanceof ge?e:new ge(e),r=t,i=ne(n);for(;i!==null;){let o=ei(r.node.children,i)||{children:{},childCount:0};r=new Ea(i,r,o),n=ve(n),i=ne(n)}return r}function $o(t){return t.node.value}function $I(t,e){t.node.value=e,Em(t)}function HI(t){return t.node.childCount>0}function Tj(t){return $o(t)===void 0&&!HI(t)}function Ru(t,e){Ft(t.node.children,(n,r)=>{e(new Ea(n,t,r))})}function WI(t,e,n,r){n&&!r&&e(t),Ru(t,i=>{WI(i,e,!0,r)}),n&&r&&e(t)}function Aj(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Da(t){return new ge(t.parent===null?t.name:Da(t.parent)+"/"+t.name)}function Em(t){t.parent!==null&&Mj(t.parent,t.name,t)}function Mj(t,e,n){let r=Tj(n),i=hn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Em(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Em(t))}var xj=/[\[\].#$\/\u0000-\u001F\u007F]/,Nj=/[\[\].#$\u0000-\u001F\u007F]/,Pg=10*1024*1024,zI=function(t){return typeof t=="string"&&t.length!==0&&!xj.test(t)},Rj=function(t){return typeof t=="string"&&t.length!==0&&!Nj.test(t)},Oj=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rj(t)};var GI=function(t,e,n){let r=n instanceof ge?new Kg(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+fi(r));if(typeof e=="function")throw new Error(t+"contains a function "+fi(r)+" with contents = "+e.toString());if(KC(e))throw new Error(t+"contains "+e.toString()+" "+fi(r));if(typeof e=="string"&&e.length>Pg/3&&qs(e)>Pg)throw new Error(t+"contains a string greater than "+Pg+" utf8 bytes "+fi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Ft(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!zI(s)))throw new Error(t+" contains an invalid key ("+s+") "+fi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);IU(r,s),GI(t,a,r),DU(r)}),i&&o)throw new Error(t+' contains ".value" child '+fi(r)+" in addition to actual children.")}};var Pj=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!zI(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Oj(n))throw new Error(Eb(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var bm=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function kj(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!gI(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function yi(t,e,n){kj(t,n),Fj(t,r=>qt(r,e)||qt(e,r))}function Fj(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(Lj(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Lj(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();gi&&Je("event: "+n.toString()),Ca(r)}}}var Vj="repo_interrupt",Uj=25,wm=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bm,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Du(),this.transactionQueueTree_=new Ea,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function jj(t,e,n){if(t.stats_=Am(t.repoInfo_),t.forceRestClient_||XV())t.server_=new im(t.repoInfo_,(r,i,o,s)=>{HC(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>WC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Be(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Mm(t.repoInfo_,e,(r,i,o,s)=>{HC(t,r,i,o,s)},r=>{WC(t,r)},r=>{$j(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=tU(t.repoInfo_,()=>new cm(t.stats_,t.server_)),t.infoData_=new om,t.infoSyncTree_=new Mu({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=xu(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Fm(t,"connected",!1),t.serverSyncTree_=new Mu({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);yi(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Bj(t){let n=t.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function qI(t){return wj({timestamp:Bj(t)})}function HC(t,e,n,r,i){t.dataUpdateCount++;let o=new ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=Gs(n,l=>Xe(l));s=bj(t.serverSyncTree_,o,c,i)}else{let c=Xe(n);s=Ej(t.serverSyncTree_,o,c,i)}else if(r){let c=Gs(n,l=>Xe(l));s=yj(t.serverSyncTree_,o,c)}else{let c=Xe(n);s=xu(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Vm(t,o)),yi(t.eventQueue_,a,s)}function WC(t,e){Fm(t,"connected",e),e===!1&&Wj(t)}function $j(t,e){Ft(e,(n,r)=>{Fm(t,n,r)})}function Fm(t,e,n){let r=new ge("/.info/"+e),i=Xe(n);t.infoData_.updateSnapshot(r,i);let o=xu(t.infoSyncTree_,r,i);yi(t.eventQueue_,r,o)}function Hj(t){return t.nextWriteId_++}function Wj(t){KI(t,"onDisconnectEvents");let e=qI(t),n=Du();sm(t.onDisconnect_,de(),(i,o)=>{let s=Dj(i,o,t.serverSyncTree_,e);bI(n,i,s)});let r=[];sm(n,de(),(i,o)=>{r=r.concat(xu(t.serverSyncTree_,i,o));let s=Kj(t,i);Vm(t,s)}),t.onDisconnect_=Du(),yi(t.eventQueue_,de(),r)}function zj(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Vj)}function KI(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Je(n,...e)}function YI(t,e,n){return FI(t.serverSyncTree_,e,n)||Ee.EMPTY_NODE}function Lm(t,e=t.transactionQueueTree_){if(e||Ou(t,e),$o(e)){let n=ZI(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Gj(t,Da(e),n)}else HI(e)&&Ru(e,n=>{Lm(t,n)})}function Gj(t,e,n){let r=n.map(l=>l.currentWriteId),i=YI(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];I(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Pt(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{KI(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let p=0;p<n.length;p++)n[p].status=2,u=u.concat(No(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Ou(t,km(t.transactionQueueTree_,e)),Lm(t,t.transactionQueueTree_),yi(t.eventQueue_,e,u);for(let p=0;p<d.length;p++)Ca(d[p])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Et("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Vm(t,e)}},s)}function Vm(t,e){let n=QI(t,e),r=Da(n),i=ZI(t,n);return qj(t,i,r),r}function qj(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Pt(n,c.path),u=!1,d;if(I(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(No(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Uj)u=!0,d="maxretry",i=i.concat(No(t.serverSyncTree_,c.currentWriteId,!0));else{let p=YI(t,c.path,s);c.currentInputSnapshot=p;let m=e[a].update(p.val());if(m!==void 0){GI("transaction failed: Data returned ",m,c.path);let _=Xe(m);typeof m=="object"&&m!=null&&hn(m,".priority")||(_=_.updatePriority(p.getPriority()));let E=c.currentWriteId,S=qI(t),K=Sj(_,p,S);c.currentOutputSnapshotRaw=_,c.currentOutputSnapshotResolved=K,c.currentWriteId=Hj(t),s.splice(s.indexOf(E),1),i=i.concat(_j(t.serverSyncTree_,c.path,K,c.currentWriteId,c.applyLocally)),i=i.concat(No(t.serverSyncTree_,E,!0))}else u=!0,d="nodata",i=i.concat(No(t.serverSyncTree_,c.currentWriteId,!0))}yi(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Ou(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ca(r[a]);Lm(t,t.transactionQueueTree_)}function QI(t,e){let n,r=t.transactionQueueTree_;for(n=ne(e);n!==null&&$o(r)===void 0;)r=km(r,n),e=ve(e),n=ne(e);return r}function ZI(t,e){let n=[];return JI(t,e,n),n.sort((r,i)=>r.order-i.order),n}function JI(t,e,n){let r=$o(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ru(e,i=>{JI(t,i,n)})}function Ou(t,e){let n=$o(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,$I(e,n.length>0?n:void 0)}Ru(e,r=>{Ou(t,r)})}function Kj(t,e){let n=Da(QI(t,e)),r=km(t.transactionQueueTree_,e);return Aj(r,i=>{kg(t,i)}),kg(t,r),WI(r,i=>{kg(t,i)}),n}function kg(t,e){let n=$o(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(I(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(I(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(No(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?$I(e,void 0):n.length=o+1,yi(t.eventQueue_,Da(e),i);for(let s=0;s<r.length;s++)Ca(r[s])}}function Yj(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Qj(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Et(`Invalid query segment '${n}' in query '${t}'`)}return e}var zC=function(t,e){let n=Zj(t),r=n.namespace;n.domain==="firebase.com"&&Ln(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ln("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||zV();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new _u(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ge(n.pathString)}},Zj=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=Yj(t.substring(u,d)));let p=Qj(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let m=e.slice(0,l);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{let _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var Cm=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return J(this._path)?null:hI(this._path)}get ref(){return new jo(this._repo,this._path)}get _queryIdentifier(){let e=NC(this._queryParams),n=Tm(e);return n==="{}"?"default":n}get _queryObject(){return NC(this._queryParams)}isEqual(e){if(e=Ze(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=gI(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+CU(this._path)}};var jo=class t extends Cm{constructor(e,n){super(e,n,new rm,!1)}get parent(){let e=pI(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};mj(jo);vj(jo);var Jj="FIREBASE_DATABASE_EMULATOR_HOST",Im={},Xj=!1;function e2(t,e,n,r){t.repoInfo_=new _u(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function t2(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Ln("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Je("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=zC(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Jj]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=zC(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new ga(ga.OWNER):new Bg(t.name,t.options,e);Pj("Invalid Firebase Database URL",s),J(s.path)||Ln("Database URL must point to the root of a Firebase Database (not including a child path).");let d=r2(a,t,u,new jg(t.name,n));return new Dm(d,t)}function n2(t,e){let n=Im[e];(!n||n[t.key]!==t)&&Ln(`Database ${e}(${t.repoInfo_}) has already been deleted.`),zj(t),delete n[t.key]}function r2(t,e,n,r){let i=Im[e.name];i||(i={},Im[e.name]=i);let o=i[t.toURLString()];return o&&Ln("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new wm(t,Xj,n,r),i[t.toURLString()]=o,o}var Dm=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new jo(this._repo,de())),this._rootInternal}_delete(){return this._rootInternal!==null&&(n2(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ln("Cannot call "+e+" on a deleted database.")}};function XI(t=gr(),e){let n=ii(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Rl("database");r&&eD(n,...r)}return n}function eD(t,e,n,r={}){t=Ze(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ln("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ln('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ga(ga.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:Ol(r.mockUserToken,t.app.options.projectId);o=new ga(s)}e2(i,e,n,o)}function i2(t){$V(gn),pn(new ut("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return t2(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),_e(fC,pC,t),_e(fC,pC,"esm2017")}Mm.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Mm.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};i2();var Sa=class{constructor(e){return e}},tD="database",Um=class{constructor(){return si(tD)}};var jm=new A("angularfire2.database-instances");function o2(t,e){let n=Co(tD,t,e);return n&&new Sa(n)}function s2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Sa(r)}}var a2={provide:Um,deps:[[new Ne,jm]]},c2={provide:Sa,useFactory:o2,deps:[[new Ne,jm],zt]};function Bm(t,...e){return _e("angularfire",Rn.full,"rtdb"),ct([c2,a2,{provide:jm,useFactory:s2(t),multi:!0,deps:[oe,ze,vr,On,[new Ne,di],[new Ne,mr],...e]}])}var $m=Ot(XI,!0);var nD={providers:[E0({eventCoalescing:!0}),LE(dC),q0(),jl(()=>Bl(hC.firebase)),uu(()=>hu()),jl(()=>Bl({projectId:"verdeventura-db",appId:"1:1010780911535:web:c7efd14be17be4acc1e15a",databaseURL:"https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"verdeventura-db.appspot.com",apiKey:"AIzaSyCnWKM_I5yxJzrL40qvFGupJHTykuHSsGU",authDomain:"verdeventura-db.firebaseapp.com",messagingSenderId:"1010780911535"})),ug(()=>dg()),Bm(()=>$m()),uu(()=>hu()),jl(()=>Bl({projectId:"verdeventura-db",appId:"1:1010780911535:web:c7efd14be17be4acc1e15a",databaseURL:"https://verdeventura-db-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"verdeventura-db.appspot.com",apiKey:"AIzaSyCnWKM_I5yxJzrL40qvFGupJHTykuHSsGU",authDomain:"verdeventura-db.firebaseapp.com",messagingSenderId:"1010780911535"})),ug(()=>dg()),Bm(()=>$m()),uu(()=>hu())]};function l2(t,e){t&1&&(h(0,"li",6)(1,"a",15),g(2,"Retos"),f()())}function u2(t,e){t&1&&(h(0,"li",6)(1,"a",16),g(2,"Grupos"),f()())}function d2(t,e){t&1&&(h(0,"li",6)(1,"a",17),g(2,"Ranking"),f()())}function h2(t,e){t&1&&(h(0,"li",6)(1,"a",18),g(2,"Usuario"),f()())}function f2(t,e){if(t&1){let n=Le();h(0,"a",19),O("click",function(){Ce(n);let i=k();return Ie(i.logOut())}),g(1,"Cerrar sesi\xF3n"),f()}}function p2(t,e){t&1&&(h(0,"li",6)(1,"a",20),g(2,"Reg\xEDstrate"),f()())}function g2(t,e){t&1&&(h(0,"li",6)(1,"a",21),g(2,"Iniciar Sesi\xF3n"),f()())}var rD=(()=>{let e=class e{constructor(r,i,o){this.http=r,this.authService=i,this.router=o,this.currentUser=null}ngOnInit(){this.loadCurrentUser()}loadCurrentUser(){let r=this.authService.getUsername()}logOut(){this.authService.logout(),alert("Sesi\xF3n cerrada"),this.router.navigate(["/hastapronto"])}};e.\u0275fac=function(i){return new(i||e)(b(pe),b(Pe),b(Ue))},e.\u0275cmp=z({type:e,selectors:[["app-header"]],standalone:!0,features:[te],decls:26,vars:7,consts:[[1,"navbar","navbar-expand-sm","bg-light","fixed-top","custom-navbar"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#mynavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","mynavbar",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2"],[1,"nav-item"],["routerLink","",1,"navbar-brand"],["src","/assets/logo.png","alt","Logo","width","40","height","40"],[1,"navbar-nav","mx-auto"],["routerLink","",1,"nav-link"],["class","nav-item",4,"ngIf"],["routerLink","guiaods",1,"nav-link"],[1,"navbar-nav","ms-auto","mb-2"],["class","nav-link",3,"click",4,"ngIf"],["routerLink","retos",1,"nav-link"],["routerLink","group",1,"nav-link"],["routerLink","rank",1,"nav-link"],["routerLink","perfil",1,"nav-link"],[1,"nav-link",3,"click"],["routerLink","register",1,"nav-link"],["routerLink","login",1,"nav-link"]],template:function(i,o){i&1&&(h(0,"nav",0)(1,"div",1)(2,"button",2),R(3,"span",3),f(),h(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),R(8,"img",8),g(9," VerdeVentura "),f()()(),h(10,"ul",9)(11,"li",6)(12,"a",10),g(13,"Inicio"),f()(),q(14,l2,3,0,"li",11)(15,u2,3,0,"li",11)(16,d2,3,0,"li",11),h(17,"li",6)(18,"a",12),g(19,"Guia ODS"),f()()(),h(20,"ul",13),q(21,h2,3,0,"li",11),h(22,"li",6),q(23,f2,2,0,"a",14),f(),q(24,p2,3,0,"li",11)(25,g2,3,0,"li",11),f()()()()),i&2&&(y(14),M("ngIf",o.authService.isLoggedIn()===!0),y(),M("ngIf",o.authService.isLoggedIn()===!0),y(),M("ngIf",o.authService.isLoggedIn()===!0),y(5),M("ngIf",o.authService.isLoggedIn()===!0),y(2),M("ngIf",o.authService.isLoggedIn()===!0),y(),M("ngIf",o.authService.isLoggedIn()===!1),y(),M("ngIf",o.authService.isLoggedIn()===!1))},dependencies:[ur,me,Qe],styles:[".custom-navbar[_ngcontent-%COMP%]{margin:10px 20px;border-radius:15px;box-shadow:0 4px 8px #0000001a;background-color:#fff;border:1px solid rgba(0,0,0,.1);z-index:1030}a[_ngcontent-%COMP%]{cursor:pointer}"]});let t=e;return t})();var iD=(()=>{let e=class e{onWindowScroll(){let r=document.getElementById("scrollToTopBtn");r&&(window.scrollY>300?r.style.display="block":r.style.display="none")}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=z({type:e,selectors:[["app-scroll-to-top"]],hostBindings:function(i,o){i&1&&O("scroll",function(){return o.onWindowScroll()},!1,Dy)},standalone:!0,features:[te],decls:1,vars:0,consts:[["id","scrollToTopBtn","src","/assets/brutal.gif","alt","Scroll to Top",1,"animate__animated","animate__bounceIn",3,"click"]],template:function(i,o){i&1&&(h(0,"img",0),O("click",function(){return o.scrollToTop()}),f())},dependencies:[me],styles:["#scrollToTopBtn[_ngcontent-%COMP%]{display:none;position:fixed;bottom:20px;right:20px;z-index:99;cursor:pointer;width:150px;height:150px}#scrollToTopBtn[_ngcontent-%COMP%]:hover{opacity:.8}"]});let t=e;return t})();var oD=(()=>{let e=class e{constructor(r){this.router=r}ngOnInit(){this.router.events.subscribe(r=>{r instanceof cn&&window.scrollTo(0,0)})}};e.\u0275fac=function(i){return new(i||e)(b(Ue))},e.\u0275cmp=z({type:e,selectors:[["app-root"]],standalone:!0,features:[te],decls:4,vars:0,consts:[[1,"ae-container-fluid","ae-container-fluid--inner","rk-main"]],template:function(i,o){i&1&&(R(0,"app-header"),h(1,"div",0),R(2,"router-outlet"),f(),R(3,"app-scroll-to-top"))},dependencies:[zf,rD,iD]});let t=e;return t})();tE(oD,nD).catch(t=>console.error(t));
